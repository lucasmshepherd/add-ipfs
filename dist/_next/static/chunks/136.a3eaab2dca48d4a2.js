"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{83136:function(a,b,c){c.d(b,{C2:function(){return dg}});var d={allowDownsampling:!0},e=function(){function a(a,b){var c=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(a){return c._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=a,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=b,this._configureCanvas(),this._installResolutionListener()}return a.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(a.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),a.prototype.resizeCanvas=function(a){this._canvasSize={width:a.width,height:a.height},this._configureCanvas()},Object.defineProperty(a.prototype,"pixelRatio",{get:function(){var a=this.canvas.ownerDocument.defaultView;if(null==a)throw Error("No window is associated with the canvas");return a.devicePixelRatio>1||this._options.allowDownsampling?a.devicePixelRatio:1},enumerable:!0,configurable:!0}),a.prototype.subscribeCanvasConfigured=function(a){this._canvasConfiguredListeners.push(a)},a.prototype.unsubscribeCanvasConfigured=function(a){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter(function(b){return b!=a})},a.prototype._configureCanvas=function(){var a=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*a,this.canvas.height=this._canvasSize.height*a,this._emitCanvasConfigured()},a.prototype._emitCanvasConfigured=function(){var a=this;this._canvasConfiguredListeners.forEach(function(b){return b.call(a)})},a.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var a=this.canvas.ownerDocument.defaultView;if(null==a)throw Error("No window is associated with the canvas");var b=a.devicePixelRatio;this._resolutionMediaQueryList=a.matchMedia("all and (resolution: "+b+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},a.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},a.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},a.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},a}();function f(a,b){var c,d=((c={})[0]=[],c[1]=[a.lineWidth,a.lineWidth],c[2]=[2*a.lineWidth,2*a.lineWidth],c[3]=[6*a.lineWidth,6*a.lineWidth],c[4]=[a.lineWidth,4*a.lineWidth],c)[b];a.setLineDash(d)}function g(a,b,c,d){a.beginPath();var e=a.lineWidth%2?.5:0;a.moveTo(c,b+e),a.lineTo(d,b+e),a.stroke()}function h(a,b){if(!a)throw Error("Assertion failed"+(b?": "+b:""))}function i(a){if(void 0===a)throw Error("Value is undefined");return a}function j(a){if(null===a)throw Error("Value is null");return a}function k(a){return j(i(a))}(W=Y||(Y={}))[W.Simple=0]="Simple",W[W.WithSteps=1]="WithSteps",(X=Z||(Z={}))[X.Solid=0]="Solid",X[X.Dotted=1]="Dotted",X[X.Dashed=2]="Dashed",X[X.LargeDashed=3]="LargeDashed",X[X.SparseDotted=4]="SparseDotted";var l={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function m(a){return a<0?0:a>255?255:Math.round(a)||0}function n(a){return a<=0||a>0?a<0?0:a>1?1:Math.round(1e4*a)/1e4:0}var o=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,p=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,q=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,r=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function s(a){var b;if((a=a.toLowerCase())in l&&(a=l[a]),b=r.exec(a)||q.exec(a))return[m(parseInt(b[1],10)),m(parseInt(b[2],10)),m(parseInt(b[3],10)),n(b.length<5?1:parseFloat(b[4]))];if(b=p.exec(a))return[m(parseInt(b[1],16)),m(parseInt(b[2],16)),m(parseInt(b[3],16)),1];if(b=o.exec(a))return[m(17*parseInt(b[1],16)),m(17*parseInt(b[2],16)),m(17*parseInt(b[3],16)),1];throw Error("Cannot parse color: ".concat(a))}function t(a){var b,c=s(a);return{t:"rgb(".concat(c[0],", ").concat(c[1],", ").concat(c[2],")"),i:.199*(b=c)[0]+.687*b[1]+.114*b[2]>160?"black":"white"}}var u=function(a,b){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function v(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}u(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var w=function(){return(w=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function x(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var y=function(){function a(){this.h=[]}return a.prototype.u=function(a,b,c){this.h.push({o:a,l:b,v:!0===c})},a.prototype._=function(a){var b=this.h.findIndex(function(b){return a===b.o});b> -1&&this.h.splice(b,1)},a.prototype.M=function(a){this.h=this.h.filter(function(b){return b.l!==a})},a.prototype.m=function(a,b){var c=x([],this.h,!0);this.h=this.h.filter(function(a){return!a.v}),c.forEach(function(c){return c.o(a,b)})},a.prototype.p=function(){return this.h.length>0},a.prototype.g=function(){this.h=[]},a}();function z(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d=0,e=b;d<e.length;d++){var f=e[d];for(var g in f)void 0!==f[g]&&("object"!=typeof f[g]|| void 0===a[g]?a[g]=f[g]:z(a[g],f[g]))}return a}function A(a){return"number"==typeof a&&isFinite(a)}function B(a){return"number"==typeof a&&a%1==0}function C(a){return"string"==typeof a}function D(a){return"boolean"==typeof a}function E(a){var b,c,d,e=a;if(!e||"object"!=typeof e)return e;for(c in b=Array.isArray(e)?[]:{},e)e.hasOwnProperty(c)&&(d=e[c],b[c]=d&&"object"==typeof d?E(d):d);return b}function F(a){return null!==a}function G(a){return null===a?void 0:a}var H="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function I(a,b,c){return c=void 0!==c?"".concat(c," "):"",void 0===b&&(b=H),"".concat(c).concat(a,"px ").concat(b)}var J=function(){function a(a){this.k={N:1,C:4,S:NaN,T:"",D:"",A:"",B:0,L:0,F:0,O:0,V:0},this.P=a}return a.prototype.W=function(){var a=this.k,b=this.R(),c=this.I();return a.S===b&&a.D===c||(a.S=b,a.D=c,a.T=I(b,c),a.O=Math.floor(b/3.5),a.B=a.O,a.L=Math.max(Math.ceil(b/2-a.C/2),0),a.F=Math.ceil(b/2+a.C/2),a.V=Math.round(b/10)),a.A=this.j(),this.k},a.prototype.j=function(){return this.P.W().layout.textColor},a.prototype.R=function(){return this.P.W().layout.fontSize},a.prototype.I=function(){return this.P.W().layout.fontFamily},a}(),K=function(){function a(){this.q=[]}return a.prototype.U=function(a){this.q=a},a.prototype.H=function(a,b,c,d){this.q.forEach(function(e){a.save(),e.H(a,b,c,d),a.restore()})},a}(),L=function(){function a(){}return a.prototype.H=function(a,b,c,d){a.save(),a.scale(b,b),this.Y(a,c,d),a.restore()},a.prototype.$=function(a,b,c,d){a.save(),a.scale(b,b),this.K(a,c,d),a.restore()},a.prototype.K=function(a,b,c){},a}(),M=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.X=null,b}return v(b,a),b.prototype.Z=function(a){this.X=a},b.prototype.Y=function(a){if(null!==this.X&&null!==this.X.J){var b=this.X.J,c=this.X,d=function(d){a.beginPath();for(var e=b.to-1;e>=b.from;--e){var f=c.G[e];a.moveTo(f.tt,f.it),a.arc(f.tt,f.it,d,0,2*Math.PI)}a.fill()};a.fillStyle=c.nt,d(c.st+2),a.fillStyle=c.ht,d(c.st)}},b}(L);function N(){return{G:[{tt:0,it:0,rt:0,et:0}],ht:"",nt:"",st:0,J:null}}var O={from:0,to:1},P=function(){function a(a,b){this.ut=new K,this.ot=[],this.lt=[],this.ft=!0,this.P=a,this.ct=b,this.ut.U(this.ot)}return a.prototype.vt=function(a){var b=this.P._t();b.length!==this.ot.length&&(this.lt=b.map(N),this.ot=this.lt.map(function(a){var b=new M;return b.Z(a),b}),this.ut.U(this.ot)),this.ft=!0},a.prototype.dt=function(a,b,c){return this.ft&&(this.wt(a),this.ft=!1),this.ut},a.prototype.wt=function(a){var b=this,c=this.P._t(),d=this.ct.Mt(),e=this.P.bt();c.forEach(function(c,f){var g,h=b.lt[f],i=c.gt(d);if(null!==i&&c.yt()){var k=j(c.kt());h.ht=i.Nt,h.st=i.st,h.G[0].et=i.et,h.G[0].it=c.Ct().xt(i.et,k.St),h.nt=null!==(g=i.Tt)&& void 0!==g?g:b.P.Dt(h.G[0].it/a),h.G[0].rt=d,h.G[0].tt=e.At(d),h.J=O}else h.J=null})},a}(),Q=function(){function a(a){this.Bt=a}return a.prototype.H=function(a,b,c,d){if(null!==this.Bt){var e=this.Bt.Lt.yt,h=this.Bt.Et.yt;if(e||h){a.save();var i=Math.round(this.Bt.tt*b),j=Math.round(this.Bt.it*b),k=Math.ceil(this.Bt.Ft*b),l=Math.ceil(this.Bt.Ot*b);a.lineCap="butt",e&&i>=0&&(a.lineWidth=Math.floor(this.Bt.Lt.Vt*b),a.strokeStyle=this.Bt.Lt.A,a.fillStyle=this.Bt.Lt.A,f(a,this.Bt.Lt.Pt),function(a,b,c,d){a.beginPath();var e=a.lineWidth%2?.5:0;a.moveTo(b+e,0),a.lineTo(b+e,d),a.stroke()}(a,i,0,l)),h&&j>=0&&(a.lineWidth=Math.floor(this.Bt.Et.Vt*b),a.strokeStyle=this.Bt.Et.A,a.fillStyle=this.Bt.Et.A,f(a,this.Bt.Et.Pt),g(a,j,0,k)),a.restore()}}},a}(),R=function(){function a(a){this.ft=!0,this.Wt={Lt:{Vt:1,Pt:0,A:"",yt:!1},Et:{Vt:1,Pt:0,A:"",yt:!1},Ft:0,Ot:0,tt:0,it:0},this.zt=new Q(this.Wt),this.Rt=a}return a.prototype.vt=function(){this.ft=!0},a.prototype.dt=function(a,b){return this.ft&&(this.wt(),this.ft=!1),this.zt},a.prototype.wt=function(){var a=this.Rt.yt(),b=j(this.Rt.It()),c=b.jt().W().crosshair,d=this.Wt;d.Et.yt=a&&this.Rt.qt(b),d.Lt.yt=a&&this.Rt.Ut(),d.Et.Vt=c.horzLine.width,d.Et.Pt=c.horzLine.style,d.Et.A=c.horzLine.color,d.Lt.Vt=c.vertLine.width,d.Lt.Pt=c.vertLine.style,d.Lt.A=c.vertLine.color,d.Ft=b.Ht(),d.Ot=b.Yt(),d.tt=this.Rt.$t(),d.it=this.Rt.Kt()},a}();function S(a,b,c,d,e,f){a.fillRect(b+f,c,d-2*f,f),a.fillRect(b+f,c+e-f,d-2*f,f),a.fillRect(b,c,f,e),a.fillRect(b+d-f,c,f,e)}function T(a,b,c){a.save(),a.scale(b,b),c(),a.restore()}function U(a,b,c,d,e,f){a.save(),a.globalCompositeOperation="copy",a.fillStyle=f,a.fillRect(b,c,d,e),a.restore()}function V(a,b,c,d,e,f,g){a.save(),a.globalCompositeOperation="copy";var h=a.createLinearGradient(0,0,0,e);h.addColorStop(0,f),h.addColorStop(1,g),a.fillStyle=h,a.fillRect(b,c,d,e),a.restore()}var W,X,Y,Z,$,_,aa=function(){function a(a,b){this.Z(a,b)}return a.prototype.Z=function(a,b){this.Bt=a,this.Xt=b},a.prototype.H=function(a,b,c,d,e,f){if(this.Bt.yt){a.font=b.T;var g=this.Bt.Zt||!this.Bt.Jt?b.C:0,h=b.N,i=b.O,j=b.B,k=b.L,l=b.F,m=this.Bt.Gt,n=Math.ceil(c.Qt(a,m)),o=b.V,p=b.S+i+j,q=Math.ceil(.5*p),r=h+n+k+l+g,s=this.Xt.ti;this.Xt.ii&&(s=this.Xt.ii);var t,u,v=(s=Math.round(s))-q,w=v+p,x="right"===e,y=x?d:0,z=Math.ceil(d*f),A=y;if(a.fillStyle=this.Xt.t,a.lineWidth=1,a.lineCap="butt",m){x?(t=y-g,u=(A=y-r)+l):(A=y+r,t=y+g,u=y+h+g+k);var B=Math.max(1,Math.floor(f)),C=Math.max(1,Math.floor(h*f)),D=x?z:0,E=Math.round(v*f),F=Math.round(A*f),G=Math.round(s*f)-Math.floor(.5*f),H=G+B+(G-E),I=Math.round(t*f);a.save(),a.beginPath(),a.moveTo(D,E),a.lineTo(F,E),a.lineTo(F,H),a.lineTo(D,H),a.fill(),a.fillStyle=this.Bt.Tt,a.fillRect(x?z-C:0,E,C,H-E),this.Bt.Zt&&(a.fillStyle=this.Xt.A,a.fillRect(D,G,I-D,B)),a.textAlign="left",a.fillStyle=this.Xt.A,T(a,f,function(){a.fillText(m,u,w-j-o)}),a.restore()}}},a.prototype.Yt=function(a,b){return this.Bt.yt?a.S+a.O+a.B:0},a}(),ab=function(){function a(a){this.ni={ti:0,A:"#FFF",t:"#000"},this.si={Gt:"",yt:!1,Zt:!0,Jt:!1,Tt:""},this.hi={Gt:"",yt:!1,Zt:!1,Jt:!0,Tt:""},this.ft=!0,this.ri=new(a||aa)(this.si,this.ni),this.ei=new(a||aa)(this.hi,this.ni)}return a.prototype.Gt=function(){return this.ui(),this.si.Gt},a.prototype.ti=function(){return this.ui(),this.ni.ti},a.prototype.vt=function(){this.ft=!0},a.prototype.Yt=function(a,b){return void 0===b&&(b=!1),Math.max(this.ri.Yt(a,b),this.ei.Yt(a,b))},a.prototype.ai=function(){return this.ni.ii||0},a.prototype.oi=function(a){this.ni.ii=a},a.prototype.li=function(){return this.ui(),this.si.yt||this.hi.yt},a.prototype.fi=function(){return this.ui(),this.si.yt},a.prototype.dt=function(a){return this.ui(),this.si.Zt=this.si.Zt&&a.W().drawTicks,this.hi.Zt=this.hi.Zt&&a.W().drawTicks,this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ri},a.prototype.ci=function(){return this.ui(),this.ri.Z(this.si,this.ni),this.ei.Z(this.hi,this.ni),this.ei},a.prototype.ui=function(){this.ft&&(this.si.Zt=!0,this.hi.Zt=!1,this.vi(this.si,this.hi,this.ni))},a}(),ac=function(a){function b(b,c,d){var e=a.call(this)||this;return e.Rt=b,e._i=c,e.di=d,e}return v(b,a),b.prototype.vi=function(a,b,c){a.yt=!1;var d=this.Rt.W().horzLine;if(d.labelVisible){var e=this._i.kt();if(this.Rt.yt()&&!this._i.wi()&&null!==e){var f=t(d.labelBackgroundColor);c.t=f.t,c.A=f.i;var g=this.di(this._i);c.ti=g.ti,a.Gt=this._i.Mi(g.et,e),a.yt=!0}}},b}(ab),ad=/[1-9]/g,ae=function(){function a(){this.Bt=null}return a.prototype.Z=function(a){this.Bt=a},a.prototype.H=function(a,b,c){var d=this;if(null!==this.Bt&& !1!==this.Bt.yt&&0!==this.Bt.Gt.length){a.font=b.T;var e=Math.round(b.bi.Qt(a,this.Bt.Gt,ad));if(!(e<=0)){a.save();var f=b.mi,g=e+2*f,h=g/2,i=this.Bt.Ht,k=this.Bt.ti,l=Math.floor(k-h)+.5;l<0?(k+=Math.abs(0-l),l=Math.floor(k-h)+.5):l+g>i&&(k-=Math.abs(i-(l+g)),l=Math.floor(k-h)+.5);var m=l+g,n=0+b.N+b.O+b.S+b.B;a.fillStyle=this.Bt.t;var o=Math.round(l*c),p=Math.round(0*c),q=Math.round(m*c),r=Math.round(n*c);a.fillRect(o,p,q-o,r-p);var s=Math.round(this.Bt.ti*c),t=p,u=Math.round((t+b.N+b.C)*c);a.fillStyle=this.Bt.A;var v=Math.max(1,Math.floor(c)),w=Math.floor(.5*c);a.fillRect(s-w,t,v,u-t);var x=n-b.V-b.B;a.textAlign="left",a.fillStyle=this.Bt.A,T(a,c,function(){a.fillText(j(d.Bt).Gt,l+f,x)}),a.restore()}}},a}(),af=function(){function a(a,b,c){this.ft=!0,this.zt=new ae,this.Wt={yt:!1,t:"#4c525e",A:"white",Gt:"",Ht:0,ti:NaN},this.ct=a,this.pi=b,this.di=c}return a.prototype.vt=function(){this.ft=!0},a.prototype.dt=function(){return this.ft&&(this.wt(),this.ft=!1),this.zt.Z(this.Wt),this.zt},a.prototype.wt=function(){var a=this.Wt;a.yt=!1;var b=this.ct.W().vertLine;if(b.labelVisible){var c=this.pi.bt();if(!c.wi()){var d=c.gi(this.ct.Mt());a.Ht=c.Ht();var e=this.di();if(e.rt){a.ti=e.ti,a.Gt=c.yi(j(d)),a.yt=!0;var f=t(b.labelBackgroundColor);a.t=f.t,a.A=f.i}}}},a}(),ag=function(){function a(){this.ki=null,this.Ni=0}return a.prototype.xi=function(){return this.Ni},a.prototype.Ci=function(a){this.Ni=a},a.prototype.Ct=function(){return this.ki},a.prototype.Si=function(a){this.ki=a},a.prototype.Ti=function(){return[]},a.prototype.yt=function(){return!0},a}();(_=$||($={}))[_.Normal=0]="Normal",_[_.Magnet=1]="Magnet";var ah=function(a){function b(b,c){var d,e,f=a.call(this)||this;f.Di=null,f.Ai=NaN,f.Bi=0,f.Li=!0,f.Ei=new Map,f.Fi=!1,f.Oi=NaN,f.Vi=NaN,f.Pi=NaN,f.Wi=NaN,f.pi=b,f.zi=c,f.Ri=new P(b,f),f.Ii=(d=function(){return f.Ai},e=function(){return f.Vi},function(a){var b=e(),c=d();if(a===j(f.Di).ji())return{et:c,ti:b};var g=j(a.kt());return{et:a.qi(b,g),ti:b}});var g=function(a,b){return function(){return{rt:f.pi.bt().gi(a()),ti:b()}}}(function(){return f.Bi},function(){return f.$t()});return f.Ui=new af(f,b,g),f.Hi=new R(f),f}return v(b,a),b.prototype.W=function(){return this.zi},b.prototype.Yi=function(a,b){this.Pi=a,this.Wi=b},b.prototype.$i=function(){this.Pi=NaN,this.Wi=NaN},b.prototype.Ki=function(){return this.Pi},b.prototype.Xi=function(){return this.Wi},b.prototype.Zi=function(a,b,c){this.Fi||(this.Fi=!0),this.Li=!0,this.Ji(a,b,c)},b.prototype.Mt=function(){return this.Bi},b.prototype.$t=function(){return this.Oi},b.prototype.Kt=function(){return this.Vi},b.prototype.yt=function(){return this.Li},b.prototype.Gi=function(){this.Li=!1,this.Qi(),this.Ai=NaN,this.Oi=NaN,this.Vi=NaN,this.Di=null,this.$i()},b.prototype.tn=function(a){return null!==this.Di?[this.Hi,this.Ri]:[]},b.prototype.qt=function(a){return a===this.Di&&this.zi.horzLine.visible},b.prototype.Ut=function(){return this.zi.vertLine.visible},b.prototype.nn=function(a,b){this.Li&&this.Di===a||this.Ei.clear();var c=[];return this.Di===a&&c.push(this.sn(this.Ei,b,this.Ii)),c},b.prototype.Ti=function(){return this.Li?[this.Ui]:[]},b.prototype.It=function(){return this.Di},b.prototype.hn=function(){this.Hi.vt(),this.Ei.forEach(function(a){return a.vt()}),this.Ui.vt(),this.Ri.vt()},b.prototype.rn=function(a){return a&&!a.ji().wi()?a.ji():null},b.prototype.Ji=function(a,b,c){this.en(a,b,c)&&this.hn()},b.prototype.en=function(a,b,c){var d=this.Oi,e=this.Vi,f=this.Ai,g=this.Bi,h=this.Di,i=this.rn(c);this.Bi=a,this.Oi=isNaN(a)?NaN:this.pi.bt().At(a),this.Di=c;var j=null!==i?i.kt():null;return null!==i&&null!==j?(this.Ai=b,this.Vi=i.xt(b,j)):(this.Ai=NaN,this.Vi=NaN),d!==this.Oi||e!==this.Vi||g!==this.Bi||f!==this.Ai||h!==this.Di},b.prototype.Qi=function(){var a=this.pi._t().map(function(a){return a.an().un()}).filter(F),b=0===a.length?null:Math.max.apply(Math,a);this.Bi=null!==b?b:NaN},b.prototype.sn=function(a,b,c){var d=a.get(b);return void 0===d&&(d=new ac(this,b,c),a.set(b,d)),d},b}(ag);function ai(a){return"left"===a||"right"===a}var aj=function(){function a(a){this.on=new Map,this.ln=[],this.fn=a}return a.prototype.cn=function(a,b){var c,d,e=(c=this.on.get(a),d=b,void 0===c?d:{vn:Math.max(c.vn,d.vn),_n:c._n||d._n});this.on.set(a,e)},a.prototype.dn=function(){return this.fn},a.prototype.wn=function(a){var b=this.on.get(a);return void 0===b?{vn:this.fn}:{vn:Math.max(this.fn,b.vn),_n:b._n}},a.prototype.Mn=function(){this.ln=[{bn:0}]},a.prototype.mn=function(a){this.ln=[{bn:1,St:a}]},a.prototype.pn=function(){this.ln=[{bn:4}]},a.prototype.gn=function(a){this.ln.push({bn:2,St:a})},a.prototype.yn=function(a){this.ln.push({bn:3,St:a})},a.prototype.kn=function(){return this.ln},a.prototype.Nn=function(a){for(var b=this,c=0,d=a.ln;c<d.length;c++){var e=d[c];this.xn(e)}this.fn=Math.max(this.fn,a.fn),a.on.forEach(function(a,c){b.cn(c,a)})},a.prototype.xn=function(a){switch(a.bn){case 0:this.Mn();break;case 1:this.mn(a.St);break;case 2:this.gn(a.St);break;case 3:this.yn(a.St);break;case 4:this.pn()}},a}();function ak(a,b){if(!A(a))return"n/a";if(!B(b)||b<0||b>16)throw TypeError("invalid length");return 0===b?a.toString():("0000000000000000"+a.toString()).slice(-b)}var al=function(){function a(a,b){if(b||(b=1),A(a)&&B(a)||(a=100),a<0)throw TypeError("invalid base");this._i=a,this.Cn=b,this.Sn()}return a.prototype.format=function(a){var b=a<0?"âˆ’":"";return a=Math.abs(a),b+this.Tn(a)},a.prototype.Sn=function(){if(this.Dn=0,this._i>0&&this.Cn>0)for(var a=this._i;a>1;)a/=10,this.Dn++},a.prototype.Tn=function(a){var b=this._i/this.Cn,c=Math.floor(a),d="",e=void 0!==this.Dn?this.Dn:NaN;if(b>1){var f=+(Math.round(a*b)-c*b).toFixed(this.Dn);f>=b&&(f-=b,c+=1),d="."+ak(+f.toFixed(this.Dn)*this.Cn,e)}else c=Math.round(c*b)/b,e>0&&(d="."+ak(0,e));return c.toFixed(0)+d},a}(),am=function(a){function b(b){return void 0===b&&(b=100),a.call(this,b)||this}return v(b,a),b.prototype.format=function(b){return"".concat(a.prototype.format.call(this,b),"%")},b}(al),an=function(){function a(a){this.An=a}return a.prototype.format=function(a){var b="";return a<0&&(b="-",a=-a),a<995?b+this.Bn(a):a<999995?b+this.Bn(a/1e3)+"K":a<999999995?(a=1e3*Math.round(a/1e3),b+this.Bn(a/1e6)+"M"):(a=1e6*Math.round(a/1e6),b+this.Bn(a/1e9)+"B")},a.prototype.Bn=function(a){var b=Math.pow(10,this.An);return((a=Math.round(a*b)/b)>=1e-15&&a<1?a.toFixed(this.An).replace(/\.?0+$/,""):String(a)).replace(/(\.[1-9]*)0+$/,function(a,b){return b})},a}();function ao(a,b,c,d){if(0!==b.length){var e=b[d.from].tt,f=b[d.from].it;a.moveTo(e,f);for(var g=d.from+1;g<d.to;++g){var h=b[g];if(1===c){var i=b[g-1].it,j=h.tt;a.lineTo(j,i)}a.lineTo(h.tt,h.it)}}}var ap=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.X=null,b}return v(b,a),b.prototype.Z=function(a){this.X=a},b.prototype.Y=function(a){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J){if(a.lineCap="butt",a.lineJoin="round",a.lineWidth=this.X.Vt,f(a,this.X.Pt),a.lineWidth=1,a.beginPath(),1===this.X.G.length){var b=this.X.G[0],c=this.X.Ln/2;a.moveTo(b.tt-c,this.X.En),a.lineTo(b.tt-c,b.it),a.lineTo(b.tt+c,b.it),a.lineTo(b.tt+c,this.X.En)}else a.moveTo(this.X.G[this.X.J.from].tt,this.X.En),a.lineTo(this.X.G[this.X.J.from].tt,this.X.G[this.X.J.from].it),ao(a,this.X.G,this.X.Fn,this.X.J),this.X.J.to>this.X.J.from&&(a.lineTo(this.X.G[this.X.J.to-1].tt,this.X.En),a.lineTo(this.X.G[this.X.J.from].tt,this.X.En));a.closePath(),a.fillStyle=this.On(a),a.fill()}},b}(L),aq=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return v(b,a),b.prototype.On=function(a){var b=this.X,c=a.createLinearGradient(0,0,0,b.Vn);return c.addColorStop(0,b.Pn),c.addColorStop(1,b.Wn),c},b}(ap),ar=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.X=null,b}return v(b,a),b.prototype.Z=function(a){this.X=a},b.prototype.Y=function(a){if(null!==this.X&&0!==this.X.G.length&&null!==this.X.J){if(a.lineCap="butt",a.lineWidth=this.X.Vt,f(a,this.X.Pt),a.strokeStyle=this.zn(a),a.lineJoin="round",1===this.X.G.length){a.beginPath();var b=this.X.G[0];a.moveTo(b.tt-this.X.Ln/2,b.it),a.lineTo(b.tt+this.X.Ln/2,b.it),void 0!==b.A&&(a.strokeStyle=b.A),a.stroke()}else this.Rn(a,this.X)}},b.prototype.Rn=function(a,b){a.beginPath(),ao(a,b.G,b.Fn,b.J),a.stroke()},b}(L),as=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return v(b,a),b.prototype.Rn=function(a,b){var c,d,e=b.G,f=b.J,g=b.Fn,h=b.ht;if(0!==e.length&&null!==f){a.beginPath();var i=e[f.from];a.moveTo(i.tt,i.it);var j=null!==(c=i.A)&& void 0!==c?c:h;a.strokeStyle=j;for(var k=function(b){a.stroke(),a.beginPath(),a.strokeStyle=b,j=b},l=f.from+1;l<f.to;++l){var m=e[l],n=e[l-1],o=null!==(d=m.A)&& void 0!==d?d:h;1===g&&(a.lineTo(m.tt,n.it),o!==j&&(k(o),a.moveTo(m.tt,n.it))),a.lineTo(m.tt,m.it),1!==g&&o!==j&&(k(o),a.moveTo(m.tt,m.it))}a.stroke()}},b.prototype.zn=function(){return this.X.ht},b}(ar);function at(a,b,c,d,e){void 0===d&&(d=0),void 0===e&&(e=a.length);for(var f=e-d;0<f;){var g=f>>1,h=d+g;c(a[h],b)?(d=h+1,f-=g+1):f=g}return d}function au(a,b,c,d,e){void 0===d&&(d=0),void 0===e&&(e=a.length);for(var f=e-d;0<f;){var g=f>>1,h=d+g;c(b,a[h])?f=g:(d=h+1,f-=g+1)}return d}function av(a,b){return a.rt<b}function aw(a,b){return a<b.rt}function ax(a,b,c){var d=b.In(),e=b.jn(),f=at(a,d,av),g=au(a,e,aw);if(!c)return{from:f,to:g};var h=f,i=g;return f>0&&f<a.length&&a[f].rt>=d&&(h=f-1),g>0&&g<a.length&&a[g-1].rt<=e&&(i=g+1),{from:h,to:i}}var ay=function(){function a(a,b,c){this.qn=!0,this.Un=!0,this.Hn=!0,this.Yn=[],this.$n=null,this.Kn=a,this.Xn=b,this.Zn=c}return a.prototype.vt=function(a){this.qn=!0,"data"===a&&(this.Un=!0),"options"===a&&(this.Hn=!0)},a.prototype.Jn=function(){this.Un&&(this.Gn(),this.Un=!1),this.qn&&(this.Qn(),this.qn=!1),this.Hn&&(this.ts(),this.Hn=!1)},a.prototype.ns=function(){this.$n=null},a.prototype.Qn=function(){var a=this.Kn.Ct(),b=this.Xn.bt();if(this.ns(),!b.wi()&&!a.wi()){var c=b.ss();if(null!==c&&0!==this.Kn.an().hs()){var d=this.Kn.kt();null!==d&&(this.$n=ax(this.Yn,c,this.Zn),this.rs(a,b,d.St))}}},a}(),az=function(a){function b(b,c){return a.call(this,b,c,!0)||this}return v(b,a),b.prototype.rs=function(a,b,c){b.es(this.Yn,G(this.$n)),a.us(this.Yn,c,G(this.$n))},b.prototype.os=function(a,b){return{rt:a,et:b,tt:NaN,it:NaN}},b.prototype.ts=function(){},b.prototype.Gn=function(){var a=this,b=this.Kn.ls();this.Yn=this.Kn.an().fs().map(function(c){var d=c.St[3];return a.cs(c.vs,d,b)})},b}(ay),aA=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.zt=new K,d._s=new aq,d.ds=new as,d.zt.U([d._s,d.ds]),d}return v(b,a),b.prototype.dt=function(a,b){if(!this.Kn.yt())return null;var c=this.Kn.W();return this.Jn(),this._s.Z({Fn:c.lineType,G:this.Yn,Pt:c.lineStyle,Vt:c.lineWidth,Pn:c.topColor,Wn:c.bottomColor,En:a,Vn:a,J:this.$n,Ln:this.Xn.bt().ws()}),this.ds.Z({Fn:c.lineType,G:this.Yn,ht:c.lineColor,Pt:c.lineStyle,Vt:c.lineWidth,J:this.$n,Ln:this.Xn.bt().ws()}),this.zt},b.prototype.cs=function(a,b){return this.os(a,b)},b}(az),aB=function(){function a(){this.Bt=null,this.Ms=0,this.bs=0}return a.prototype.Z=function(a){this.Bt=a},a.prototype.H=function(a,b,c,d){if(null!==this.Bt&&0!==this.Bt.an.length&&null!==this.Bt.J){this.Ms=this.ps(b),this.Ms>=2&&Math.max(1,Math.floor(b))%2!=this.Ms%2&&this.Ms--,this.bs=this.Bt.gs?Math.min(this.Ms,Math.floor(b)):this.Ms;for(var e=null,f=this.bs<=this.Ms&&this.Bt.ws>=Math.floor(1.5*b),g=this.Bt.J.from;g<this.Bt.J.to;++g){var h=this.Bt.an[g];e!==h.A&&(a.fillStyle=h.A,e=h.A);var i=Math.floor(.5*this.bs),j=Math.round(h.tt*b),k=j-i,l=this.bs,m=k+l-1,n=Math.min(h.ys,h.ks),o=Math.max(h.ys,h.ks),p=Math.round(n*b)-i,q=Math.round(o*b)+i,r=Math.max(q-p,this.bs);a.fillRect(k,p,l,r);var s=Math.ceil(1.5*this.Ms);if(f){if(this.Bt.Ns){var t=j-s,u=Math.max(p,Math.round(h.xs*b)-i),v=u+l-1;v>p+r-1&&(u=(v=p+r-1)-l+1),a.fillRect(t,u,k-t,v-u+1)}var w=j+s,x=Math.max(p,Math.round(h.Cs*b)-i),y=x+l-1;y>p+r-1&&(x=(y=p+r-1)-l+1),a.fillRect(m+1,x,w-m,y-x+1)}}}},a.prototype.ps=function(a){var b,c;return Math.max(Math.floor(a),Math.floor((b=j(this.Bt).ws,Math.floor(.3*b*(c=a)))))},a}(),aC=function(a){function b(b,c){return a.call(this,b,c,!1)||this}return v(b,a),b.prototype.rs=function(a,b,c){b.es(this.Yn,G(this.$n)),a.Ss(this.Yn,c,G(this.$n))},b.prototype.Ts=function(a,b,c){return{rt:a,open:b.St[0],high:b.St[1],low:b.St[2],close:b.St[3],tt:NaN,xs:NaN,ys:NaN,ks:NaN,Cs:NaN}},b.prototype.Gn=function(){var a=this,b=this.Kn.ls();this.Yn=this.Kn.an().fs().map(function(c){return a.cs(c.vs,c,b)})},b}(ay),aD=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.zt=new aB,b}return v(b,a),b.prototype.dt=function(a,b){if(!this.Kn.yt())return null;var c=this.Kn.W();this.Jn();var d={an:this.Yn,ws:this.Xn.bt().ws(),Ns:c.openVisible,gs:c.thinBars,J:this.$n};return this.zt.Z(d),this.zt},b.prototype.ts=function(){var a=this;this.Yn.forEach(function(b){b.A=a.Kn.ls().As(b.rt).Ds})},b.prototype.cs=function(a,b,c){return w(w({},this.Ts(a,b,c)),{A:c.As(a).Ds})},b}(aC);function aE(a,b,c){return Math.min(Math.max(a,b),c)}function aF(a){return a<=0?NaN:Math.log(a)/Math.log(10)}function aG(a){var b=Math.ceil(a);return b%2!=0?b-1:b}function aH(a){var b=Math.ceil(a);return b%2==0?b-1:b}var aI=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return v(b,a),b.prototype.On=function(a){var b=this.X,c=a.createLinearGradient(0,0,0,b.Vn),d=aE(b.En/b.Vn,0,1);return c.addColorStop(0,b.Bs),c.addColorStop(d,b.Ls),c.addColorStop(d,b.Es),c.addColorStop(1,b.Fs),c},b}(ap),aJ=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return v(b,a),b.prototype.zn=function(a){var b=this.X,c=a.createLinearGradient(0,0,0,b.Vn),d=aE(b.En/b.Vn,0,1);return c.addColorStop(0,b.Pn),c.addColorStop(d,b.Pn),c.addColorStop(d,b.Wn),c.addColorStop(1,b.Wn),c},b}(ar),aK=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.Os=new aI,d.Vs=new aJ,d.ut=new K,d.ut.U([d.Os,d.Vs]),d}return v(b,a),b.prototype.dt=function(a,b){if(!this.Kn.yt())return null;var c=this.Kn.kt();if(null===c)return null;var d=this.Kn.W();this.Jn();var e=this.Kn.Ct().xt(d.baseValue.price,c.St),f=this.Xn.bt().ws();return this.Os.Z({G:this.Yn,Bs:d.topFillColor1,Ls:d.topFillColor2,Es:d.bottomFillColor1,Fs:d.bottomFillColor2,Vt:d.lineWidth,Pt:d.lineStyle,Fn:0,En:e,Vn:a,J:this.$n,Ln:f}),this.Vs.Z({G:this.Yn,Pn:d.topLineColor,Wn:d.bottomLineColor,Vt:d.lineWidth,Pt:d.lineStyle,Fn:0,En:e,Vn:a,J:this.$n,Ln:f}),this.ut},b.prototype.cs=function(a,b){return this.os(a,b)},b}(az),aL=function(){function a(){this.Bt=null,this.Ms=0}return a.prototype.Z=function(a){this.Bt=a},a.prototype.H=function(a,b,c,d){if(null!==this.Bt&&0!==this.Bt.an.length&&null!==this.Bt.J){this.Ms=function(a,b){if(a>=2.5&&a<=4)return Math.floor(3*b);var c=1-.2*Math.atan(Math.max(4,a)-4)/(.5*Math.PI),d=Math.floor(a*c*b),e=Math.floor(a*b),f=Math.min(d,e);return Math.max(Math.floor(b),f)}(this.Bt.ws,b),this.Ms>=2&&Math.floor(b)%2!=this.Ms%2&&this.Ms--;var e=this.Bt.an;this.Bt.Ps&&this.Ws(a,e,this.Bt.J,b),this.Bt.zs&&this.Rs(a,e,this.Bt.J,this.Bt.ws,b);var f=this.Is(b);(!this.Bt.zs||this.Ms>2*f)&&this.js(a,e,this.Bt.J,b)}},a.prototype.Ws=function(a,b,c,d){if(null!==this.Bt){var e="",f=Math.min(Math.floor(d),Math.floor(this.Bt.ws*d));f=Math.max(Math.floor(d),Math.min(f,this.Ms));for(var g=Math.floor(.5*f),h=null,i=c.from;i<c.to;i++){var j=b[i];j.qs!==e&&(a.fillStyle=j.qs,e=j.qs);var k=Math.round(Math.min(j.xs,j.Cs)*d),l=Math.round(Math.max(j.xs,j.Cs)*d),m=Math.round(j.ys*d),n=Math.round(j.ks*d),o=Math.round(d*j.tt)-g,p=o+f-1;null!==h&&(o=Math.max(h+1,o),o=Math.min(o,p));var q=p-o+1;a.fillRect(o,m,q,k-m),a.fillRect(o,l+1,q,n-l),h=p}}},a.prototype.Is=function(a){var b=Math.floor(1*a);this.Ms<=2*b&&(b=Math.floor(.5*(this.Ms-1)));var c=Math.max(Math.floor(a),b);return this.Ms<=2*c?Math.max(Math.floor(a),Math.floor(1*a)):c},a.prototype.Rs=function(a,b,c,d,e){if(null!==this.Bt)for(var f="",g=this.Is(e),h=null,i=c.from;i<c.to;i++){var j=b[i];j.Tt!==f&&(a.fillStyle=j.Tt,f=j.Tt);var k=Math.round(j.tt*e)-Math.floor(.5*this.Ms),l=k+this.Ms-1,m=Math.round(Math.min(j.xs,j.Cs)*e),n=Math.round(Math.max(j.xs,j.Cs)*e);if(null!==h&&(k=Math.max(h+1,k),k=Math.min(k,l)),this.Bt.ws*e>2*g)S(a,k,m,l-k+1,n-m+1,g);else{var o=l-k+1;a.fillRect(k,m,o,n-m+1)}h=l}},a.prototype.js=function(a,b,c,d){if(null!==this.Bt)for(var e="",f=this.Is(d),g=c.from;g<c.to;g++){var h=b[g],i=Math.round(Math.min(h.xs,h.Cs)*d),j=Math.round(Math.max(h.xs,h.Cs)*d),k=Math.round(h.tt*d)-Math.floor(.5*this.Ms),l=k+this.Ms-1;if(h.A!==e){var m=h.A;a.fillStyle=m,e=m}this.Bt.zs&&(k+=f,i+=f,l-=f,j-=f),i>j||a.fillRect(k,i,l-k+1,j-i+1)}},a}(),aM=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.zt=new aL,b}return v(b,a),b.prototype.dt=function(a,b){if(!this.Kn.yt())return null;var c=this.Kn.W();this.Jn();var d={an:this.Yn,ws:this.Xn.bt().ws(),Ps:c.wickVisible,zs:c.borderVisible,J:this.$n};return this.zt.Z(d),this.zt},b.prototype.ts=function(){var a=this;this.Yn.forEach(function(b){var c=a.Kn.ls().As(b.rt);b.A=c.Ds,b.qs=c.Us,b.Tt=c.Hs})},b.prototype.cs=function(a,b,c){var d=c.As(a);return w(w({},this.Ts(a,b,c)),{A:d.Ds,qs:d.Us,Tt:d.Hs})},b}(aC),aN=function(){function a(){this.Bt=null,this.Ys=[]}return a.prototype.Z=function(a){this.Bt=a,this.Ys=[]},a.prototype.H=function(a,b,c,d){if(null!==this.Bt&&0!==this.Bt.G.length&&null!==this.Bt.J){this.Ys.length||this.$s(b);for(var e=Math.max(1,Math.floor(b)),f=Math.round(this.Bt.Ks*b)-Math.floor(e/2),g=f+e,h=this.Bt.J.from;h<this.Bt.J.to;h++){var i=this.Bt.G[h],j=this.Ys[h-this.Bt.J.from],k=Math.round(i.it*b);a.fillStyle=i.A;var l=void 0,m=void 0;k<=f?(l=k,m=g):(l=f,m=k-Math.floor(e/2)+e),a.fillRect(j.In,l,j.jn-j.In+1,m-l)}}},a.prototype.$s=function(a){if(null!==this.Bt&&0!==this.Bt.G.length&&null!==this.Bt.J){var b=1>=Math.ceil(this.Bt.ws*a)?0:Math.max(1,Math.floor(a)),c=Math.round(this.Bt.ws*a)-b;this.Ys=Array(this.Bt.J.to-this.Bt.J.from);for(var d=this.Bt.J.from;d<this.Bt.J.to;d++){var e,f=this.Bt.G[d],g=Math.round(f.tt*a),h=void 0,i=void 0;c%2?(h=g-(e=(c-1)/2),i=g+e):(h=g-(e=c/2),i=g+e-1),this.Ys[d-this.Bt.J.from]={In:h,jn:i,Xs:g,Zs:f.tt*a,rt:f.rt}}for(d=this.Bt.J.from+1;d<this.Bt.J.to;d++){var j=this.Ys[d-this.Bt.J.from],k=this.Ys[d-this.Bt.J.from-1];j.rt===k.rt+1&&j.In-k.jn!==b+1&&(k.Xs>k.Zs?k.jn=j.In-b-1:j.In=k.jn+b+1)}var l=Math.ceil(this.Bt.ws*a);for(d=this.Bt.J.from;d<this.Bt.J.to;d++){(j=this.Ys[d-this.Bt.J.from]).jn<j.In&&(j.jn=j.In);var m=j.jn-j.In+1;l=Math.min(m,l)}if(b>0&&l<4)for(d=this.Bt.J.from;d<this.Bt.J.to;d++)(m=(j=this.Ys[d-this.Bt.J.from]).jn-j.In+1)>l&&(j.Xs>j.Zs?j.jn-=1:j.In+=1)}else this.Ys=[]},a}();function aO(a){return{G:[],ws:a,Ks:NaN,J:null}}function aP(a,b,c){return{rt:a,et:b,tt:NaN,it:NaN,A:c}}var aQ=function(a){function b(b,c){var d=a.call(this,b,c,!1)||this;return d.ut=new K,d.Js=aO(0),d.zt=new aN,d}return v(b,a),b.prototype.dt=function(a,b){return this.Kn.yt()?(this.Jn(),this.ut):null},b.prototype.Gn=function(){var a=this.Xn.bt().ws();this.Js=aO(a);for(var b=0,c=0,d=this.Kn.W().color,e=0,f=this.Kn.an().fs();e<f.length;e++){var g=f[e],h=g.St[3],i=void 0!==g.A?g.A:d,j=aP(g.vs,h,i);++b<this.Js.G.length?this.Js.G[b]=j:this.Js.G.push(j),this.Yn[c++]={rt:g.vs,tt:0}}this.zt.Z(this.Js),this.ut.U([this.zt])},b.prototype.ts=function(){},b.prototype.ns=function(){a.prototype.ns.call(this),this.Js.J=null},b.prototype.rs=function(a,b,c){if(null!==this.$n){var d=b.ws(),e=j(b.ss()),f=a.xt(this.Kn.W().base,c);b.es(this.Js.G),a.us(this.Js.G,c),this.Js.Ks=f,this.Js.J=ax(this.Js.G,e,!1),this.Js.ws=d,this.zt.Z(this.Js)}},b}(ay),aR=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.ds=new as,d}return v(b,a),b.prototype.dt=function(a,b){if(!this.Kn.yt())return null;var c=this.Kn.W();this.Jn();var d={G:this.Yn,ht:c.color,Pt:c.lineStyle,Fn:c.lineType,Vt:c.lineWidth,J:this.$n,Ln:this.Xn.bt().ws()};return this.ds.Z(d),this.ds},b.prototype.ts=function(){var a=this;this.Yn.forEach(function(b){b.A=a.Kn.ls().As(b.rt).Ds})},b.prototype.cs=function(a,b,c){var d=this.os(a,b);return d.A=c.As(a).Ds,d},b}(az),aS=/[2-9]/g,aT=function(){function a(a){void 0===a&&(a=50),this.Gs=new Map,this.Qs=0,this.th=Array.from(Array(a))}return a.prototype.ih=function(){this.Gs.clear(),this.th.fill(void 0)},a.prototype.Qt=function(a,b,c){var d=String(b).replace(c||aS,"0"),e=this.Gs.get(d);if(void 0===e){if(0===(e=a.measureText(d).width)&&0!==b.length)return 0;var f=this.th[this.Qs];void 0!==f&&this.Gs.delete(f),this.th[this.Qs]=d,this.Qs=(this.Qs+1)%this.th.length,this.Gs.set(d,e)}return e},a}(),aU=function(){function a(a){this.nh=null,this.k=null,this.sh="right",this.hh=0,this.rh=a}return a.prototype.eh=function(a,b,c,d){this.nh=a,this.k=b,this.hh=c,this.sh=d},a.prototype.H=function(a,b){null!==this.k&&null!==this.nh&&this.nh.H(a,this.k,this.rh,this.hh,this.sh,b)},a}(),aV=function(){function a(a,b,c){this.uh=a,this.rh=new aT(50),this.ah=b,this.P=c,this.R=-1,this.zt=new aU(this.rh)}return a.prototype.dt=function(a,b){var c=this.P.oh(this.ah);if(null===c)return null;var d=c.lh(this.ah)?c.fh():this.ah.Ct();if(null===d)return null;var e=c._h(d);if("overlay"===e)return null;var f=this.P.dh();return f.S!==this.R&&(this.R=f.S,this.rh.ih()),this.zt.eh(this.uh.ci(),f,b,e),this.zt},a}(),aW=function(){function a(){this.Bt=null}return a.prototype.Z=function(a){this.Bt=a},a.prototype.H=function(a,b,c,d){if(null!==this.Bt&& !1!==this.Bt.yt){var e=Math.round(this.Bt.it*b);if(!(e<0||e>Math.ceil(this.Bt.Yt*b))){var h=Math.ceil(this.Bt.Ht*b);a.lineCap="butt",a.strokeStyle=this.Bt.A,a.lineWidth=Math.floor(this.Bt.Vt*b),f(a,this.Bt.Pt),g(a,e,0,h)}}},a}(),aX=function(){function a(a){this.wh={Ht:0,Yt:0,it:0,A:"rgba(0, 0, 0, 0)",Vt:1,Pt:0,yt:!1},this.Mh=new aW,this.ft=!0,this.Kn=a,this.Xn=a.jt(),this.Mh.Z(this.wh)}return a.prototype.vt=function(){this.ft=!0},a.prototype.dt=function(a,b){return this.Kn.yt()?(this.ft&&(this.bh(a,b),this.ft=!1),this.Mh):null},a}(),aY=function(a){function b(b){return a.call(this,b)||this}return v(b,a),b.prototype.bh=function(a,b){this.wh.yt=!1;var c=this.Kn.Ct(),d=c.mh().mh;if(2===d||3===d){var e=this.Kn.W();if(e.baseLineVisible&&this.Kn.yt()){var f=this.Kn.kt();null!==f&&(this.wh.yt=!0,this.wh.it=c.xt(f.St,f.St),this.wh.Ht=b,this.wh.Yt=a,this.wh.A=e.baseLineColor,this.wh.Vt=e.baseLineWidth,this.wh.Pt=e.baseLineStyle)}}},b}(aX),aZ=function(){function a(){this.Bt=null}return a.prototype.Z=function(a){this.Bt=a},a.prototype.ph=function(){return this.Bt},a.prototype.H=function(a,b,c,d){var e=this.Bt;if(null!==e){a.save();var f=Math.max(1,Math.floor(b)),g=f%2/2,h=Math.round(e.Zs.x*b)+g,i=e.Zs.y*b;a.fillStyle=e.gh,a.beginPath();var j=Math.max(2,1.5*e.yh)*b;a.arc(h,i,j,0,2*Math.PI,!1),a.fill(),a.fillStyle=e.kh,a.beginPath(),a.arc(h,i,e.st*b,0,2*Math.PI,!1),a.fill(),a.lineWidth=f,a.strokeStyle=e.Nh,a.beginPath(),a.arc(h,i,e.st*b+f/2,0,2*Math.PI,!1),a.stroke(),a.restore()}},a}(),a$=[{xh:0,Ch:.25,Sh:4,Th:10,Dh:.25,Ah:0,Bh:.4,Lh:.8},{xh:.25,Ch:.525,Sh:10,Th:14,Dh:0,Ah:0,Bh:.8,Lh:0},{xh:.525,Ch:1,Sh:14,Th:14,Dh:0,Ah:0,Bh:0,Lh:0}];function a_(a,b,c,d){return function(a,b){if("transparent"===a)return a;var c=s(a),d=c[3];return"rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],", ").concat(b*d,")")}(a,c+(d-c)*b)}function a0(a,b){for(var c,d=a%2600/2600,e=0,f=a$;e<f.length;e++){var g=f[e];if(d>=g.xh&&d<=g.Ch){c=g;break}}h(void 0!==c,"Last price animation internal logic error");var i,j,k,l=(d-c.xh)/(c.Ch-c.xh);return{kh:a_(b,l,c.Dh,c.Ah),Nh:a_(b,l,c.Bh,c.Lh),st:(i=l,j=c.Sh,k=c.Th,j+(k-j)*i)}}var a1=function(){function a(a){this.zt=new aZ,this.ft=!0,this.Eh=!0,this.Fh=performance.now(),this.Oh=this.Fh-1,this.Vh=a}return a.prototype.Ph=function(){this.Oh=this.Fh-1,this.vt()},a.prototype.Wh=function(){if(this.vt(),2===this.Vh.W().lastPriceAnimation){var a=performance.now(),b=this.Oh-a;if(b>0)return void(b<650&&(this.Oh+=2600));this.Fh=a,this.Oh=a+2600}},a.prototype.vt=function(){this.ft=!0},a.prototype.zh=function(){this.Eh=!0},a.prototype.yt=function(){return 0!==this.Vh.W().lastPriceAnimation},a.prototype.Rh=function(){switch(this.Vh.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Oh}},a.prototype.dt=function(a,b){return this.ft?(this.wt(a,b),this.ft=!1,this.Eh=!1):this.Eh&&(this.Ih(),this.Eh=!1),this.zt},a.prototype.wt=function(a,b){this.zt.Z(null);var c=this.Vh.jt().bt(),d=c.ss(),e=this.Vh.kt();if(null!==d&&null!==e){var f=this.Vh.jh(!0);if(!f.qh&&d.Uh(f.vs)){var g={x:c.At(f.vs),y:this.Vh.Ct().xt(f.et,e.St)},h=f.A,i=this.Vh.W().lineWidth,j=a0(this.Hh(),h);this.zt.Z({gh:h,yh:i,kh:j.kh,Nh:j.Nh,st:j.st,Zs:g})}}},a.prototype.Ih=function(){var a=this.zt.ph();if(null!==a){var b=a0(this.Hh(),a.gh);a.kh=b.kh,a.Nh=b.Nh,a.st=b.st}},a.prototype.Hh=function(){return this.Rh()?performance.now()-this.Fh:2599},a}();function a2(a,b){return aH(Math.min(Math.max(a,12),30)*b)}function a3(a,b){switch(a){case"arrowDown":case"arrowUp":return a2(b,1);case"circle":return a2(b,.8);case"square":return a2(b,.7)}}function a4(a){return aG(a2(a,1))}function a5(a){return Math.max(a2(a,.1),3)}function a6(a,b,c,d,e){var f=a3("square",c),g=(f-1)/2,h=a-g,i=b-g;return d>=h&&d<=h+f&&e>=i&&e<=i+f}function a7(a,b,c,d,e){var f=(a3("arrowUp",e)-1)/2,g=(aH(e/2)-1)/2;b.beginPath(),a?(b.moveTo(c-f,d),b.lineTo(c,d-f),b.lineTo(c+f,d),b.lineTo(c+g,d),b.lineTo(c+g,d+f),b.lineTo(c-g,d+f),b.lineTo(c-g,d)):(b.moveTo(c-f,d),b.lineTo(c,d+f),b.lineTo(c+f,d),b.lineTo(c+g,d),b.lineTo(c+g,d-f),b.lineTo(c-g,d-f),b.lineTo(c-g,d)),b.fill()}var a8=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.Bt=null,b.rh=new aT,b.R=-1,b.I="",b.Yh="",b}return v(b,a),b.prototype.Z=function(a){this.Bt=a},b.prototype.eh=function(a,b){this.R===a&&this.I===b||(this.R=a,this.I=b,this.Yh=I(a,b),this.rh.ih())},b.prototype.$h=function(a,b){if(null===this.Bt||null===this.Bt.J)return null;for(var c=this.Bt.J.from;c<this.Bt.J.to;c++){var d=this.Bt.G[c];if(ba(d,a,b))return{Kh:d.Xh,Zh:d.Zh}}return null},b.prototype.Y=function(a,b,c){if(null!==this.Bt&&null!==this.Bt.J){a.textBaseline="middle",a.font=this.Yh;for(var d=this.Bt.J.from;d<this.Bt.J.to;d++){var e=this.Bt.G[d];void 0!==e.Gt&&(e.Gt.Ht=this.rh.Qt(a,e.Gt.Jh),e.Gt.Yt=this.R),a9(e,a)}}},b}(L);function a9(a,b){b.fillStyle=a.A,void 0!==a.Gt&&function(a,b,c,d){a.fillText(b,c,d)}(b,a.Gt.Jh,a.tt-a.Gt.Ht/2,a.Gt.it),function(a,b){if(0!==a.hs){switch(a.Gh){case"arrowDown":return void a7(!1,b,a.tt,a.it,a.hs);case"arrowUp":return void a7(!0,b,a.tt,a.it,a.hs);case"circle":var c,d,e,f,g;return void(c=b,d=a.tt,e=a.it,f=a.hs,g=(a3("circle",f)-1)/2,c.beginPath(),c.arc(d,e,g,0,2*Math.PI,!1),c.fill());case"square":return void function(a,b,c,d){var e=a3("square",d),f=(e-1)/2,g=b-f,h=c-f;a.fillRect(g,h,e,e)}(b,a.tt,a.it,a.hs)}a.Gh}}(a,b)}function ba(a,b,c){var d,e,f,g,h,i,j;return!(void 0===a.Gt||(d=a.tt,e=a.Gt.it,f=a.Gt.Ht,g=a.Gt.Yt,h=b,i=c,j=g/2,!(h>=d)||!(h<=d+f)||!(i>=e-j)||!(i<=e+j)))||function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(0===a.hs)return!1;switch(a.Gh){case"arrowDown":case"arrowUp":return e=a.tt,f=a.it,g=a.hs,h=b,i=c,a6(e,f,g,h,i);case"circle":return j=a.tt,k=a.it,l=a.hs,m=b,n=c,o=2+a3("circle",l)/2,p=j-m,q=k-n,Math.sqrt(p*p+q*q)<=o;case"square":return a6(a.tt,a.it,a.hs,b,c)}}(a,b,c)}function bb(a,b,c,d,e,f,g,h,i){var j=A(c)?c:c.close,k=A(c)?c:c.high,l=A(c)?c:c.low,m=A(b.size)?Math.max(b.size,0):1,n=a4(h.ws())*m,o=n/2;switch(a.hs=n,b.position){case"inBar":return a.it=g.xt(j,i),void(void 0!==a.Gt&&(a.Gt.it=a.it+o+f+.6*e));case"aboveBar":return a.it=g.xt(k,i)-o-d.Qh,void 0!==a.Gt&&(a.Gt.it=a.it-o-.6*e,d.Qh+=1.2*e),void(d.Qh+=n+f);case"belowBar":return a.it=g.xt(l,i)+o+d.tr,void 0!==a.Gt&&(a.Gt.it=a.it+o+f+.6*e,d.tr+=1.2*e),void(d.tr+=n+f)}b.position}var bc=function(){function a(a,b){this.ft=!0,this.ir=!0,this.nr=!0,this.sr=null,this.zt=new a8,this.Vh=a,this.pi=b,this.Bt={G:[],J:null}}return a.prototype.vt=function(a){this.ft=!0,this.nr=!0,"data"===a&&(this.ir=!0)},a.prototype.dt=function(a,b,c){if(!this.Vh.yt())return null;this.ft&&this.Jn();var d=this.pi.W().layout;return this.zt.eh(d.fontSize,d.fontFamily),this.zt.Z(this.Bt),this.zt},a.prototype.hr=function(){if(this.nr){if(this.Vh.rr().length>0){var a=this.pi.bt().ws(),b=a5(a),c=1.5*a4(a)+2*b;this.sr={above:c,below:c}}else this.sr=null;this.nr=!1}return this.sr},a.prototype.Jn=function(){var a=this.Vh.Ct(),b=this.pi.bt(),c=this.Vh.rr();this.ir&&(this.Bt.G=c.map(function(a){return{rt:a.time,tt:0,it:0,hs:0,Gh:a.shape,A:a.color,Xh:a.Xh,Zh:a.id,Gt:void 0}}),this.ir=!1);var d=this.pi.W().layout;this.Bt.J=null;var e=b.ss();if(null!==e){var f=this.Vh.kt();if(null!==f&&0!==this.Bt.G.length){var g=NaN,h=a5(b.ws()),i={Qh:h,tr:h};this.Bt.J=ax(this.Bt.G,e,!0);for(var j=this.Bt.J.from;j<this.Bt.J.to;j++){var k=c[j];k.time!==g&&(i.Qh=h,i.tr=h,g=k.time);var l=this.Bt.G[j];l.tt=b.At(k.time),void 0!==k.text&&k.text.length>0&&(l.Gt={Jh:k.text,it:0,Ht:0,Yt:0});var m=this.Vh.er(k.time);null!==m&&bb(l,k,m,i,d.fontSize,h,a,b,f.St)}this.ft=!1}}},a}(),bd=function(a){function b(b){return a.call(this,b)||this}return v(b,a),b.prototype.bh=function(a,b){var c=this.wh;c.yt=!1;var d=this.Kn.W();if(d.priceLineVisible&&this.Kn.yt()){var e=this.Kn.jh(0===d.priceLineSource);e.qh||(c.yt=!0,c.it=e.ti,c.A=this.Kn.ur(e.A),c.Ht=b,c.Yt=a,c.Vt=d.priceLineWidth,c.Pt=d.priceLineStyle)}},b}(aX),be=function(a){function b(b){var c=a.call(this)||this;return c.Rt=b,c}return v(b,a),b.prototype.vi=function(a,b,c){a.yt=!1,b.yt=!1;var d=this.Rt;if(d.yt()){var e=d.W(),f=e.lastValueVisible,g=""!==d.ar(),h=0===e.seriesLastValueMode,i=d.jh(!1);if(!i.qh){f&&(a.Gt=this.lr(i,f,h),a.yt=0!==a.Gt.length),(g||h)&&(b.Gt=this.cr(i,f,g,h),b.yt=b.Gt.length>0);var j=d.ur(i.A),k=t(j);c.t=k.t,c.A=k.i,c.ti=i.ti,b.Tt=d.jt().Dt(i.ti/d.Ct().Yt()),a.Tt=j}}},b.prototype.cr=function(a,b,c,d){var e="",f=this.Rt.ar();return c&&0!==f.length&&(e+="".concat(f," ")),b&&d&&(e+=this.Rt.Ct().vr()?a._r:a.dr),e.trim()},b.prototype.lr=function(a,b,c){return b?c?this.Rt.Ct().vr()?a.dr:a._r:a.Gt:""},b}(ab),bf=function(){function a(a,b){this.wr=a,this.Mr=b}return a.prototype.br=function(a){return null!==a&&this.wr===a.wr&&this.Mr===a.Mr},a.prototype.mr=function(){return new a(this.wr,this.Mr)},a.prototype.pr=function(){return this.wr},a.prototype.gr=function(){return this.Mr},a.prototype.yr=function(){return this.Mr-this.wr},a.prototype.wi=function(){return this.Mr===this.wr||Number.isNaN(this.Mr)||Number.isNaN(this.wr)},a.prototype.Nn=function(b){return null===b?this:new a(Math.min(this.pr(),b.pr()),Math.max(this.gr(),b.gr()))},a.prototype.kr=function(a){if(A(a)&&0!=this.Mr-this.wr){var b=.5*(this.Mr+this.wr),c=this.Mr-b,d=this.wr-b;c*=a,d*=a,this.Mr=b+c,this.wr=b+d}},a.prototype.Nr=function(a){A(a)&&(this.Mr+=a,this.wr+=a)},a.prototype.Cr=function(){return{minValue:this.wr,maxValue:this.Mr}},a.Sr=function(b){return null===b?null:new a(b.minValue,b.maxValue)},a}(),bg=function(){function a(a,b){this.Tr=a,this.Dr=b||null}return a.prototype.Ar=function(){return this.Tr},a.prototype.Br=function(){return this.Dr},a.prototype.Cr=function(){return null===this.Tr?null:{priceRange:this.Tr.Cr(),margins:this.Dr||void 0}},a.Sr=function(b){return null===b?null:new a(bf.Sr(b.priceRange),b.margins)},a}(),bh=function(a){function b(b,c){var d=a.call(this,b)||this;return d.Lr=c,d}return v(b,a),b.prototype.bh=function(a,b){var c=this.wh;c.yt=!1;var d=this.Lr.W();if(this.Kn.yt()&&d.lineVisible){var e=this.Lr.Er();null!==e&&(c.yt=!0,c.it=e,c.A=d.color,c.Ht=b,c.Yt=a,c.Vt=d.lineWidth,c.Pt=d.lineStyle)}},b}(aX),bi=function(a){function b(b,c){var d=a.call(this)||this;return d.Vh=b,d.Lr=c,d}return v(b,a),b.prototype.vi=function(a,b,c){a.yt=!1,b.yt=!1;var d=this.Lr.W(),e=d.axisLabelVisible,f=""!==d.title,g=this.Vh;if(e&&g.yt()){var h=this.Lr.Er();if(null!==h){f&&(b.Gt=d.title,b.yt=!0),b.Tt=g.jt().Dt(h/g.Ct().Yt()),a.Gt=g.Ct().Fr(d.price),a.yt=!0;var i=t(d.color);c.t=i.t,c.A=i.i,c.ti=h}}},b}(ab),bj=function(){function a(a,b){this.Vh=a,this.zi=b,this.Or=new bh(a,this),this.uh=new bi(a,this),this.Vr=new aV(this.uh,a,a.jt())}return a.prototype.Pr=function(a){z(this.zi,a),this.vt(),this.Vh.jt().Wr()},a.prototype.W=function(){return this.zi},a.prototype.tn=function(){return[this.Or,this.Vr]},a.prototype.zr=function(){return this.uh},a.prototype.vt=function(){this.Or.vt(),this.uh.vt()},a.prototype.Er=function(){var a=this.Vh,b=a.Ct();if(a.jt().bt().wi()||b.wi())return null;var c=a.kt();return null===c?null:b.xt(this.zi.price,c.St)},a}(),bk=function(a){function b(b){var c=a.call(this)||this;return c.pi=b,c}return v(b,a),b.prototype.jt=function(){return this.pi},b}(ag),bl={Ds:"",Hs:"",Us:""},bm=function(){function a(a){this.Vh=a}return a.prototype.As=function(a,b){var c=this.Vh.Rr(),d=this.Vh.W();switch(c){case"Line":return this.Ir(d,a,b);case"Area":return this.jr(d);case"Baseline":return this.qr(d,a,b);case"Bar":return this.Ur(d,a,b);case"Candlestick":return this.Hr(d,a,b);case"Histogram":return this.Yr(d,a,b)}throw Error("Unknown chart style")},a.prototype.Ur=function(a,b,c){var d=w({},bl),e=a.upColor,f=a.downColor,g=j(this.$r(b,c)),h=k(g.St[0])<=k(g.St[3]);return void 0!==g.A?(d.Ds=g.A,d.Hs=g.A):(d.Ds=h?e:f,d.Hs=h?e:f),d},a.prototype.Hr=function(a,b,c){var d,e,f,g=w({},bl),h=a.upColor,i=a.downColor,l=a.borderUpColor,m=a.borderDownColor,n=a.wickUpColor,o=a.wickDownColor,p=j(this.$r(b,c)),q=k(p.St[0])<=k(p.St[3]);return g.Ds=null!==(d=p.A)&& void 0!==d?d:q?h:i,g.Hs=null!==(e=p.Tt)&& void 0!==e?e:q?l:m,g.Us=null!==(f=p.qs)&& void 0!==f?f:q?n:o,g},a.prototype.jr=function(a){return w(w({},bl),{Ds:a.lineColor})},a.prototype.qr=function(a,b,c){var d=j(this.$r(b,c)).St[3]>=a.baseValue.price;return w(w({},bl),{Ds:d?a.topLineColor:a.bottomLineColor})},a.prototype.Ir=function(a,b,c){var d,e=j(this.$r(b,c));return w(w({},bl),{Ds:null!==(d=e.A)&& void 0!==d?d:a.color})},a.prototype.Yr=function(a,b,c){var d=w({},bl),e=j(this.$r(b,c));return d.Ds=void 0!==e.A?e.A:a.color,d},a.prototype.$r=function(a,b){return void 0!==b?b.St:this.Vh.an().Kr(a)},a}(),bn=function(){function a(){this.Xr=[],this.Zr=new Map,this.Jr=new Map}return a.prototype.Gr=function(){return this.hs()>0?this.Xr[this.Xr.length-1]:null},a.prototype.Qr=function(){return this.hs()>0?this.te(0):null},a.prototype.un=function(){return this.hs()>0?this.te(this.Xr.length-1):null},a.prototype.hs=function(){return this.Xr.length},a.prototype.wi=function(){return 0===this.hs()},a.prototype.Uh=function(a){return null!==this.ie(a,0)},a.prototype.Kr=function(a){return this.ne(a)},a.prototype.ne=function(a,b){void 0===b&&(b=0);var c=this.ie(a,b);return null===c?null:w(w({},this.se(c)),{vs:this.te(c)})},a.prototype.fs=function(){return this.Xr},a.prototype.he=function(a,b,c){if(this.wi())return null;for(var d=null,e=0,f=c;e<f.length;e++){var g=f[e];d=bo(d,this.re(a,b,g))}return d},a.prototype.Z=function(a){this.Jr.clear(),this.Zr.clear(),this.Xr=a},a.prototype.te=function(a){return this.Xr[a].vs},a.prototype.se=function(a){return this.Xr[a]},a.prototype.ie=function(a,b){var c=this.ee(a);if(null===c&&0!==b)switch(b){case -1:return this.ue(a);case 1:return this.ae(a);default:throw TypeError("Unknown search mode")}return c},a.prototype.ue=function(a){var b=this.oe(a);return b>0&&(b-=1),b!==this.Xr.length&&this.te(b)<a?b:null},a.prototype.ae=function(a){var b=this.le(a);return b!==this.Xr.length&&a<this.te(b)?b:null},a.prototype.ee=function(a){var b=this.oe(a);return b===this.Xr.length||a<this.Xr[b].vs?null:b},a.prototype.oe=function(a){return at(this.Xr,a,function(a,b){return a.vs<b})},a.prototype.le=function(a){return au(this.Xr,a,function(a,b){return b.vs>a})},a.prototype.fe=function(a,b,c){for(var d=null,e=a;e<b;e++){var f=this.Xr[e].St[c];Number.isNaN(f)||(null===d?d={ce:f,ve:f}:(f<d.ce&&(d.ce=f),f>d.ve&&(d.ve=f)))}return d},a.prototype.re=function(a,b,c){if(this.wi())return null;var d=null,e=j(this.Qr()),f=j(this.un()),g=Math.max(a,e),h=Math.min(b,f),i=30*Math.ceil(g/30),k=Math.max(i,30*Math.floor(h/30)),l=this.oe(g),m=this.le(Math.min(h,i,b));d=bo(d,this.fe(l,m,c));var n=this.Zr.get(c);void 0===n&&(n=new Map,this.Zr.set(c,n));for(var o=Math.max(i+1,g);o<k;o+=30){var p=Math.floor(o/30),q=n.get(p);if(void 0===q){var r=this.oe(30*p),s=this.le(30*(p+1)-1);q=this.fe(r,s,c),n.set(p,q)}d=bo(d,q)}return l=this.oe(k),m=this.le(h),bo(d,this.fe(l,m,c))},a}();function bo(a,b){return null===a?b:null===b?a:{ce:Math.min(a.ce,b.ce),ve:Math.max(a.ve,b.ve)}}var bp=function(a){function b(b,c,d){var e=a.call(this,b)||this;e.Bt=new bn,e.Or=new bd(e),e._e=[],e.de=new aY(e),e.we=null,e.Me=null,e.be=[],e.me=[],e.pe=null,e.zi=c,e.ge=d;var f=new be(e);return e.Ei=[f],e.Vr=new aV(f,e,b),"Area"!==d&&"Line"!==d&&"Baseline"!==d||(e.we=new a1(e)),e.ye(),e.ke(),e}return v(b,a),b.prototype.g=function(){null!==this.pe&&clearTimeout(this.pe)},b.prototype.ur=function(a){return this.zi.priceLineColor||a},b.prototype.jh=function(a){var b={qh:!0},c=this.Ct();if(this.jt().bt().wi()||c.wi()||this.Bt.wi())return b;var d,e,f=this.jt().bt().ss(),g=this.kt();if(null===f||null===g)return b;if(a){var h=this.Bt.Gr();if(null===h)return b;d=h,e=h.vs}else{var i=this.Bt.ne(f.jn(),-1);if(null===i||null===(d=this.Bt.Kr(i.vs)))return b;e=i.vs}var j=d.St[3],k=this.ls().As(e,{St:d}),l=c.xt(j,g.St);return{qh:!1,et:j,Gt:c.Mi(j,g.St),_r:c.Fr(j),dr:c.Ne(j,g.St),A:k.Ds,ti:l,vs:e}},b.prototype.ls=function(){return null!==this.Me||(this.Me=new bm(this)),this.Me},b.prototype.W=function(){return this.zi},b.prototype.Pr=function(a){var b=a.priceScaleId;void 0!==b&&b!==this.zi.priceScaleId&&this.jt().xe(this,b),z(this.zi,a),null!==this.ki&& void 0!==a.scaleMargins&&this.ki.Pr({scaleMargins:a.scaleMargins}),void 0!==a.priceFormat&&(this.ye(),this.jt().Ce()),this.jt().Se(this),this.jt().Te(),this.Hi.vt("options")},b.prototype.Z=function(a,b){this.Bt.Z(a),this.De(),this.Hi.vt("data"),this.Ri.vt("data"),null!==this.we&&(b&&b.Ae?this.we.Wh():0===a.length&&this.we.Ph());var c=this.jt().oh(this);this.jt().Be(c),this.jt().Se(this),this.jt().Te(),this.jt().Wr()},b.prototype.Le=function(a){this.be=a.map(function(a){return w({},a)}),this.De();var b=this.jt().oh(this);this.Ri.vt("data"),this.jt().Be(b),this.jt().Se(this),this.jt().Te(),this.jt().Wr()},b.prototype.rr=function(){return this.me},b.prototype.Ee=function(a){var b=new bj(this,a);return this._e.push(b),this.jt().Se(this),b},b.prototype.Fe=function(a){var b=this._e.indexOf(a);-1!==b&&this._e.splice(b,1),this.jt().Se(this)},b.prototype.Rr=function(){return this.ge},b.prototype.kt=function(){var a=this.Oe();return null===a?null:{St:a.St[3],Ve:a.rt}},b.prototype.Oe=function(){var a=this.jt().bt().ss();if(null===a)return null;var b=a.In();return this.Bt.ne(b,1)},b.prototype.an=function(){return this.Bt},b.prototype.er=function(a){var b=this.Bt.Kr(a);return null===b?null:"Bar"===this.ge||"Candlestick"===this.ge?{open:b.St[0],high:b.St[1],low:b.St[2],close:b.St[3]}:b.St[3]},b.prototype.Pe=function(a){var b=this,c=this.we;return null!==c&&c.yt()?(null===this.pe&&c.Rh()&&(this.pe=setTimeout(function(){b.pe=null,b.jt().We()},0)),c.zh(),[c]):[]},b.prototype.tn=function(){var a=[];this.ze()||a.push(this.de);for(var b=0,c=this._e;b<c.length;b++){var d=c[b];a.push.apply(a,d.tn())}return a.push(this.Hi,this.Or,this.Vr,this.Ri),a},b.prototype.nn=function(a,b){if(b!==this.ki&&!this.ze())return[];for(var c=x([],this.Ei,!0),d=0,e=this._e;d<e.length;d++){var f=e[d];c.push(f.zr())}return c},b.prototype.Re=function(a,b){var c=this;if(void 0!==this.zi.autoscaleInfoProvider){var d=this.zi.autoscaleInfoProvider(function(){var d=c.Ie(a,b);return null===d?null:d.Cr()});return bg.Sr(d)}return this.Ie(a,b)},b.prototype.je=function(){return this.zi.priceFormat.minMove},b.prototype.qe=function(){return this.Ue},b.prototype.hn=function(){var a;this.Hi.vt(),this.Ri.vt();for(var b=0,c=this.Ei;b<c.length;b++)c[b].vt();for(var d=0,e=this._e;d<e.length;d++)e[d].vt();this.Or.vt(),this.de.vt(),null===(a=this.we)|| void 0===a||a.vt()},b.prototype.Ct=function(){return j(a.prototype.Ct.call(this))},b.prototype.gt=function(a){if(!(("Line"===this.ge||"Area"===this.ge||"Baseline"===this.ge)&&this.zi.crosshairMarkerVisible))return null;var b=this.Bt.Kr(a);return null===b?null:{et:b.St[3],st:this.He(),Tt:this.Ye(),Nt:this.$e(a)}},b.prototype.ar=function(){return this.zi.title},b.prototype.yt=function(){return this.zi.visible},b.prototype.ze=function(){return!ai(this.Ct().Ke())},b.prototype.Ie=function(a,b){if(!B(a)||!B(b)||this.Bt.wi())return null;var c="Line"===this.ge||"Area"===this.ge||"Baseline"===this.ge||"Histogram"===this.ge?[3]:[2,1],d=this.Bt.he(a,b,c),e=null!==d?new bf(d.ce,d.ve):null;if("Histogram"===this.Rr()){var f=this.zi.base,g=new bf(f,f);e=null!==e?e.Nn(g):g}return new bg(e,this.Ri.hr())},b.prototype.He=function(){switch(this.ge){case"Line":case"Area":case"Baseline":return this.zi.crosshairMarkerRadius}return 0},b.prototype.Ye=function(){switch(this.ge){case"Line":case"Area":case"Baseline":var a=this.zi.crosshairMarkerBorderColor;if(0!==a.length)return a}return null},b.prototype.$e=function(a){switch(this.ge){case"Line":case"Area":case"Baseline":var b=this.zi.crosshairMarkerBackgroundColor;if(0!==b.length)return b}return this.ls().As(a).Ds},b.prototype.ye=function(){switch(this.zi.priceFormat.type){case"custom":this.Ue={format:this.zi.priceFormat.formatter};break;case"volume":this.Ue=new an(this.zi.priceFormat.precision);break;case"percent":this.Ue=new am(this.zi.priceFormat.precision);break;default:var a=Math.pow(10,this.zi.priceFormat.precision);this.Ue=new al(a,this.zi.priceFormat.minMove*a)}null!==this.ki&&this.ki.Xe()},b.prototype.De=function(){var a=this,b=this.jt().bt();if(b.wi()||0===this.Bt.hs())this.me=[];else{var c=j(this.Bt.Qr());this.me=this.be.map(function(d,e){var f=j(b.Ze(d.time,!0)),g=f<c?1:-1;return{time:j(a.Bt.ne(f,g)).vs,position:d.position,shape:d.shape,color:d.color,id:d.id,Xh:e,text:d.text,size:d.size}})}},b.prototype.ke=function(){switch(this.Ri=new bc(this,this.jt()),this.ge){case"Bar":this.Hi=new aD(this,this.jt());break;case"Candlestick":this.Hi=new aM(this,this.jt());break;case"Line":this.Hi=new aR(this,this.jt());break;case"Area":this.Hi=new aA(this,this.jt());break;case"Baseline":this.Hi=new aK(this,this.jt());break;case"Histogram":this.Hi=new aQ(this,this.jt());break;default:throw Error("Unknown chart style assigned: "+this.ge)}},b}(bk),bq=function(){function a(a){this.zi=a}return a.prototype.Je=function(a,b,c){var d=a;if(0===this.zi.mode)return d;var e=c.ji(),f=e.kt();if(null===f)return d;var g=e.xt(a,f),h=c.Ge().filter(function(a){return a instanceof bp}).reduce(function(a,d){if(c.lh(d)||!d.yt())return a;var e=d.Ct(),f=d.an();if(e.wi()||!f.Uh(b))return a;var g=f.Kr(b);if(null===g)return a;var h=k(d.kt());return a.concat([e.xt(g.St[3],h.St)])},[]);if(0===h.length)return d;h.sort(function(a,b){return Math.abs(a-g)-Math.abs(b-g)});var i=h[0];return e.qi(i,f)},a}(),br=function(){function a(){this.Bt=null}return a.prototype.Z=function(a){this.Bt=a},a.prototype.H=function(a,b,c,d){var e=this;if(null!==this.Bt){var g=Math.max(1,Math.floor(b));a.lineWidth=g;var h=Math.ceil(this.Bt.Ot*b),i=Math.ceil(this.Bt.Ft*b);!function(a,b){a.save(),a.lineWidth%2&&a.translate(.5,.5),b(),a.restore()}(a,function(){var c=j(e.Bt);if(c.Qe){a.strokeStyle=c.tu,f(a,c.iu),a.beginPath();for(var d=0,k=c.nu;d<k.length;d++){var l=Math.round(k[d].su*b);a.moveTo(l,-g),a.lineTo(l,h+g)}a.stroke()}if(c.hu){a.strokeStyle=c.ru,f(a,c.eu),a.beginPath();for(var m=0,n=c.uu;m<n.length;m++){var o=Math.round(n[m].su*b);a.moveTo(-g,o),a.lineTo(i+g,o)}a.stroke()}})}},a}(),bs=function(){function a(a){this.zt=new br,this.ft=!0,this.Di=a}return a.prototype.vt=function(){this.ft=!0},a.prototype.dt=function(a,b){if(this.ft){var c=this.Di.jt().W().grid,d={Ot:a,Ft:b,hu:c.horzLines.visible,Qe:c.vertLines.visible,ru:c.horzLines.color,tu:c.vertLines.color,eu:c.horzLines.style,iu:c.vertLines.style,uu:this.Di.ji().au(),nu:this.Di.jt().bt().au()||[]};this.zt.Z(d),this.ft=!1}return this.zt},a}(),bt=function(){function a(a){this.Hi=new bs(a)}return a.prototype.ou=function(){return this.Hi},a}(),bu={lu:4,fu:1e-4};function bv(a,b){var c=100*(a-b)/b;return b<0?-c:c}function bw(a,b){var c=bv(a.pr(),b),d=bv(a.gr(),b);return new bf(c,d)}function bx(a,b){var c=100*(a-b)/b+100;return b<0?-c:c}function by(a,b){var c=bx(a.pr(),b),d=bx(a.gr(),b);return new bf(c,d)}function bz(a,b){var c=Math.abs(a);if(c<1e-15)return 0;var d=aF(c+b.fu)+b.lu;return a<0?-d:d}function bA(a,b){var c=Math.abs(a);if(c<1e-15)return 0;var d=Math.pow(10,c-b.lu)-b.fu;return a<0?-d:d}function bB(a,b){if(null===a)return null;var c=bz(a.pr(),b),d=bz(a.gr(),b);return new bf(c,d)}function bC(a,b){if(null===a)return null;var c=bA(a.pr(),b),d=bA(a.gr(),b);return new bf(c,d)}function bD(a){if(null===a)return bu;var b=Math.abs(a.gr()-a.pr());if(b>=1||b<1e-15)return bu;var c=Math.ceil(Math.abs(Math.log10(b))),d=bu.lu+c;return{lu:d,fu:1/Math.pow(10,d)}}var bE,bF=function(){function a(a,b){if(this.cu=a,this.vu=b,function(a){if(a<0)return!1;for(var b=a;b>1;b/=10)if(b%10!=0)return!1;return!0}(this.cu))this._u=[2,2.5,2];else{this._u=[];for(var c=this.cu;1!==c;){if(c%2==0)this._u.push(2),c/=2;else{if(c%5!=0)throw Error("unexpected base");this._u.push(2,2.5),c/=5}if(this._u.length>100)throw Error("something wrong with base")}}}return a.prototype.du=function(a,b,c){for(var d,e,f,g,h,i,j=0===this.cu?0:1/this.cu,k=Math.pow(10,Math.max(0,Math.ceil(aF(a-b)))),l=0,m=this.vu[0];;){var n,o,p,q,r,s,t,u,v,w=(n=k,p=1e-14,(o=j)-n<=1e-14&&k>j+1e-14),x=(q=k,s=1e-14,(r=c*m)-q<=1e-14),y=(u=1,v=1e-14,1-(t=k)<=1e-14);if(!(w&&x&&y))break;k/=m,m=this.vu[++l%this.vu.length]}if(k<=j+1e-14&&(k=j),k=Math.max(1,k),this._u.length>0&&(i=1e-14,Math.abs(k-(h=1))<i))for(l=0,m=this._u[0];d=k,(e=c*m)-d<=1e-14&&k>j+1e-14;)k/=m,m=this._u[++l%this._u.length];return k},a}(),bG=function(){function a(a,b,c,d){this.wu=[],this._i=a,this.cu=b,this.Mu=c,this.bu=d}return a.prototype.du=function(a,b){if(a<b)throw Error("high < low");var c=this._i.Yt(),d=(a-b)*this.mu()/c,e=new bF(this.cu,[2,2.5,2]),f=new bF(this.cu,[2,2,2.5]),g=new bF(this.cu,[2.5,2,2]),h=[];return h.push(e.du(a,b,d),f.du(a,b,d),g.du(a,b,d)),function(a){if(a.length<1)throw Error("array is empty");for(var b=a[0],c=1;c<a.length;++c)a[c]<b&&(b=a[c]);return b}(h)},a.prototype.pu=function(){var a=this._i,b=a.kt();if(null!==b){var c=a.Yt(),d=this.Mu(c-1,b),e=this.Mu(0,b),f=this._i.W().entireTextOnly?this.gu()/2:0,g=f,h=c-1-f,i=Math.max(d,e),j=Math.min(d,e);if(i!==j){for(var k=this.du(i,j),l=i%k,m=i>=j?1:-1,n=null,o=0,p=i-(l+=l<0?k:0);p>j;p-=k){var q=this.bu(p,b,!0);null!==n&&Math.abs(q-n)<this.mu()||q<g||q>h||(o<this.wu.length?(this.wu[o].su=q,this.wu[o].yu=a.ku(p)):this.wu.push({su:q,yu:a.ku(p)}),o++,n=q,a.Nu()&&(k=this.du(p*m,j)))}this.wu.length=o}else this.wu=[]}else this.wu=[]},a.prototype.au=function(){return this.wu},a.prototype.gu=function(){return this._i.S()},a.prototype.mu=function(){return Math.ceil(2.5*this.gu())},a}();function bH(a){return a.slice().sort(function(a,b){return j(a.xi())-j(b.xi())})}(bU=bE||(bE={}))[bU.Normal=0]="Normal",bU[bU.Logarithmic=1]="Logarithmic",bU[bU.Percentage=2]="Percentage",bU[bU.IndexedTo100=3]="IndexedTo100";var bI=new am,bJ=new al(100,1),bK=function(){function a(a,b,c,d){this.xu=0,this.Cu=null,this.Tr=null,this.Su=null,this.Tu={Du:!1,Au:null},this.Bu=0,this.Lu=0,this.Eu=new y,this.Fu=new y,this.Ou=[],this.Vu=null,this.Pu=null,this.Wu=null,this.zu=null,this.Ue=bJ,this.Ru=bD(null),this.Iu=a,this.zi=b,this.ju=c,this.qu=d,this.Uu=new bG(this,100,this.Hu.bind(this),this.Yu.bind(this))}return a.prototype.Ke=function(){return this.Iu},a.prototype.W=function(){return this.zi},a.prototype.Pr=function(a){if(z(this.zi,a),this.Xe(),void 0!==a.mode&&this.$u({mh:a.mode}),void 0!==a.scaleMargins){var b=i(a.scaleMargins.top),c=i(a.scaleMargins.bottom);if(b<0||b>1)throw Error("Invalid top margin - expect value between 0 and 1, given=".concat(b));if(c<0||c>1||b+c>1)throw Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(c));if(b+c>1)throw Error("Invalid margins - sum of margins must be less than 1, given=".concat(b+c));this.Ku(),this.Pu=null}},a.prototype.Xu=function(){return this.zi.autoScale},a.prototype.Nu=function(){return 1===this.zi.mode},a.prototype.vr=function(){return 2===this.zi.mode},a.prototype.Zu=function(){return 3===this.zi.mode},a.prototype.mh=function(){return{_n:this.zi.autoScale,Ju:this.zi.invertScale,mh:this.zi.mode}},a.prototype.$u=function(a){var b=this.mh(),c=null;void 0!==a._n&&(this.zi.autoScale=a._n),void 0!==a.mh&&(this.zi.mode=a.mh,2!==a.mh&&3!==a.mh||(this.zi.autoScale=!0),this.Tu.Du=!1),1===b.mh&&a.mh!==b.mh&&(function(a,b){if(null===a)return!1;var c=bA(a.pr(),b),d=bA(a.gr(),b);return isFinite(c)&&isFinite(d)}(this.Tr,this.Ru)?null!==(c=bC(this.Tr,this.Ru))&&this.Gu(c):this.zi.autoScale=!0),1===a.mh&&a.mh!==b.mh&&null!==(c=bB(this.Tr,this.Ru))&&this.Gu(c);var d=b.mh!==this.zi.mode;d&&(2===b.mh||this.vr())&&this.Xe(),d&&(3===b.mh||this.Zu())&&this.Xe(),void 0!==a.Ju&&b.Ju!==a.Ju&&(this.zi.invertScale=a.Ju,this.Qu()),this.Fu.m(b,this.mh())},a.prototype.ta=function(){return this.Fu},a.prototype.S=function(){return this.ju.fontSize},a.prototype.Yt=function(){return this.xu},a.prototype.ia=function(a){this.xu!==a&&(this.xu=a,this.Ku(),this.Pu=null)},a.prototype.na=function(){if(this.Cu)return this.Cu;var a=this.Yt()-this.sa()-this.ha();return this.Cu=a,a},a.prototype.Ar=function(){return this.ra(),this.Tr},a.prototype.Gu=function(a,b){var c=this.Tr;(b||null===c&&null!==a||null!==c&&!c.br(a))&&(this.Pu=null,this.Tr=a)},a.prototype.wi=function(){return this.ra(),0===this.xu||!this.Tr||this.Tr.wi()},a.prototype.ea=function(a){return this.Ju()?a:this.Yt()-1-a},a.prototype.xt=function(a,b){return this.vr()?a=bv(a,b):this.Zu()&&(a=bx(a,b)),this.Yu(a,b)},a.prototype.us=function(a,b,c){this.ra();for(var d=this.ha(),e=j(this.Ar()),f=e.pr(),g=e.gr(),h=this.na()-1,i=this.Ju(),k=h/(g-f),l=void 0===c?0:c.from,m=void 0===c?a.length:c.to,n=this.ua(),o=l;o<m;o++){var p=a[o],q=p.et;if(!isNaN(q)){var r=q;null!==n&&(r=n(p.et,b));var s=d+k*(r-f),t=i?s:this.xu-1-s;p.it=t}}},a.prototype.Ss=function(a,b,c){this.ra();for(var d=this.ha(),e=j(this.Ar()),f=e.pr(),g=e.gr(),h=this.na()-1,i=this.Ju(),k=h/(g-f),l=void 0===c?0:c.from,m=void 0===c?a.length:c.to,n=this.ua(),o=l;o<m;o++){var p=a[o],q=p.open,r=p.high,s=p.low,t=p.close;null!==n&&(q=n(p.open,b),r=n(p.high,b),s=n(p.low,b),t=n(p.close,b));var u=d+k*(q-f),v=i?u:this.xu-1-u;p.xs=v,u=d+k*(r-f),v=i?u:this.xu-1-u,p.ys=v,u=d+k*(s-f),v=i?u:this.xu-1-u,p.ks=v,u=d+k*(t-f),v=i?u:this.xu-1-u,p.Cs=v}},a.prototype.qi=function(a,b){var c=this.Hu(a,b);return this.aa(c,b)},a.prototype.aa=function(a,b){var c,d,e,f,g=a;return this.vr()?g=(c=g,(d=b)<0&&(c=-c),c/100*d+d):this.Zu()&&(g=(e=g,e-=100,(f=b)<0&&(e=-e),e/100*f+f)),g},a.prototype.Ge=function(){return this.Ou},a.prototype.oa=function(){if(this.Vu)return this.Vu;for(var a=[],b=0;b<this.Ou.length;b++){var c=this.Ou[b];null===c.xi()&&c.Ci(b+1),a.push(c)}return a=bH(a),this.Vu=a,this.Vu},a.prototype.la=function(a){-1===this.Ou.indexOf(a)&&(this.Ou.push(a),this.Xe(),this.fa())},a.prototype.ca=function(a){var b=this.Ou.indexOf(a);if(-1===b)throw Error("source is not attached to scale");this.Ou.splice(b,1),0===this.Ou.length&&(this.$u({_n:!0}),this.Gu(null)),this.Xe(),this.fa()},a.prototype.kt=function(){for(var a=null,b=0,c=this.Ou;b<c.length;b++){var d=c[b].kt();null!==d&&(null===a||d.Ve<a.Ve)&&(a=d)}return null===a?null:a.St},a.prototype.Ju=function(){return this.zi.invertScale},a.prototype.au=function(){var a=null===this.kt();if(null!==this.Pu&&(a||this.Pu.va===a))return this.Pu.au;this.Uu.pu();var b=this.Uu.au();return this.Pu={au:b,va:a},this.Eu.m(),b},a.prototype._a=function(){return this.Eu},a.prototype.da=function(a){this.vr()||this.Zu()||null===this.Wu&&null===this.Su&&(this.wi()||(this.Wu=this.xu-a,this.Su=j(this.Ar()).mr()))},a.prototype.wa=function(a){if(!this.vr()&&!this.Zu()&&null!==this.Wu){this.$u({_n:!1}),(a=this.xu-a)<0&&(a=0);var b=(this.Wu+.2*(this.xu-1))/(a+.2*(this.xu-1)),c=j(this.Su).mr();b=Math.max(b,.1),c.kr(b),this.Gu(c)}},a.prototype.Ma=function(){this.vr()||this.Zu()||(this.Wu=null,this.Su=null)},a.prototype.ba=function(a){this.Xu()||null===this.zu&&null===this.Su&&(this.wi()||(this.zu=a,this.Su=j(this.Ar()).mr()))},a.prototype.ma=function(a){if(!this.Xu()&&null!==this.zu){var b=j(this.Ar()).yr()/(this.na()-1),c=a-this.zu;this.Ju()&&(c*=-1);var d=c*b,e=j(this.Su).mr();e.Nr(d),this.Gu(e,!0),this.Pu=null}},a.prototype.pa=function(){this.Xu()||null!==this.zu&&(this.zu=null,this.Su=null)},a.prototype.qe=function(){return this.Ue||this.Xe(),this.Ue},a.prototype.Mi=function(a,b){switch(this.zi.mode){case 2:return this.qe().format(bv(a,b));case 3:return this.qe().format(bx(a,b));default:return this.ga(a)}},a.prototype.ku=function(a){switch(this.zi.mode){case 2:case 3:return this.qe().format(a);default:return this.ga(a)}},a.prototype.Fr=function(a){return this.ga(a,j(this.ya()).qe())},a.prototype.Ne=function(a,b){return a=bv(a,b),bI.format(a)},a.prototype.ka=function(){return this.Ou},a.prototype.Na=function(a){this.Tu={Au:a,Du:!1}},a.prototype.hn=function(){this.Ou.forEach(function(a){return a.hn()})},a.prototype.Xe=function(){this.Pu=null;var a=this.ya(),b=100;null!==a&&(b=Math.round(1/a.je())),this.Ue=bJ,this.vr()?(this.Ue=bI,b=100):this.Zu()?(this.Ue=new al(100,1),b=100):null!==a&&(this.Ue=a.qe()),this.Uu=new bG(this,b,this.Hu.bind(this),this.Yu.bind(this)),this.Uu.pu()},a.prototype.fa=function(){this.Vu=null},a.prototype.ya=function(){return this.Ou[0]||null},a.prototype.sa=function(){return this.Ju()?this.zi.scaleMargins.bottom*this.Yt()+this.Lu:this.zi.scaleMargins.top*this.Yt()+this.Bu},a.prototype.ha=function(){return this.Ju()?this.zi.scaleMargins.top*this.Yt()+this.Bu:this.zi.scaleMargins.bottom*this.Yt()+this.Lu},a.prototype.ra=function(){this.Tu.Du||(this.Tu.Du=!0,this.xa())},a.prototype.Ku=function(){this.Cu=null},a.prototype.Yu=function(a,b){if(this.ra(),this.wi())return 0;a=this.Nu()&&a?bz(a,this.Ru):a;var c=j(this.Ar()),d=this.ha()+(this.na()-1)*(a-c.pr())/c.yr();return this.ea(d)},a.prototype.Hu=function(a,b){if(this.ra(),this.wi())return 0;var c=this.ea(a),d=j(this.Ar()),e=d.pr()+d.yr()*((c-this.ha())/(this.na()-1));return this.Nu()?bA(e,this.Ru):e},a.prototype.Qu=function(){this.Pu=null,this.Uu.pu()},a.prototype.xa=function(){var a=this.Tu.Au;if(null!==a){for(var b,c,d=null,e=0,f=0,g=0,h=this.ka();g<h.length;g++){var i=h[g];if(i.yt()){var k=i.kt();if(null!==k){var l=i.Re(a.In(),a.jn()),m=l&&l.Ar();if(null!==m){switch(this.zi.mode){case 1:m=bB(m,this.Ru);break;case 2:m=bw(m,k.St);break;case 3:m=by(m,k.St)}if(d=null===d?m:d.Nn(j(m)),null!==l){var n=l.Br();null!==n&&(e=Math.max(e,n.above),f=Math.max(e,n.below))}}}}}if(e===this.Bu&&f===this.Lu||(this.Bu=e,this.Lu=f,this.Pu=null,this.Ku()),null!==d){if(d.pr()===d.gr()){var o=this.ya(),p=5*(null===o||this.vr()||this.Zu()?1:o.je());this.Nu()&&(d=bC(d,this.Ru)),d=new bf(d.pr()-p,d.gr()+p),this.Nu()&&(d=bB(d,this.Ru))}if(this.Nu()){var q=bC(d,this.Ru),r=bD(q);if(b=r,c=this.Ru,b.lu!==c.lu||b.fu!==c.fu){var s=null!==this.Su?bC(this.Su,this.Ru):null;this.Ru=r,d=bB(q,r),null!==s&&(this.Su=bB(s,r))}}this.Gu(d)}else null===this.Tr&&(this.Gu(new bf(-.5,.5)),this.Ru=bD(null));this.Tu.Du=!0}},a.prototype.ua=function(){var a=this;return this.vr()?bv:this.Zu()?bx:this.Nu()?function(b){return bz(b,a.Ru)}:null},a.prototype.ga=function(a,b){return void 0===this.qu.priceFormatter?(void 0===b&&(b=this.qe()),b.format(a)):this.qu.priceFormatter(a)},a}(),bL=function(){function a(a,b){this.Ou=[],this.Ca=new Map,this.xu=0,this.hh=0,this.Sa=1e3,this.Vu=null,this.Ta=new y,this.Da=a,this.pi=b,this.Aa=new bt(this);var c=b.W();this.Ba=this.La("left",c.leftPriceScale),this.Ea=this.La("right",c.rightPriceScale),this.Ba.ta().u(this.Fa.bind(this,this.Ba),this),this.Ea.ta().u(this.Fa.bind(this,this.Ba),this),this.Oa(c)}return a.prototype.Oa=function(a){if(a.leftPriceScale&&this.Ba.Pr(a.leftPriceScale),a.rightPriceScale&&this.Ea.Pr(a.rightPriceScale),a.localization&&(this.Ba.Xe(),this.Ea.Xe()),a.overlayPriceScales)for(var b=0,c=Array.from(this.Ca.values());b<c.length;b++){var d=j(c[b][0].Ct());d.Pr(a.overlayPriceScales),a.localization&&d.Xe()}},a.prototype.Va=function(a){switch(a){case"left":return this.Ba;case"right":return this.Ea}return this.Ca.has(a)?i(this.Ca.get(a))[0].Ct():null},a.prototype.g=function(){this.jt().Pa().M(this),this.Ba.ta().M(this),this.Ea.ta().M(this),this.Ou.forEach(function(a){a.g&&a.g()}),this.Ta.m()},a.prototype.Wa=function(){return this.Sa},a.prototype.za=function(a){this.Sa=a},a.prototype.jt=function(){return this.pi},a.prototype.Ht=function(){return this.hh},a.prototype.Yt=function(){return this.xu},a.prototype.Ra=function(a){this.hh=a,this.Ia()},a.prototype.ia=function(a){var b=this;this.xu=a,this.Ba.ia(a),this.Ea.ia(a),this.Ou.forEach(function(c){if(b.lh(c)){var d=c.Ct();null!==d&&d.ia(a)}}),this.Ia()},a.prototype.Ge=function(){return this.Ou},a.prototype.lh=function(a){var b=a.Ct();return null===b||this.Ba!==b&&this.Ea!==b},a.prototype.la=function(a,b,c){var d=void 0!==c?c:this.qa().ja+1;this.Ua(a,b,d)},a.prototype.ca=function(a){var b=this.Ou.indexOf(a);h(-1!==b,"removeDataSource: invalid data source"),this.Ou.splice(b,1);var c=j(a.Ct()).Ke();if(this.Ca.has(c)){var d=i(this.Ca.get(c)),e=d.indexOf(a);-1!==e&&(d.splice(e,1),0===d.length&&this.Ca.delete(c))}var f=a.Ct();f&&f.Ge().indexOf(a)>=0&&f.ca(a),null!==f&&(f.fa(),this.Ha(f)),this.Vu=null},a.prototype._h=function(a){return a===this.Ba?"left":a===this.Ea?"right":"overlay"},a.prototype.Ya=function(){return this.Ba},a.prototype.$a=function(){return this.Ea},a.prototype.Ka=function(a,b){a.da(b)},a.prototype.Xa=function(a,b){a.wa(b),this.Ia()},a.prototype.Za=function(a){a.Ma()},a.prototype.Ja=function(a,b){a.ba(b)},a.prototype.Ga=function(a,b){a.ma(b),this.Ia()},a.prototype.Qa=function(a){a.pa()},a.prototype.Ia=function(){this.Ou.forEach(function(a){a.hn()})},a.prototype.ji=function(){var a=null;return this.pi.W().rightPriceScale.visible&&0!==this.Ea.Ge().length?a=this.Ea:this.pi.W().leftPriceScale.visible&&0!==this.Ba.Ge().length?a=this.Ba:0!==this.Ou.length&&(a=this.Ou[0].Ct()),null===a&&(a=this.Ea),a},a.prototype.fh=function(){var a=null;return this.pi.W().rightPriceScale.visible?a=this.Ea:this.pi.W().leftPriceScale.visible&&(a=this.Ba),a},a.prototype.Ha=function(a){null!==a&&a.Xu()&&this.io(a)},a.prototype.no=function(a){var b=this.Da.ss();a.$u({_n:!0}),null!==b&&a.Na(b),this.Ia()},a.prototype.so=function(){this.io(this.Ba),this.io(this.Ea)},a.prototype.ho=function(){var a=this;this.Ha(this.Ba),this.Ha(this.Ea),this.Ou.forEach(function(b){a.lh(b)&&a.Ha(b.Ct())}),this.Ia(),this.pi.Wr()},a.prototype.oa=function(){return null===this.Vu&&(this.Vu=bH(this.Ou)),this.Vu},a.prototype.ro=function(){return this.Ta},a.prototype.eo=function(){return this.Aa},a.prototype.io=function(a){var b=a.ka();if(b&&b.length>0&&!this.Da.wi()){var c=this.Da.ss();null!==c&&a.Na(c)}a.hn()},a.prototype.qa=function(){var a=this.oa();if(0===a.length)return{uo:0,ja:0};for(var b=0,c=0,d=0;d<a.length;d++){var e=a[d].xi();null!==e&&(e<b&&(b=e),e>c&&(c=e))}return{uo:b,ja:c}},a.prototype.Ua=function(a,b,c){var d=this.Va(b);if(null===d&&(d=this.La(b,this.pi.W().overlayPriceScales)),this.Ou.push(a),!ai(b)){var e=this.Ca.get(b)||[];e.push(a),this.Ca.set(b,e)}d.la(a),a.Si(d),a.Ci(c),this.Ha(d),this.Vu=null},a.prototype.Fa=function(a,b,c){b.mh!==c.mh&&this.io(a)},a.prototype.La=function(a,b){var c=w({visible:!0,autoScale:!0},E(b)),d=new bK(a,c,this.pi.W().layout,this.pi.W().localization);return d.ia(this.Yt()),d},a}(),bM=function(a){return a.getUTCFullYear()},bN=function(){function a(a,b){void 0===a&&(a="yyyy-MM-dd"),void 0===b&&(b="default"),this.ao=a,this.oo=b}return a.prototype.lo=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return b=a,c=this.ao,d=this.oo,c.replace(/yyyy/g,ak(bM(e=b),4)).replace(/yy/g,ak(bM(f=b)%100,2)).replace(/MMMM/g,(g=b,h=d,new Date(g.getUTCFullYear(),g.getUTCMonth(),1).toLocaleString(h,{month:"long"}))).replace(/MMM/g,(i=b,j=d,new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(j,{month:"short"}))).replace(/MM/g,ak((l=k=b).getUTCMonth()+1,2)).replace(/dd/g,ak((n=m=b).getUTCDate(),2))},a}(),bO=function(){function a(a){this.fo=a||"%h:%m:%s"}return a.prototype.lo=function(a){return this.fo.replace("%h",ak(a.getUTCHours(),2)).replace("%m",ak(a.getUTCMinutes(),2)).replace("%s",ak(a.getUTCSeconds(),2))},a}(),bP={co:"yyyy-MM-dd",vo:"%h:%m:%s",_o:" ",do:"default"},bQ=function(){function a(a){void 0===a&&(a={});var b=w(w({},bP),a);this.wo=new bN(b.co,b.do),this.Mo=new bO(b.vo),this.bo=b._o}return a.prototype.lo=function(a){return"".concat(this.wo.lo(a)).concat(this.bo).concat(this.Mo.lo(a))},a}(),bR=function(){function a(a,b){void 0===b&&(b=50),this.mo=0,this.po=1,this.yo=1,this.Gs=new Map,this.ko=new Map,this.No=a,this.xo=b}return a.prototype.lo=function(a){var b=void 0===a.Co?new Date(1e3*a.So).getTime():new Date(Date.UTC(a.Co.year,a.Co.month-1,a.Co.day)).getTime(),c=this.Gs.get(b);if(void 0!==c)return c.To;if(this.mo===this.xo){var d=this.ko.get(this.yo);this.ko.delete(this.yo),this.Gs.delete(i(d)),this.yo++,this.mo--}var e=this.No(a);return this.Gs.set(b,{To:e,Do:this.po}),this.ko.set(this.po,b),this.mo++,this.po++,e},a}(),bS=function(){function a(a,b){h(a<=b,"right should be >= left"),this.Ao=a,this.Bo=b}return a.prototype.In=function(){return this.Ao},a.prototype.jn=function(){return this.Bo},a.prototype.Lo=function(){return this.Bo-this.Ao+1},a.prototype.Uh=function(a){return this.Ao<=a&&a<=this.Bo},a.prototype.br=function(a){return this.Ao===a.In()&&this.Bo===a.jn()},a}();function bT(a,b){return null===a||null===b?a===b:a.br(b)}var bU,bV,bW,bX=function(){function a(){this.Eo=new Map,this.Gs=null}return a.prototype.Fo=function(a,b){this.Oo(b),this.Gs=null;for(var c=b;c<a.length;++c){var d=a[c],e=this.Eo.get(d.Vo);void 0===e&&(e=[],this.Eo.set(d.Vo,e)),e.push({vs:c,rt:d.rt,Po:d.Vo})}},a.prototype.Wo=function(a,b){var c=Math.ceil(b/a);return null!==this.Gs&&this.Gs.zo===c||(this.Gs={au:this.Ro(c),zo:c}),this.Gs.au},a.prototype.Oo=function(a){if(0!==a){var b=[];this.Eo.forEach(function(c,d){a<=c[0].vs?b.push(d):c.splice(at(c,a,function(b){return b.vs<a}),1/0)});for(var c=0,d=b;c<d.length;c++){var e=d[c];this.Eo.delete(e)}}else this.Eo.clear()},a.prototype.Ro=function(a){for(var b=[],c=0,d=Array.from(this.Eo.keys()).sort(function(a,b){return b-a});c<d.length;c++){var e=d[c];if(this.Eo.get(e)){var f=b;b=[];for(var g=f.length,h=0,j=i(this.Eo.get(e)),k=j.length,l=1/0,m=-1/0,n=0;n<k;n++){for(var o=j[n],p=o.vs;h<g;){var q=f[h],r=q.vs;if(!(r<p)){l=r;break}h++,b.push(q),m=r,l=1/0}l-p>=a&&p-m>=a&&(b.push(o),m=p)}for(;h<g;h++)b.push(f[h])}}return b},a}(),bY=function(){function a(a){this.Io=a}return a.prototype.jo=function(){return null===this.Io?null:new bS(Math.floor(this.Io.In()),Math.ceil(this.Io.jn()))},a.prototype.qo=function(){return this.Io},a.Uo=function(){return new a(null)},a}();(bW=bV||(bV={}))[bW.Year=0]="Year",bW[bW.Month=1]="Month",bW[bW.DayOfMonth=2]="DayOfMonth",bW[bW.Time=3]="Time",bW[bW.TimeWithSeconds=4]="TimeWithSeconds";var bZ,b$,b_=function(){function a(a,b,c){this.hh=0,this.Ho=null,this.Yo=[],this.zu=null,this.Wu=null,this.$o=new bX,this.Ko=new Map,this.Xo=bY.Uo(),this.Zo=!0,this.Jo=new y,this.Go=new y,this.Qo=new y,this.tl=null,this.il=null,this.nl=[],this.zi=b,this.qu=c,this.sl=b.rightOffset,this.hl=b.barSpacing,this.pi=a,this.rl()}return a.prototype.W=function(){return this.zi},a.prototype.el=function(a){z(this.qu,a),this.ul(),this.rl()},a.prototype.Pr=function(a,b){var c;z(this.zi,a),this.zi.fixLeftEdge&&this.al(),this.zi.fixRightEdge&&this.ol(),void 0!==a.barSpacing&&this.pi.gn(a.barSpacing),void 0!==a.rightOffset&&this.pi.yn(a.rightOffset),void 0!==a.minBarSpacing&&this.pi.gn(null!==(c=a.barSpacing)&& void 0!==c?c:this.hl),this.ul(),this.rl(),this.Qo.m()},a.prototype.gi=function(a){var b;return(null===(b=this.Yo[a])|| void 0===b?void 0:b.rt)||null},a.prototype.Ze=function(a,b){if(this.Yo.length<1)return null;if(a.So>this.Yo[this.Yo.length-1].rt.So)return b?this.Yo.length-1:null;var c=at(this.Yo,a.So,function(a,b){return a.rt.So<b});return a.So<this.Yo[c].rt.So?b?c:null:c},a.prototype.wi=function(){return 0===this.hh||0===this.Yo.length||null===this.Ho},a.prototype.ss=function(){return this.ll(),this.Xo.jo()},a.prototype.fl=function(){return this.ll(),this.Xo.qo()},a.prototype.cl=function(){var a=this.ss();if(null===a)return null;var b={from:a.In(),to:a.jn()};return this.vl(b)},a.prototype.vl=function(a){var b=Math.round(a.from),c=Math.round(a.to),d=j(this._l()),e=j(this.dl());return{from:j(this.gi(Math.max(d,b))),to:j(this.gi(Math.min(e,c)))}},a.prototype.wl=function(a){return{from:j(this.Ze(a.from,!0)),to:j(this.Ze(a.to,!0))}},a.prototype.Ht=function(){return this.hh},a.prototype.Ra=function(a){if(isFinite(a)&&!(a<=0)&&this.hh!==a){if(this.zi.lockVisibleTimeRangeOnResize&&this.hh){var b=this.hl*a/this.hh;this.hl=b}if(this.zi.fixLeftEdge){var c=this.ss();if(null!==c&&0>=c.In()){var d=this.hh-a;this.sl-=Math.round(d/this.hl)+1}}this.hh=a,this.Zo=!0,this.Ml(),this.bl()}},a.prototype.At=function(a){if(this.wi()||!B(a))return 0;var b=this.ml()+this.sl-a;return this.hh-(b+.5)*this.hl-1},a.prototype.es=function(a,b){for(var c=this.ml(),d=void 0===b?0:b.from,e=void 0===b?a.length:b.to,f=d;f<e;f++){var g=a[f].rt,h=c+this.sl-g,i=this.hh-(h+.5)*this.hl-1;a[f].tt=i}},a.prototype.pl=function(a){return Math.ceil(this.gl(a))},a.prototype.yn=function(a){this.Zo=!0,this.sl=a,this.bl(),this.pi.yl(),this.pi.Wr()},a.prototype.ws=function(){return this.hl},a.prototype.gn=function(a){this.kl(a),this.bl(),this.pi.yl(),this.pi.Wr()},a.prototype.Nl=function(){return this.sl},a.prototype.au=function(){if(this.wi())return null;if(null!==this.il)return this.il;for(var a=this.hl,b=5*(this.pi.W().layout.fontSize+4),c=Math.round(b/a),d=j(this.ss()),e=Math.max(d.In(),d.In()-c),f=Math.max(d.jn(),d.jn()-c),g=this.$o.Wo(a,b),h=this._l()+c,i=this.dl()-c,k=this.xl(),l=this.zi.fixLeftEdge||k,m=this.zi.fixRightEdge||k,n=0,o=0,p=g;o<p.length;o++){var q=p[o];if(e<=q.vs&&q.vs<=f){var r=void 0;n<this.nl.length?((r=this.nl[n]).su=this.At(q.vs),r.yu=this.Cl(q.rt,q.Po),r.Po=q.Po):(r={Sl:!1,su:this.At(q.vs),yu:this.Cl(q.rt,q.Po),Po:q.Po},this.nl.push(r)),this.hl>b/2&&!k?r.Sl=!1:r.Sl=l&&q.vs<=h||m&&q.vs>=i,n++}}return this.nl.length=n,this.il=this.nl,this.nl},a.prototype.Tl=function(){this.Zo=!0,this.gn(this.zi.barSpacing),this.yn(this.zi.rightOffset)},a.prototype.Dl=function(a){this.Zo=!0,this.Ho=a,this.bl(),this.al()},a.prototype.Al=function(a,b){var c=this.gl(a),d=this.ws();this.gn(d+b*(d/10)),this.zi.rightBarStaysOnScroll||this.yn(this.Nl()+(c-this.gl(a)))},a.prototype.da=function(a){this.zu&&this.pa(),null===this.Wu&&null===this.tl&&(this.wi()||(this.Wu=a,this.Bl()))},a.prototype.wa=function(a){if(null!==this.tl){var b=aE(this.hh-a,0,this.hh),c=aE(this.hh-j(this.Wu),0,this.hh);0!==b&&0!==c&&this.gn(this.tl.ws*b/c)}},a.prototype.Ma=function(){null!==this.Wu&&(this.Wu=null,this.Ll())},a.prototype.ba=function(a){null===this.zu&&null===this.tl&&(this.wi()||(this.zu=a,this.Bl()))},a.prototype.ma=function(a){if(null!==this.zu){var b=(this.zu-a)/this.ws();this.sl=j(this.tl).Nl+b,this.Zo=!0,this.bl()}},a.prototype.pa=function(){null!==this.zu&&(this.zu=null,this.Ll())},a.prototype.El=function(){this.Fl(this.zi.rightOffset)},a.prototype.Fl=function(a,b){var c=this;if(void 0===b&&(b=400),!isFinite(a))throw RangeError("offset is required and must be finite number");if(!isFinite(b)||b<=0)throw RangeError("animationDuration (optional) must be finite positive number");var d=this.sl,e=performance.now(),f=function(){var g=(performance.now()-e)/b,h=g>=1;c.yn(h?a:d+(a-d)*g),h||setTimeout(f,20)};f()},a.prototype.vt=function(a,b){this.Zo=!0,this.Yo=a,this.$o.Fo(a,b),this.bl()},a.prototype.Ol=function(){return this.Jo},a.prototype.Vl=function(){return this.Go},a.prototype.Pl=function(){return this.Qo},a.prototype.ml=function(){return this.Ho||0},a.prototype.Wl=function(a){var b=a.Lo();this.kl(this.hh/b),this.sl=a.jn()-this.ml(),this.bl(),this.Zo=!0,this.pi.yl(),this.pi.Wr()},a.prototype.zl=function(){var a=this._l(),b=this.dl();null!==a&&null!==b&&this.Wl(new bS(a,b+this.zi.rightOffset))},a.prototype.Rl=function(a){var b=new bS(a.from,a.to);this.Wl(b)},a.prototype.yi=function(a){return void 0!==this.qu.timeFormatter?this.qu.timeFormatter(a.Co||a.So):this.Il.lo(new Date(1e3*a.So))},a.prototype.xl=function(){var a=this.pi.W(),b=a.handleScroll,c=a.handleScale;return!(b.horzTouchDrag||b.mouseWheel||b.pressedMouseMove||b.vertTouchDrag||c.axisDoubleClickReset||c.axisPressedMouseMove.time||c.mouseWheel||c.pinch)},a.prototype._l=function(){return 0===this.Yo.length?null:0},a.prototype.dl=function(){return 0===this.Yo.length?null:this.Yo.length-1},a.prototype.jl=function(a){return(this.hh-1-a)/this.hl},a.prototype.gl=function(a){var b=this.jl(a);return Math.round(1e6*(this.ml()+this.sl-b))/1e6},a.prototype.kl=function(a){var b=this.hl;this.hl=a,this.Ml(),b!==this.hl&&(this.Zo=!0,this.ql())},a.prototype.ll=function(){if(this.Zo){if(this.Zo=!1,this.wi())this.Ul(bY.Uo());else{var a=this.ml(),b=this.hh/this.hl,c=this.sl+a,d=new bS(c-b+1,c);this.Ul(new bY(d))}}},a.prototype.Ml=function(){var a=this.Hl();if(this.hl<a&&(this.hl=a,this.Zo=!0),0!==this.hh){var b=.5*this.hh;this.hl>b&&(this.hl=b,this.Zo=!0)}},a.prototype.Hl=function(){return this.zi.fixLeftEdge&&this.zi.fixRightEdge&&0!==this.Yo.length?this.hh/this.Yo.length:this.zi.minBarSpacing},a.prototype.bl=function(){var a=this.Yl();this.sl>a&&(this.sl=a,this.Zo=!0);var b=this.$l();null!==b&&this.sl<b&&(this.sl=b,this.Zo=!0)},a.prototype.$l=function(){var a=this._l(),b=this.Ho;return null===a||null===b?null:a-b-1+(this.zi.fixLeftEdge?this.hh/this.hl:Math.min(2,this.Yo.length))},a.prototype.Yl=function(){return this.zi.fixRightEdge?0:this.hh/this.hl-Math.min(2,this.Yo.length)},a.prototype.Bl=function(){this.tl={ws:this.ws(),Nl:this.Nl()}},a.prototype.Ll=function(){this.tl=null},a.prototype.Cl=function(a,b){var c=this,d=this.Ko.get(b);return void 0===d&&(d=new bR(function(a){return c.Kl(a,b)}),this.Ko.set(b,d)),d.lo(a)},a.prototype.Kl=function(a,b){var c,d=function(a,b,c){switch(a){case 0:case 10:return b?c?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return b?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(b,this.zi.timeVisible,this.zi.secondsVisible);return void 0!==this.zi.tickMarkFormatter?this.zi.tickMarkFormatter(null!==(c=a.Co)&& void 0!==c?c:a.So,d,this.qu.locale):function(a,b,c){var d={};switch(b){case 0:d.year="numeric";break;case 1:d.month="short";break;case 2:d.day="numeric";break;case 3:d.hour12=!1,d.hour="2-digit",d.minute="2-digit";break;case 4:d.hour12=!1,d.hour="2-digit",d.minute="2-digit",d.second="2-digit"}var e=new Date(void 0===a.Co?1e3*a.So:Date.UTC(a.Co.year,a.Co.month-1,a.Co.day));return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()).toLocaleString(c,d)}(a,d,this.qu.locale)},a.prototype.Ul=function(a){var b=this.Xo;this.Xo=a,bT(b.jo(),this.Xo.jo())||this.Jo.m(),bT(b.qo(),this.Xo.qo())||this.Go.m(),this.ql()},a.prototype.ql=function(){this.il=null},a.prototype.ul=function(){this.ql(),this.Ko.clear()},a.prototype.rl=function(){var a=this.qu.dateFormat;this.zi.timeVisible?this.Il=new bQ({co:a,vo:this.zi.secondsVisible?"%h:%m:%s":"%h:%m",_o:"   ",do:this.qu.locale}):this.Il=new bN(a,this.qu.locale)},a.prototype.al=function(){if(this.zi.fixLeftEdge){var a=this._l();if(null!==a){var b=this.ss();if(null!==b){var c=b.In()-a;if(c<0){var d=this.sl-c-1;this.yn(d)}this.Ml()}}}},a.prototype.ol=function(){this.bl(),this.Ml()},a}(),b0=function(a){function b(b){var c=a.call(this)||this;return c.Xl=new Map,c.Bt=b,c}return v(b,a),b.prototype.Y=function(a){},b.prototype.K=function(a){if(this.Bt.yt){a.save();for(var b=0,c=0,d=this.Bt.Zl;c<d.length;c++)if(0!==(i=d[c]).Gt.length){a.font=i.T;var e=this.Jl(a,i.Gt);e>this.Bt.Ht?i.Al=this.Bt.Ht/e:i.Al=1,b+=i.Gl*i.Al}var f=0;switch(this.Bt.Ql){case"top":f=0;break;case"center":f=Math.max((this.Bt.Yt-b)/2,0);break;case"bottom":f=Math.max(this.Bt.Yt-b,0)}a.fillStyle=this.Bt.A;for(var g=0,h=this.Bt.Zl;g<h.length;g++){var i=h[g];a.save();var j=0;switch(this.Bt.tf){case"left":a.textAlign="left",j=i.Gl/2;break;case"center":a.textAlign="center",j=this.Bt.Ht/2;break;case"right":a.textAlign="right",j=this.Bt.Ht-1-i.Gl/2}a.translate(j,f),a.textBaseline="top",a.font=i.T,a.scale(i.Al,i.Al),a.fillText(i.Gt,0,i.if),a.restore(),f+=i.Gl*i.Al}a.restore()}},b.prototype.Jl=function(a,b){var c=this.nf(a.font),d=c.get(b);return void 0===d&&(d=a.measureText(b).width,c.set(b,d)),d},b.prototype.nf=function(a){var b=this.Xl.get(a);return void 0===b&&(b=new Map,this.Xl.set(a,b)),b},b}(L),b1=function(){function a(a){this.ft=!0,this.Wt={yt:!1,A:"",Yt:0,Ht:0,Zl:[],Ql:"center",tf:"center"},this.zt=new b0(this.Wt),this.Rt=a}return a.prototype.vt=function(){this.ft=!0},a.prototype.dt=function(a,b){return this.ft&&(this.wt(a,b),this.ft=!1),this.zt},a.prototype.wt=function(a,b){var c=this.Rt.W(),d=this.Wt;d.yt=c.visible,d.yt&&(d.A=c.color,d.Ht=b,d.Yt=a,d.tf=c.horzAlign,d.Ql=c.vertAlign,d.Zl=[{Gt:c.text,T:I(c.fontSize,c.fontFamily,c.fontStyle),Gl:1.2*c.fontSize,if:0,Al:0}])},a}(),b2=function(a){function b(b,c){var d=a.call(this)||this;return d.zi=c,d.Hi=new b1(d),d}return v(b,a),b.prototype.nn=function(){return[]},b.prototype.tn=function(){return[this.Hi]},b.prototype.W=function(){return this.zi},b.prototype.hn=function(){this.Hi.vt()},b}(ag);(b$=bZ||(bZ={}))[b$.OnTouchEnd=0]="OnTouchEnd",b$[b$.OnNextTap=1]="OnNextTap";var b3,b4,b5,b6=function(){function a(a,b){this.sf=[],this.hf=[],this.hh=0,this.rf=null,this.ef=null,this.uf=new y,this.af=new y,this.lf=null,this.ff=a,this.zi=b,this.cf=new J(this),this.Da=new b_(this,b.timeScale,this.zi.localization),this.ct=new ah(this,b.crosshair),this.vf=new bq(b.crosshair),this._f=new b2(this,b.watermark),this.df(),this.sf[0].za(2e3),this.wf=this.Mf(0),this.bf=this.Mf(1)}return a.prototype.Ce=function(){this.mf(new aj(3))},a.prototype.Wr=function(){this.mf(new aj(2))},a.prototype.We=function(){this.mf(new aj(1))},a.prototype.Se=function(a){var b=this.pf(a);this.mf(b)},a.prototype.gf=function(){return this.ef},a.prototype.yf=function(a){var b=this.ef;this.ef=a,null!==b&&this.Se(b.kf),null!==a&&this.Se(a.kf)},a.prototype.W=function(){return this.zi},a.prototype.Pr=function(a){z(this.zi,a),this.sf.forEach(function(b){return b.Oa(a)}),void 0!==a.timeScale&&this.Da.Pr(a.timeScale),void 0!==a.localization&&this.Da.el(a.localization),(a.leftPriceScale||a.rightPriceScale)&&this.uf.m(),this.wf=this.Mf(0),this.bf=this.Mf(1),this.Ce()},a.prototype.Nf=function(a,b){if("left"!==a){if("right"!==a){var c=this.xf(a);null!==c&&(c.Ct.Pr(b),this.uf.m())}else this.Pr({rightPriceScale:b})}else this.Pr({leftPriceScale:b})},a.prototype.xf=function(a){for(var b=0,c=this.sf;b<c.length;b++){var d=c[b],e=d.Va(a);if(null!==e)return{It:d,Ct:e}}return null},a.prototype.bt=function(){return this.Da},a.prototype.Cf=function(){return this.sf},a.prototype.Sf=function(){return this._f},a.prototype.Tf=function(){return this.ct},a.prototype.Df=function(){return this.af},a.prototype.Af=function(a,b){a.ia(b),this.yl()},a.prototype.Ra=function(a){this.hh=a,this.Da.Ra(this.hh),this.sf.forEach(function(b){return b.Ra(a)}),this.yl()},a.prototype.df=function(a){var b=new bL(this.Da,this);void 0!==a?this.sf.splice(a,0,b):this.sf.push(b);var c=void 0===a?this.sf.length-1:a,d=new aj(3);return d.cn(c,{vn:0,_n:!0}),this.mf(d),b},a.prototype.Ka=function(a,b,c){a.Ka(b,c)},a.prototype.Xa=function(a,b,c){a.Xa(b,c),this.Te(),this.mf(this.Bf(a,2))},a.prototype.Za=function(a,b){a.Za(b),this.mf(this.Bf(a,2))},a.prototype.Ja=function(a,b,c){b.Xu()||a.Ja(b,c)},a.prototype.Ga=function(a,b,c){b.Xu()||(a.Ga(b,c),this.Te(),this.mf(this.Bf(a,2)))},a.prototype.Qa=function(a,b){b.Xu()||(a.Qa(b),this.mf(this.Bf(a,2)))},a.prototype.no=function(a,b){a.no(b),this.mf(this.Bf(a,2))},a.prototype.Lf=function(a){this.Da.da(a)},a.prototype.Ef=function(a,b){var c=this.bt();!c.wi()&&0!==b&&(a=Math.max(1,Math.min(a,c.Ht())),c.Al(a,b),this.yl())},a.prototype.Ff=function(a){this.Of(0),this.Vf(a),this.Pf()},a.prototype.Wf=function(a){this.Da.wa(a),this.yl()},a.prototype.zf=function(){this.Da.Ma(),this.Wr()},a.prototype.Of=function(a){this.rf=a,this.Da.ba(a)},a.prototype.Vf=function(a){var b=!1;return null!==this.rf&&Math.abs(a-this.rf)>20&&(this.rf=null,b=!0),this.Da.ma(a),this.yl(),b},a.prototype.Pf=function(){this.Da.pa(),this.Wr(),this.rf=null},a.prototype._t=function(){return this.hf},a.prototype.Rf=function(a,b,c){this.ct.Yi(a,b);var d=NaN,e=this.Da.pl(a),f=this.Da.ss();null!==f&&(e=Math.min(Math.max(f.In(),e),f.jn()));var g=c.ji(),h=g.kt();null!==h&&(d=g.qi(b,h)),d=this.vf.Je(d,e,c),this.ct.Zi(e,d,c),this.We(),this.af.m(this.ct.Mt(),{x:a,y:b})},a.prototype.If=function(){this.Tf().Gi(),this.We(),this.af.m(null,null)},a.prototype.Te=function(){var a=this.ct.It();if(null!==a){var b=this.ct.Ki(),c=this.ct.Xi();this.Rf(b,c,a)}this.ct.hn()},a.prototype.jf=function(a,b,c){var d=this.Da.gi(0);void 0!==b&& void 0!==c&&this.Da.vt(b,c);var e=this.Da.gi(0),f=this.Da.ml(),g=this.Da.ss();if(null!==g&&null!==d&&null!==e){var h=g.Uh(f),i=d.So>e.So,j=null!==a&&a>f&&!i,k=h&&this.Da.W().shiftVisibleRangeOnNewBar;if(j&&!k){var l=a-f;this.Da.yn(this.Da.Nl()-l)}}this.Da.Dl(a)},a.prototype.Be=function(a){null!==a&&a.ho()},a.prototype.oh=function(a){var b=this.sf.find(function(b){return b.oa().includes(a)});return void 0===b?null:b},a.prototype.yl=function(){this._f.hn(),this.sf.forEach(function(a){return a.ho()}),this.Te()},a.prototype.g=function(){this.sf.forEach(function(a){return a.g()}),this.sf.length=0,this.zi.localization.priceFormatter=void 0,this.zi.localization.timeFormatter=void 0},a.prototype.qf=function(){return this.cf},a.prototype.dh=function(){return this.cf.W()},a.prototype.Pa=function(){return this.uf},a.prototype.Uf=function(a,b){var c=this.sf[0],d=this.Hf(b,a,c);return this.hf.push(d),1===this.hf.length?this.Ce():this.Wr(),d},a.prototype.Yf=function(a){var b=this.oh(a),c=this.hf.indexOf(a);h(-1!==c,"Series not found"),this.hf.splice(c,1),j(b).ca(a),a.g&&a.g()},a.prototype.xe=function(a,b){var c=j(this.oh(a));c.ca(a);var d=this.xf(b);if(null===d){var e=a.xi();c.la(a,b,e)}else e=d.It===c?a.xi():void 0,d.It.la(a,b,e)},a.prototype.zl=function(){var a=new aj(2);a.Mn(),this.mf(a)},a.prototype.$f=function(a){var b=new aj(2);b.mn(a),this.mf(b)},a.prototype.pn=function(){var a=new aj(2);a.pn(),this.mf(a)},a.prototype.gn=function(a){var b=new aj(2);b.gn(a),this.mf(b)},a.prototype.yn=function(a){var b=new aj(2);b.yn(a),this.mf(b)},a.prototype.Kf=function(){return this.zi.rightPriceScale.visible?"right":"left"},a.prototype.Xf=function(){return this.bf},a.prototype.Zf=function(){return this.wf},a.prototype.Dt=function(a){var b=this.bf,c=this.wf;if(b===c)return b;if(a=Math.max(0,Math.min(100,Math.round(100*a))),null===this.lf||this.lf.Pn!==c||this.lf.Wn!==b)this.lf={Pn:c,Wn:b,Jf:new Map};else{var d=this.lf.Jf.get(a);if(void 0!==d)return d}var e,f,g,h,i,j,k,l,o,p,q,r,t,u,v=(e=c,f=b,g=a/100,i=(h=s(e))[0],j=h[1],k=h[2],l=h[3],o=s(f),p=o[0],q=o[1],r=o[2],t=o[3],u=[m(i+g*(p-i)),m(j+g*(q-j)),m(k+g*(r-k)),n(l+g*(t-l))],"rgba(".concat(u[0],", ").concat(u[1],", ").concat(u[2],", ").concat(u[3],")"));return this.lf.Jf.set(a,v),v},a.prototype.Bf=function(a,b){var c=new aj(b);if(null!==a){var d=this.sf.indexOf(a);c.cn(d,{vn:b})}return c},a.prototype.pf=function(a,b){return void 0===b&&(b=2),this.Bf(this.oh(a),b)},a.prototype.mf=function(a){this.ff&&this.ff(a),this.sf.forEach(function(a){return a.eo().ou().vt()})},a.prototype.Hf=function(a,b,c){var d=new bp(this,a,b),e=void 0!==a.priceScaleId?a.priceScaleId:this.Kf();return c.la(d,e),ai(e)||d.Pr(a),d},a.prototype.Mf=function(a){var b=this.zi.layout;return"gradient"===b.background.type?0===a?b.background.topColor:b.background.bottomColor:b.background.color},a}();function b7(a){void 0!==a.borderColor&&(a.borderUpColor=a.borderColor,a.borderDownColor=a.borderColor),void 0!==a.wickColor&&(a.wickUpColor=a.wickColor,a.wickDownColor=a.wickColor)}function b8(a){return!A(a)&&!C(a)}(cI=b3||(b3={}))[cI.Disabled=0]="Disabled",cI[cI.Continuous=1]="Continuous",cI[cI.OnDataUpdate=2]="OnDataUpdate",(cJ=b4||(b4={}))[cJ.LastBar=0]="LastBar",cJ[cJ.LastVisible=1]="LastVisible",(cK=b5||(b5={})).Solid="solid",cK.VerticalGradient="gradient";var b9=function(){function a(a,b){this.Ft=a,this.Ot=b}return a.prototype.br=function(a){return this.Ft===a.Ft&&this.Ot===a.Ot},a}();function ca(a){return a.ownerDocument&&a.ownerDocument.defaultView&&a.ownerDocument.defaultView.devicePixelRatio||1}function cb(a){var b=j(a.getContext("2d"));return b.setTransform(1,0,0,1,0,0),b}function cc(a,b){var c=a.createElement("canvas"),d=ca(c);return c.style.width="".concat(b.Ft,"px"),c.style.height="".concat(b.Ot,"px"),c.width=b.Ft*d,c.height=b.Ot*d,c}function cd(a,b){var c,d,f=j(a.ownerDocument).createElement("canvas");a.appendChild(f);var g=(c=f,d={allowDownsampling:!1},!1,new e(c,d));return g.resizeCanvas({width:b.Ft,height:b.Ot}),g}function ce(a,b){return a.Gf-b.Gf}function cf(a,b,c){var d=(a.Gf-b.Gf)/(a.rt-b.rt);return Math.sign(d)*Math.min(Math.abs(d),c)}var cg=function(){function a(a,b,c,d){this.Qf=null,this.tc=null,this.ic=null,this.nc=null,this.sc=null,this.hc=0,this.rc=0,this.ec=!1,this.uc=a,this.ac=b,this.oc=c,this.Cn=d}return a.prototype.lc=function(a,b){if(null!==this.Qf){if(this.Qf.rt===b)return void(this.Qf.Gf=a);if(Math.abs(this.Qf.Gf-a)<this.Cn)return}this.nc=this.ic,this.ic=this.tc,this.tc=this.Qf,this.Qf={rt:b,Gf:a}},a.prototype.xh=function(a,b){if(null!==this.Qf&&null!==this.tc&&!(b-this.Qf.rt>50)){var c=0,d=cf(this.Qf,this.tc,this.ac),e=ce(this.Qf,this.tc),f=[d],g=[e];if(c+=e,null!==this.ic){var h=cf(this.tc,this.ic,this.ac);if(Math.sign(h)===Math.sign(d)){var i=ce(this.tc,this.ic);if(f.push(h),g.push(i),c+=i,null!==this.nc){var j=cf(this.ic,this.nc,this.ac);if(Math.sign(j)===Math.sign(d)){var k=ce(this.ic,this.nc);f.push(j),g.push(k),c+=k}}}}for(var l,m,n,o=0,p=0;p<f.length;++p)o+=g[p]/c*f[p];Math.abs(o)<this.uc||(this.sc={Gf:a,rt:b},this.rc=o,this.hc=(l=Math.abs(o),n=Math.log(this.oc),Math.log(-(1*n/l))/n))}},a.prototype.fc=function(a){var b=j(this.sc),c=a-b.rt;return b.Gf+this.rc*(Math.pow(this.oc,c)-1)/Math.log(this.oc)},a.prototype.cc=function(a){return null===this.sc||this.vc(a)===this.hc},a.prototype._c=function(){return this.ec},a.prototype.dc=function(){this.ec=!0},a.prototype.vc=function(a){return Math.min(a-j(this.sc).rt,this.hc)},a}(),ch="undefined"!=typeof window;function ci(){return!!ch&&window.navigator.userAgent.toLowerCase().indexOf("firefox")> -1}function cj(){return!!ch&&/iPhone|iPad|iPod/.test(window.navigator.platform)}var ck=function(){function a(a,b,c){var d=this;this.wc=0,this.Mc=null,this.bc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.mc=0,this.gc=null,this.yc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY},this.kc=null,this.Nc=!1,this.xc=null,this.Cc=null,this.Sc=!1,this.Tc=!1,this.Dc=!1,this.Ac=null,this.Bc=null,this.Lc=null,this.Ec=null,this.Fc=null,this.Oc=null,this.Vc=null,this.Pc=0,this.Wc=!1,this.zc=!1,this.Rc=!1,this.Ic=0,this.jc=null,this.qc=!cj(),this.Uc=function(a){d.Hc(a)},this.Yc=function(a){if(d.$c(a)){var b=d.Kc(a);++d.mc,d.gc&&d.mc>1&&(d.Zc(cn(a),d.yc).Xc<30&&!d.Dc&&d.Jc(b,d.Qc.Gc),d.tv())}else b=d.Kc(a),++d.wc,d.Mc&&d.wc>1&&(d.Zc(cn(a),d.bc).Xc<5&&!d.Tc&&d.iv(b,d.Qc.nv),d.sv())},this.hv=a,this.Qc=b,this.zi=c,this.rv()}return a.prototype.g=function(){null!==this.Ac&&(this.Ac(),this.Ac=null),null!==this.Bc&&(this.Bc(),this.Bc=null),null!==this.Ec&&(this.Ec(),this.Ec=null),null!==this.Fc&&(this.Fc(),this.Fc=null),null!==this.Oc&&(this.Oc(),this.Oc=null),null!==this.Lc&&(this.Lc(),this.Lc=null),this.ev(),this.sv()},a.prototype.uv=function(a){var b=this;this.Ec&&this.Ec();var c=this.av.bind(this);if(this.Ec=function(){b.hv.removeEventListener("mousemove",c)},this.hv.addEventListener("mousemove",c),!this.$c(a)){var d=this.Kc(a);this.iv(d,this.Qc.ov),this.qc=!0}},a.prototype.sv=function(){null!==this.Mc&&clearTimeout(this.Mc),this.wc=0,this.Mc=null,this.bc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},a.prototype.tv=function(){null!==this.gc&&clearTimeout(this.gc),this.mc=0,this.gc=null,this.yc={tt:Number.NEGATIVE_INFINITY,it:Number.POSITIVE_INFINITY}},a.prototype.av=function(a){if(!this.Rc&&null===this.Cc&&!this.$c(a)){var b=this.Kc(a);this.iv(b,this.Qc.lv),this.qc=!0}},a.prototype.fv=function(a){var b=cp(a.changedTouches,j(this.jc));if(null!==b&&(this.Ic=co(a),null===this.Vc&&!this.zc)){this.Wc=!0;var c=this.Zc(cn(b),j(this.Cc)),d=c.cv,e=c.vv,f=c.Xc;if(this.Sc||!(f<5)){if(!this.Sc){var g=.5*d,h=e>=g&&!this.zi._v(),i=g>e&&!this.zi.dv();h||i||(this.zc=!0),this.Sc=!0,this.Dc=!0,this.ev(),this.tv()}if(!this.zc){var k=this.Kc(a,b);this.Jc(k,this.Qc.wv),cm(a)}}}},a.prototype.Mv=function(a){if(0===a.button&&(this.Zc(cn(a),j(this.xc)).Xc>=5&&(this.Tc=!0,this.sv()),this.Tc)){var b=this.Kc(a);this.iv(b,this.Qc.bv)}},a.prototype.Zc=function(a,b){var c=Math.abs(b.tt-a.tt),d=Math.abs(b.it-a.it);return{cv:c,vv:d,Xc:c+d}},a.prototype.mv=function(a){var b=cp(a.changedTouches,j(this.jc));if(null===b&&0===a.touches.length&&(b=a.changedTouches[0]),null!==b){this.jc=null,this.Ic=co(a),this.ev(),this.Cc=null,this.Oc&&(this.Oc(),this.Oc=null);var c=this.Kc(a,b);(this.Jc(c,this.Qc.pv),++this.mc,this.gc&&this.mc>1)?(this.Zc(cn(b),this.yc).Xc<30&&!this.Dc&&this.Jc(c,this.Qc.Gc),this.tv()):this.Dc||(this.Jc(c,this.Qc.gv),this.Qc.gv&&cm(a)),0===this.mc&&cm(a),0===a.touches.length&&this.Nc&&(this.Nc=!1,cm(a))}},a.prototype.Hc=function(a){if(0===a.button){var b=this.Kc(a);this.xc=null,this.Rc=!1,this.Fc&&(this.Fc(),this.Fc=null),ci()&&this.hv.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uc),!this.$c(a)&&((this.iv(b,this.Qc.yv),++this.wc,this.Mc&&this.wc>1)?(this.Zc(cn(a),this.bc).Xc<5&&!this.Tc&&this.iv(b,this.Qc.nv),this.sv()):this.Tc||this.iv(b,this.Qc.kv))}},a.prototype.ev=function(){null!==this.kc&&(clearTimeout(this.kc),this.kc=null)},a.prototype.Nv=function(a){if(null===this.jc){var b=a.changedTouches[0];this.jc=b.identifier,this.Ic=co(a);var c=this.hv.ownerDocument.documentElement;this.Dc=!1,this.Sc=!1,this.zc=!1,this.Cc=cn(b),this.Oc&&(this.Oc(),this.Oc=null);var d=this.fv.bind(this),e=this.mv.bind(this);this.Oc=function(){c.removeEventListener("touchmove",d),c.removeEventListener("touchend",e)},c.addEventListener("touchmove",d,{passive:!1}),c.addEventListener("touchend",e,{passive:!1}),this.ev(),this.kc=setTimeout(this.xv.bind(this,a),240);var f=this.Kc(a,b);this.Jc(f,this.Qc.Cv),this.gc||(this.mc=0,this.gc=setTimeout(this.tv.bind(this),500),this.yc=cn(b))}},a.prototype.Sv=function(a){if(0===a.button){var b=this.hv.ownerDocument.documentElement;ci()&&b.addEventListener("mouseleave",this.Uc),this.Tc=!1,this.xc=cn(a),this.Fc&&(this.Fc(),this.Fc=null);var c=this.Mv.bind(this),d=this.Hc.bind(this);if(this.Fc=function(){b.removeEventListener("mousemove",c),b.removeEventListener("mouseup",d)},b.addEventListener("mousemove",c),b.addEventListener("mouseup",d),this.Rc=!0,!this.$c(a)){var e=this.Kc(a);this.iv(e,this.Qc.Tv),this.Mc||(this.wc=0,this.Mc=setTimeout(this.sv.bind(this),500),this.bc=cn(a))}}},a.prototype.rv=function(){var a=this;this.hv.addEventListener("mouseenter",this.uv.bind(this)),this.hv.addEventListener("touchcancel",this.ev.bind(this));var b,c=this.hv.ownerDocument,d=function(b){a.Qc.Dv&&(b.target&&a.hv.contains(b.target)||a.Qc.Dv())};this.Bc=function(){c.removeEventListener("touchstart",d)},this.Ac=function(){c.removeEventListener("mousedown",d)},c.addEventListener("mousedown",d),c.addEventListener("touchstart",d,{passive:!0}),cj()&&(this.Lc=function(){a.hv.removeEventListener("dblclick",a.Yc)},this.hv.addEventListener("dblclick",this.Yc)),this.hv.addEventListener("mouseleave",this.Av.bind(this)),this.hv.addEventListener("touchstart",this.Nv.bind(this),{passive:!0}),b=this.hv,ch&& void 0!==window.chrome&&b.addEventListener("mousedown",function(a){if(1===a.button)return a.preventDefault(),!1}),this.hv.addEventListener("mousedown",this.Sv.bind(this)),this.Bv(),this.hv.addEventListener("touchmove",function(){},{passive:!1})},a.prototype.Bv=function(){var a=this;void 0===this.Qc.Lv&& void 0===this.Qc.Ev&& void 0===this.Qc.Fv||(this.hv.addEventListener("touchstart",function(b){return a.Ov(b.touches)},{passive:!0}),this.hv.addEventListener("touchmove",function(b){if(2===b.touches.length&&null!==a.Vc&& void 0!==a.Qc.Ev){var c=cl(b.touches[0],b.touches[1])/a.Pc;a.Qc.Ev(a.Vc,c),cm(b)}},{passive:!1}),this.hv.addEventListener("touchend",function(b){a.Ov(b.touches)}))},a.prototype.Ov=function(a){1===a.length&&(this.Wc=!1),2!==a.length||this.Wc||this.Nc?this.Vv():this.Pv(a)},a.prototype.Pv=function(a){var b=this.hv.getBoundingClientRect()||{left:0,top:0};this.Vc={tt:(a[0].clientX-b.left+(a[1].clientX-b.left))/2,it:(a[0].clientY-b.top+(a[1].clientY-b.top))/2},this.Pc=cl(a[0],a[1]),void 0!==this.Qc.Lv&&this.Qc.Lv(),this.ev()},a.prototype.Vv=function(){null!==this.Vc&&(this.Vc=null,void 0!==this.Qc.Fv&&this.Qc.Fv())},a.prototype.Av=function(a){if(this.Ec&&this.Ec(),!this.$c(a)&&this.qc){var b=this.Kc(a);this.iv(b,this.Qc.Wv),this.qc=!cj()}},a.prototype.xv=function(a){var b=cp(a.touches,j(this.jc));if(null!==b){var c=this.Kc(a,b);this.Jc(c,this.Qc.zv),this.Dc=!0,this.Nc=!0}},a.prototype.$c=function(a){return a.sourceCapabilities&& void 0!==a.sourceCapabilities.firesTouchEvents?a.sourceCapabilities.firesTouchEvents:co(a)<this.Ic+500},a.prototype.Jc=function(a,b){b&&b.call(this.Qc,a)},a.prototype.iv=function(a,b){b&&b.call(this.Qc,a)},a.prototype.Kc=function(a,b){var c=b||a,d=this.hv.getBoundingClientRect()||{left:0,top:0};return{Rv:c.clientX,Iv:c.clientY,jv:c.pageX,qv:c.pageY,Uv:c.screenX,Hv:c.screenY,Yv:c.clientX-d.left,$v:c.clientY-d.top,Kv:a.ctrlKey,Xv:a.altKey,Zv:a.shiftKey,Jv:a.metaKey,Gv:!a.type.startsWith("mouse")&&"contextmenu"!==a.type&&"click"!==a.type,Qv:a.type,t_:c.target,i_:a.view,n_:function(){"touchstart"!==a.type&&cm(a)}}},a}();function cl(a,b){var c=a.clientX-b.clientX,d=a.clientY-b.clientY;return Math.sqrt(c*c+d*d)}function cm(a){a.cancelable&&a.preventDefault()}function cn(a){return{tt:a.pageX,it:a.pageY}}function co(a){return a.timeStamp||performance.now()}function cp(a,b){for(var c=0;c<a.length;++c)if(a[c].identifier===b)return a[c];return null}var cq=function(){function a(a,b,c,d){this.rh=new aT(200),this.R=0,this.s_="",this.Yh="",this.th=[],this.h_=new Map,this.R=a,this.s_=b,this.Yh=I(a,c,d)}return a.prototype.g=function(){this.rh.ih(),this.th=[],this.h_.clear()},a.prototype.r_=function(a,b,c,d,e){var f=this.e_(a,b);if("left"!==e){var g=ca(a.canvas);c-=Math.floor(f.u_*g)}d-=Math.floor(f.Yt/2),a.drawImage(f.a_,c,d,f.Ht,f.Yt)},a.prototype.e_=function(a,b){var c,d=this;if(this.h_.has(b))c=i(this.h_.get(b));else{if(this.th.length>=200){var e=i(this.th.shift());this.h_.delete(e)}var f=ca(a.canvas),g=Math.ceil(this.R/4.5),h=Math.round(this.R/10),j=Math.ceil(this.rh.Qt(a,b)),k=aG(Math.round(j+2*g)),l=aG(this.R+2*g),m=cc(document,new b9(k,l));c={Gt:b,u_:Math.round(Math.max(1,j)),Ht:Math.ceil(k*f),Yt:Math.ceil(l*f),a_:m},0!==j&&(this.th.push(c.Gt),this.h_.set(c.Gt,c)),T(a=cb(c.a_),f,function(){a.font=d.Yh,a.fillStyle=d.s_,a.fillText(b,0,l-g-h)})}return c},a}(),cr=function(){function a(a,b,c,d){var e=this;this._i=null,this.o_=null,this.l_=!1,this.f_=new aT(50),this.c_=new cq(11,"#000"),this.s_=null,this.Yh=null,this.v_=0,this.__=!1,this.d_=function(){e.w_(e.cf.W()),e.__||e.Di.M_().jt().Wr()},this.b_=function(){e.__||e.Di.M_().jt().Wr()},this.Di=a,this.zi=b,this.cf=c,this.m_="left"===d,this.p_=document.createElement("div"),this.p_.style.height="100%",this.p_.style.overflow="hidden",this.p_.style.width="25px",this.p_.style.left="0",this.p_.style.position="relative",this.g_=cd(this.p_,new b9(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var f=this.g_.canvas;f.style.position="absolute",f.style.zIndex="1",f.style.left="0",f.style.top="0",this.y_=cd(this.p_,new b9(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var g=this.y_.canvas;g.style.position="absolute",g.style.zIndex="2",g.style.left="0",g.style.top="0";var h={Tv:this.k_.bind(this),Cv:this.k_.bind(this),bv:this.N_.bind(this),wv:this.N_.bind(this),Dv:this.x_.bind(this),yv:this.C_.bind(this),pv:this.C_.bind(this),nv:this.S_.bind(this),Gc:this.S_.bind(this),ov:this.T_.bind(this),Wv:this.D_.bind(this)};this.A_=new ck(this.y_.canvas,h,{_v:function(){return!1},dv:function(){return!0}})}return a.prototype.g=function(){this.A_.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy(),null!==this._i&&this._i._a().M(this),this._i=null,this.c_.g()},a.prototype.B_=function(){return this.p_},a.prototype.ht=function(){return j(this._i).W().borderColor},a.prototype.L_=function(){return this.zi.textColor},a.prototype.S=function(){return this.zi.fontSize},a.prototype.E_=function(){return I(this.S(),this.zi.fontFamily)},a.prototype.F_=function(){var a=this.cf.W(),b=this.s_!==a.A,c=this.Yh!==a.T;return(b||c)&&(this.w_(a),this.s_=a.A),c&&(this.f_.ih(),this.Yh=a.T),a},a.prototype.O_=function(){if(null===this._i)return 0;var a=0,b=this.F_(),c=cb(this.g_.canvas),d=this._i.au();c.font=this.E_(),d.length>0&&(a=Math.max(this.f_.Qt(c,d[0].yu),this.f_.Qt(c,d[d.length-1].yu)));for(var e=this.V_(),f=e.length;f--;){var g=this.f_.Qt(c,e[f].Gt());g>a&&(a=g)}var h=this._i.kt();if(null!==h&&null!==this.o_){var i=this._i.qi(1,h),j=this._i.qi(this.o_.Ot-2,h);a=Math.max(a,this.f_.Qt(c,this._i.Mi(Math.floor(Math.min(i,j))+.11111111111111,h)),this.f_.Qt(c,this._i.Mi(Math.ceil(Math.max(i,j))-.11111111111111,h)))}var k=a||34,l=Math.ceil(b.N+b.C+b.L+b.F+k);return l+l%2},a.prototype.P_=function(a){if(a.Ft<0||a.Ot<0)throw Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(a));null!==this.o_&&this.o_.br(a)||(this.o_=a,this.__=!0,this.g_.resizeCanvas({width:a.Ft,height:a.Ot}),this.y_.resizeCanvas({width:a.Ft,height:a.Ot}),this.__=!1,this.p_.style.width=a.Ft+"px",this.p_.style.height=a.Ot+"px",this.p_.style.minWidth=a.Ft+"px")},a.prototype.W_=function(){return j(this.o_).Ft},a.prototype.Si=function(a){this._i!==a&&(null!==this._i&&this._i._a().M(this),this._i=a,a._a().u(this.Eu.bind(this),this))},a.prototype.Ct=function(){return this._i},a.prototype.ih=function(){var a=this.Di.z_();this.Di.M_().jt().no(a,j(this.Ct()))},a.prototype.R_=function(a){if(null!==this.o_){if(1!==a){var b=cb(this.g_.canvas);this.I_(),this.j_(b,this.g_.pixelRatio),this.Rs(b,this.g_.pixelRatio),this.q_(b,this.g_.pixelRatio),this.U_(b,this.g_.pixelRatio)}var c=cb(this.y_.canvas),d=this.o_.Ft,e=this.o_.Ot;T(c,this.y_.pixelRatio,function(){c.clearRect(0,0,d,e)}),this.H_(c,this.y_.pixelRatio)}},a.prototype.Y_=function(){return this.g_.canvas},a.prototype.vt=function(){var a;null===(a=this._i)|| void 0===a||a.au()},a.prototype.k_=function(a){if(null!==this._i&&!this._i.wi()&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var b=this.Di.M_().jt(),c=this.Di.z_();this.l_=!0,b.Ka(c,this._i,a.$v)}},a.prototype.N_=function(a){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var b=this.Di.M_().jt(),c=this.Di.z_(),d=this._i;b.Xa(c,d,a.$v)}},a.prototype.x_=function(){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var a=this.Di.M_().jt(),b=this.Di.z_(),c=this._i;this.l_&&(this.l_=!1,a.Za(b,c))}},a.prototype.C_=function(a){if(null!==this._i&&this.Di.M_().W().handleScale.axisPressedMouseMove.price){var b=this.Di.M_().jt(),c=this.Di.z_();this.l_=!1,b.Za(c,this._i)}},a.prototype.S_=function(a){this.Di.M_().W().handleScale.axisDoubleClickReset&&this.ih()},a.prototype.T_=function(a){null!==this._i&&(!this.Di.M_().jt().W().handleScale.axisPressedMouseMove.price||this._i.vr()||this._i.Zu()||this.K_(1))},a.prototype.D_=function(a){this.K_(0)},a.prototype.V_=function(){var a=this,b=[],c=null===this._i?void 0:this._i;return function(d){for(var e=0;e<d.length;++e)for(var f=d[e].nn(a.Di.z_(),c),g=0;g<f.length;g++)b.push(f[g])}(this.Di.z_().oa()),b},a.prototype.j_=function(a,b){var c=this;if(null!==this.o_){var d=this.o_.Ft,e=this.o_.Ot;T(a,b,function(){var b=c.Di.z_().jt(),f=b.Zf(),g=b.Xf();f===g?U(a,0,0,d,e,f):V(a,0,0,d,e,f,g)})}},a.prototype.Rs=function(a,b){if(null!==this.o_&&null!==this._i&&this._i.W().borderVisible){a.save(),a.fillStyle=this.ht();var c,d=Math.max(1,Math.floor(this.F_().N*b));c=this.m_?Math.floor(this.o_.Ft*b)-d:0,a.fillRect(c,0,d,Math.ceil(this.o_.Ot*b)),a.restore()}},a.prototype.q_=function(a,b){if(null!==this.o_&&null!==this._i){var c=this._i.au();a.save(),a.strokeStyle=this.ht(),a.font=this.E_(),a.fillStyle=this.ht();var d=this.F_(),e=this._i.W().borderVisible&&this._i.W().drawTicks,f=this.m_?Math.floor((this.o_.Ft-d.C)*b-d.N*b):Math.floor(d.N*b),g=this.m_?Math.round(f-d.L*b):Math.round(f+d.C*b+d.L*b),h=this.m_?"right":"left",i=Math.max(1,Math.floor(b)),j=Math.floor(.5*b);if(e){var k=Math.round(d.C*b);a.beginPath();for(var l=0,m=c;l<m.length;l++){var n=m[l];a.rect(f,Math.round(n.su*b)-j,k,i)}a.fill()}a.fillStyle=this.L_();for(var o=0,p=c;o<p.length;o++)n=p[o],this.c_.r_(a,n.yu,g,Math.round(n.su*b),h);a.restore()}},a.prototype.I_=function(){if(null!==this.o_&&null!==this._i){var a=this.o_.Ot/2,b=[],c=this._i.oa().slice(),d=this.Di.z_(),e=this.F_();this._i===d.fh()&&this.Di.z_().oa().forEach(function(a){d.lh(a)&&c.push(a)});var f=this._i.Ge()[0],g=this._i;c.forEach(function(c){var e=c.nn(d,g);e.forEach(function(a){a.oi(null),a.li()&&b.push(a)}),f===c&&e.length>0&&(a=e[0].ti())});var h=b.filter(function(b){return b.ti()<=a}),i=b.filter(function(b){return b.ti()>a});if(h.sort(function(a,b){return b.ti()-a.ti()}),h.length&&i.length&&i.push(h[0]),i.sort(function(a,b){return a.ti()-b.ti()}),b.forEach(function(a){return a.oi(a.ti())}),this._i.W().alignLabels){for(var j,k,l=1;l<h.length;l++){var m=h[l],n=(j=h[l-1]).Yt(e,!1);m.ti()>(k=j.ai())-n&&m.oi(k-n)}for(var o=1;o<i.length;o++)m=i[o],n=(j=i[o-1]).Yt(e,!0),m.ti()<(k=j.ai())+n&&m.oi(k+n)}}},a.prototype.U_=function(a,b){var c=this;if(null!==this.o_){a.save();var d=this.o_,e=this.V_(),f=this.F_(),g=this.m_?"right":"left";e.forEach(function(e){if(e.fi()){var h=e.dt(j(c._i));a.save(),h.H(a,f,c.f_,d.Ft,g,b),a.restore()}}),a.restore()}},a.prototype.H_=function(a,b){var c=this;if(null!==this.o_&&null!==this._i){a.save();var d=this.o_,e=this.Di.M_().jt(),f=[],g=this.Di.z_(),h=e.Tf().nn(g,this._i);h.length&&f.push(h);var i=this.F_(),k=this.m_?"right":"left";f.forEach(function(e){e.forEach(function(e){a.save(),e.dt(j(c._i)).H(a,i,c.f_,d.Ft,k,b),a.restore()})}),a.restore()}},a.prototype.K_=function(a){this.p_.style.cursor=1===a?"ns-resize":"default"},a.prototype.Eu=function(){var a=this.O_();this.v_<a&&this.Di.M_().jt().Ce(),this.v_=a},a.prototype.w_=function(a){this.c_.g(),this.c_=new cq(a.S,a.A,a.D)},a}();function cs(a,b,c,d,e){a.$&&a.$(b,c,d,e)}function ct(a,b,c,d,e){a.H(b,c,d,e)}function cu(a,b){return a.tn(b)}function cv(a,b){return void 0!==a.Pe?a.Pe(b):[]}var cw=function(){function a(a,b){var c=this;this.o_=new b9(0,0),this.X_=null,this.Z_=null,this.J_=null,this.G_=!1,this.Q_=new y,this.td=0,this.nd=!1,this.sd=null,this.hd=!1,this.rd=null,this.ed=null,this.__=!1,this.d_=function(){c.__||null===c.ud||c.pi().Wr()},this.b_=function(){c.__||null===c.ud||c.pi().Wr()},this.ad=a,this.ud=b,this.ud.ro().u(this.od.bind(this),this,!0),this.ld=document.createElement("td"),this.ld.style.padding="0",this.ld.style.position="relative";var d=document.createElement("div");d.style.width="100%",d.style.height="100%",d.style.position="relative",d.style.overflow="hidden",this.fd=document.createElement("td"),this.fd.style.padding="0",this.vd=document.createElement("td"),this.vd.style.padding="0",this.ld.appendChild(d),this.g_=cd(d,new b9(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var e=this.g_.canvas;e.style.position="absolute",e.style.zIndex="1",e.style.left="0",e.style.top="0",this.y_=cd(d,new b9(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var f=this.y_.canvas;f.style.position="absolute",f.style.zIndex="2",f.style.left="0",f.style.top="0",this._d=document.createElement("tr"),this._d.appendChild(this.fd),this._d.appendChild(this.ld),this._d.appendChild(this.vd),this.dd(),this.A_=new ck(this.y_.canvas,this,{_v:function(){return null===c.sd&&!c.ad.W().handleScroll.vertTouchDrag},dv:function(){return null===c.sd&&!c.ad.W().handleScroll.horzTouchDrag}})}return a.prototype.g=function(){null!==this.X_&&this.X_.g(),null!==this.Z_&&this.Z_.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy(),null!==this.ud&&this.ud.ro().M(this),this.A_.g()},a.prototype.z_=function(){return j(this.ud)},a.prototype.wd=function(b){null!==this.ud&&this.ud.ro().M(this),this.ud=b,null!==this.ud&&this.ud.ro().u(a.prototype.od.bind(this),this,!0),this.dd()},a.prototype.M_=function(){return this.ad},a.prototype.B_=function(){return this._d},a.prototype.dd=function(){if(null!==this.ud&&(this.Md(),0!==this.pi()._t().length)){if(null!==this.X_){var a=this.ud.Ya();this.X_.Si(j(a))}if(null!==this.Z_){var b=this.ud.$a();this.Z_.Si(j(b))}}},a.prototype.bd=function(){null!==this.X_&&this.X_.vt(),null!==this.Z_&&this.Z_.vt()},a.prototype.Wa=function(){return null!==this.ud?this.ud.Wa():0},a.prototype.za=function(a){this.ud&&this.ud.za(a)},a.prototype.ov=function(a){if(this.ud){this.md();var b=a.Yv,c=a.$v;this.pd(b,c)}},a.prototype.Tv=function(a){this.md(),this.gd(),this.pd(a.Yv,a.$v)},a.prototype.lv=function(a){if(this.ud){this.md();var b=a.Yv,c=a.$v;this.pd(b,c);var d=this.$h(b,c);this.pi().yf(d&&{kf:d.kf,yd:d.yd})}},a.prototype.kv=function(a){if(null!==this.ud){this.md();var b=a.Yv,c=a.$v;if(this.Q_.p()){var d=this.pi().Tf().Mt();this.Q_.m(d,{x:b,y:c})}}},a.prototype.bv=function(a){this.md(),this.kd(a),this.pd(a.Yv,a.$v)},a.prototype.yv=function(a){null!==this.ud&&(this.md(),this.nd=!1,this.Nd(a))},a.prototype.zv=function(a){if(this.nd=!0,null===this.sd){var b={x:a.Yv,y:a.$v};this.xd(b,b)}},a.prototype.Wv=function(a){null!==this.ud&&(this.md(),this.ud.jt().yf(null),this.Cd())},a.prototype.Sd=function(){return this.Q_},a.prototype.Lv=function(){this.td=1,this.Td()},a.prototype.Ev=function(a,b){if(this.ad.W().handleScale.pinch){var c=5*(b-this.td);this.td=b,this.pi().Ef(a.tt,c)}},a.prototype.Cv=function(a){if(this.nd=!1,this.hd=null!==this.sd,this.gd(),null!==this.sd){var b=this.pi().Tf();this.rd={x:b.$t(),y:b.Kt()},this.sd={x:a.Yv,y:a.$v}}},a.prototype.wv=function(a){if(null!==this.ud){var b=a.Yv,c=a.$v;if(null===this.sd)this.kd(a);else{this.hd=!1;var d=j(this.rd),e=d.x+(b-this.sd.x),f=d.y+(c-this.sd.y);this.pd(e,f)}}},a.prototype.pv=function(a){0===this.M_().W().trackingMode.exitMode&&(this.hd=!0),this.Dd(),this.Nd(a)},a.prototype.$h=function(a,b){var c=this.ud;if(null===c)return null;for(var d=0,e=c.oa();d<e.length;d++){var f=e[d],g=this.Ad(f.tn(c),a,b);if(null!==g)return{kf:f,i_:g.i_,yd:g.yd}}return null},a.prototype.Bd=function(a,b){j("left"===b?this.X_:this.Z_).P_(new b9(a,this.o_.Ot))},a.prototype.Ld=function(){return this.o_},a.prototype.P_=function(a){if(a.Ft<0||a.Ot<0)throw Error("Try to set invalid size to PaneWidget "+JSON.stringify(a));this.o_.br(a)||(this.o_=a,this.__=!0,this.g_.resizeCanvas({width:a.Ft,height:a.Ot}),this.y_.resizeCanvas({width:a.Ft,height:a.Ot}),this.__=!1,this.ld.style.width=a.Ft+"px",this.ld.style.height=a.Ot+"px")},a.prototype.Ed=function(){var a=j(this.ud);a.Ha(a.Ya()),a.Ha(a.$a());for(var b=0,c=a.Ge();b<c.length;b++){var d=c[b];if(a.lh(d)){var e=d.Ct();null!==e&&a.Ha(e),d.hn()}}},a.prototype.Y_=function(){return this.g_.canvas},a.prototype.R_=function(a){if(0!==a&&null!==this.ud){if(a>1&&this.Ed(),null!==this.X_&&this.X_.R_(a),null!==this.Z_&&this.Z_.R_(a),1!==a){var b=cb(this.g_.canvas);b.save(),this.j_(b,this.g_.pixelRatio),this.ud&&(this.Fd(b,this.g_.pixelRatio),this.Od(b,this.g_.pixelRatio),this.Vd(b,this.g_.pixelRatio,cu)),b.restore()}var c=cb(this.y_.canvas);c.clearRect(0,0,Math.ceil(this.o_.Ft*this.y_.pixelRatio),Math.ceil(this.o_.Ot*this.y_.pixelRatio)),this.Vd(c,this.g_.pixelRatio,cv),this.Pd(c,this.y_.pixelRatio)}},a.prototype.Wd=function(){return this.X_},a.prototype.zd=function(){return this.Z_},a.prototype.od=function(){null!==this.ud&&this.ud.ro().M(this),this.ud=null},a.prototype.j_=function(a,b){var c=this;T(a,b,function(){var b=c.pi(),d=b.Zf(),e=b.Xf();d===e?U(a,0,0,c.o_.Ft,c.o_.Ot,e):V(a,0,0,c.o_.Ft,c.o_.Ot,d,e)})},a.prototype.Fd=function(a,b){var c=j(this.ud),d=c.eo().ou().dt(c.Yt(),c.Ht());null!==d&&(a.save(),d.H(a,b,!1),a.restore())},a.prototype.Od=function(a,b){var c=this.pi().Sf();this.Rd(a,b,cu,cs,c),this.Rd(a,b,cu,ct,c)},a.prototype.Pd=function(a,b){this.Rd(a,b,cu,ct,this.pi().Tf())},a.prototype.Vd=function(a,b,c){for(var d=j(this.ud).oa(),e=0,f=d;e<f.length;e++){var g=f[e];this.Rd(a,b,c,cs,g)}for(var h=0,i=d;h<i.length;h++)g=i[h],this.Rd(a,b,c,ct,g)},a.prototype.Rd=function(a,b,c,d,e){for(var f=j(this.ud),g=c(e,f),h=f.Yt(),i=f.Ht(),k=f.jt().gf(),l=null!==k&&k.kf===e,m=null!==k&&l&& void 0!==k.yd?k.yd.Kh:void 0,n=0,o=g;n<o.length;n++){var p=o[n].dt(h,i);null!==p&&(a.save(),d(p,a,b,l,m),a.restore())}},a.prototype.Ad=function(a,b,c){for(var d=0,e=a;d<e.length;d++){var f=e[d],g=f.dt(this.o_.Ot,this.o_.Ft);if(null!==g&&g.$h){var h=g.$h(b,c);if(null!==h)return{i_:f,yd:h}}}return null},a.prototype.Md=function(){if(null!==this.ud){var a=this.ad,b=this.ud.Ya().W().visible,c=this.ud.$a().W().visible;b||null===this.X_||(this.fd.removeChild(this.X_.B_()),this.X_.g(),this.X_=null),c||null===this.Z_||(this.vd.removeChild(this.Z_.B_()),this.Z_.g(),this.Z_=null);var d=a.jt().qf();b&&null===this.X_&&(this.X_=new cr(this,a.W().layout,d,"left"),this.fd.appendChild(this.X_.B_())),c&&null===this.Z_&&(this.Z_=new cr(this,a.W().layout,d,"right"),this.vd.appendChild(this.Z_.B_()))}},a.prototype.Id=function(a){return a.Gv&&this.nd||null!==this.sd},a.prototype.jd=function(a){return Math.max(0,Math.min(a,this.o_.Ft-1))},a.prototype.qd=function(a){return Math.max(0,Math.min(a,this.o_.Ot-1))},a.prototype.pd=function(a,b){this.pi().Rf(this.jd(a),this.qd(b),j(this.ud))},a.prototype.Cd=function(){this.pi().If()},a.prototype.Dd=function(){this.hd&&(this.sd=null,this.Cd())},a.prototype.xd=function(a,b){this.sd=a,this.hd=!1,this.pd(b.x,b.y);var c=this.pi().Tf();this.rd={x:c.$t(),y:c.Kt()}},a.prototype.pi=function(){return this.ad.jt()},a.prototype.Ud=function(){var a=this.pi(),b=this.z_(),c=b.ji();a.Qa(b,c),a.Pf(),this.J_=null,this.G_=!1},a.prototype.Nd=function(a){var b=this;if(this.G_){var c=performance.now();if(null!==this.ed&&this.ed.xh(a.Yv,c),null===this.ed||this.ed.cc(c))this.Ud();else{var d=this.pi(),e=d.bt(),f=this.ed,g=function(){if(!f._c()){var a=performance.now(),c=f.cc(a);if(!f._c()){var h=e.Nl();d.Vf(f.fc(a)),h===e.Nl()&&(c=!0,b.ed=null)}c?b.Ud():requestAnimationFrame(g)}};requestAnimationFrame(g)}}},a.prototype.md=function(){this.sd=null},a.prototype.gd=function(){if(this.ud){if(this.Td(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)j(document.activeElement).blur();else{var a=document.getSelection();null!==a&&a.removeAllRanges()}this.ud.ji().wi()||this.pi().bt().wi()}},a.prototype.kd=function(a){if(null!==this.ud){var b=this.pi();if(!b.bt().wi()){var c=this.ad.W(),d=c.handleScroll,e=c.kineticScroll;if(d.pressedMouseMove&&!a.Gv||(d.horzTouchDrag||d.vertTouchDrag)&&a.Gv){var f=this.ud.ji(),g=performance.now();null!==this.J_||this.Id(a)||(this.J_={x:a.Rv,y:a.Iv,So:g,Yv:a.Yv,$v:a.$v}),null!==this.ed&&this.ed.lc(a.Yv,g),null===this.J_||this.G_||this.J_.x===a.Rv&&this.J_.y===a.Iv||(null===this.ed&&(a.Gv&&e.touch|| !a.Gv&&e.mouse)&&(this.ed=new cg(.2,7,.997,15),this.ed.lc(this.J_.Yv,this.J_.So),this.ed.lc(a.Yv,g)),f.wi()||b.Ja(this.ud,f,a.$v),b.Of(a.Yv),this.G_=!0),this.G_&&(f.wi()||b.Ga(this.ud,f,a.$v),b.Vf(a.Yv))}}}},a.prototype.Td=function(){var a=performance.now(),b=null===this.ed||this.ed.cc(a);null!==this.ed&&(b||this.Ud()),null!==this.ed&&(this.ed.dc(),this.ed=null)},a}(),cx=function(){function a(a,b,c,d,e){var f=this;this.ft=!0,this.o_=new b9(0,0),this.d_=function(){return f.R_(3)},this.m_="left"===a,this.cf=c.qf,this.zi=b,this.Hd=d,this.Yd=e,this.p_=document.createElement("div"),this.p_.style.width="25px",this.p_.style.height="100%",this.p_.style.overflow="hidden",this.g_=cd(this.p_,new b9(16,16)),this.g_.subscribeCanvasConfigured(this.d_)}return a.prototype.g=function(){this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy()},a.prototype.B_=function(){return this.p_},a.prototype.Ld=function(){return this.o_},a.prototype.P_=function(a){if(a.Ft<0||a.Ot<0)throw Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(a));this.o_.br(a)||(this.o_=a,this.g_.resizeCanvas({width:a.Ft,height:a.Ot}),this.p_.style.width="".concat(a.Ft,"px"),this.p_.style.minWidth="".concat(a.Ft,"px"),this.p_.style.height="".concat(a.Ot,"px"),this.ft=!0)},a.prototype.R_=function(a){if((!(a<3)||this.ft)&&0!==this.o_.Ft&&0!==this.o_.Ot){this.ft=!1;var b=cb(this.g_.canvas);this.j_(b,this.g_.pixelRatio),this.Rs(b,this.g_.pixelRatio)}},a.prototype.Y_=function(){return this.g_.canvas},a.prototype.Rs=function(a,b){if(this.Hd()){var c=this.o_.Ft;a.save(),a.fillStyle=this.zi.timeScale.borderColor;var d=Math.floor(this.cf.W().N*b),e=this.m_?Math.round(c*b)-d:0;a.fillRect(e,0,d,d),a.restore()}},a.prototype.j_=function(a,b){var c=this;T(a,b,function(){U(a,0,0,c.o_.Ft,c.o_.Ot,c.Yd())})},a}();function cy(a,b){return a.Po>b.Po?a:b}var cz=function(){function a(a){var b=this;this.$d=null,this.Kd=null,this.k=null,this.Xd=!1,this.o_=new b9(0,0),this.Zd=new y,this.f_=new aT(5),this.__=!1,this.d_=function(){b.__||b.ad.jt().Wr()},this.b_=function(){b.__||b.ad.jt().Wr()},this.ad=a,this.zi=a.W().layout,this.Jd=document.createElement("tr"),this.Gd=document.createElement("td"),this.Gd.style.padding="0",this.Qd=document.createElement("td"),this.Qd.style.padding="0",this.p_=document.createElement("td"),this.p_.style.height="25px",this.p_.style.padding="0",this.tw=document.createElement("div"),this.tw.style.width="100%",this.tw.style.height="100%",this.tw.style.position="relative",this.tw.style.overflow="hidden",this.p_.appendChild(this.tw),this.g_=cd(this.tw,new b9(16,16)),this.g_.subscribeCanvasConfigured(this.d_);var c=this.g_.canvas;c.style.position="absolute",c.style.zIndex="1",c.style.left="0",c.style.top="0",this.y_=cd(this.tw,new b9(16,16)),this.y_.subscribeCanvasConfigured(this.b_);var d=this.y_.canvas;d.style.position="absolute",d.style.zIndex="2",d.style.left="0",d.style.top="0",this.Jd.appendChild(this.Gd),this.Jd.appendChild(this.p_),this.Jd.appendChild(this.Qd),this.iw(),this.ad.jt().Pa().u(this.iw.bind(this),this),this.A_=new ck(this.y_.canvas,this,{_v:function(){return!0},dv:function(){return!1}})}return a.prototype.g=function(){this.A_.g(),null!==this.$d&&this.$d.g(),null!==this.Kd&&this.Kd.g(),this.y_.unsubscribeCanvasConfigured(this.b_),this.y_.destroy(),this.g_.unsubscribeCanvasConfigured(this.d_),this.g_.destroy()},a.prototype.B_=function(){return this.Jd},a.prototype.nw=function(){return this.$d},a.prototype.sw=function(){return this.Kd},a.prototype.Tv=function(a){if(!this.Xd){this.Xd=!0;var b=this.ad.jt();!b.bt().wi()&&this.ad.W().handleScale.axisPressedMouseMove.time&&b.Lf(a.Yv)}},a.prototype.Cv=function(a){this.Tv(a)},a.prototype.Dv=function(){var a=this.ad.jt();!a.bt().wi()&&this.Xd&&(this.Xd=!1,this.ad.W().handleScale.axisPressedMouseMove.time&&a.zf())},a.prototype.bv=function(a){var b=this.ad.jt();!b.bt().wi()&&this.ad.W().handleScale.axisPressedMouseMove.time&&b.Wf(a.Yv)},a.prototype.wv=function(a){this.bv(a)},a.prototype.yv=function(){this.Xd=!1;var a=this.ad.jt();a.bt().wi()&&!this.ad.W().handleScale.axisPressedMouseMove.time||a.zf()},a.prototype.pv=function(){this.yv()},a.prototype.nv=function(){this.ad.W().handleScale.axisDoubleClickReset&&this.ad.jt().pn()},a.prototype.Gc=function(){this.nv()},a.prototype.ov=function(){this.ad.jt().W().handleScale.axisPressedMouseMove.time&&this.K_(1)},a.prototype.Wv=function(){this.K_(0)},a.prototype.Ld=function(){return this.o_},a.prototype.hw=function(){return this.Zd},a.prototype.rw=function(a,b,c){this.o_&&this.o_.br(a)||(this.o_=a,this.__=!0,this.g_.resizeCanvas({width:a.Ft,height:a.Ot}),this.y_.resizeCanvas({width:a.Ft,height:a.Ot}),this.__=!1,this.p_.style.width=a.Ft+"px",this.p_.style.height=a.Ot+"px",this.Zd.m(a)),null!==this.$d&&this.$d.P_(new b9(b,a.Ot)),null!==this.Kd&&this.Kd.P_(new b9(c,a.Ot))},a.prototype.ew=function(){var a=this.uw();return Math.ceil(a.N+a.C+a.S+a.O+a.B)},a.prototype.vt=function(){this.ad.jt().bt().au()},a.prototype.Y_=function(){return this.g_.canvas},a.prototype.R_=function(a){if(0!==a){if(1!==a){var b=cb(this.g_.canvas);this.j_(b,this.g_.pixelRatio),this.Rs(b,this.g_.pixelRatio),this.q_(b,this.g_.pixelRatio),null!==this.$d&&this.$d.R_(a),null!==this.Kd&&this.Kd.R_(a)}var c=cb(this.y_.canvas),d=this.y_.pixelRatio;c.clearRect(0,0,Math.ceil(this.o_.Ft*d),Math.ceil(this.o_.Ot*d)),this.aw([this.ad.jt().Tf()],c,d)}},a.prototype.j_=function(a,b){var c=this;T(a,b,function(){U(a,0,0,c.o_.Ft,c.o_.Ot,c.ad.jt().Xf())})},a.prototype.Rs=function(a,b){if(this.ad.W().timeScale.borderVisible){a.save(),a.fillStyle=this.ow();var c=Math.max(1,Math.floor(this.uw().N*b));a.fillRect(0,0,Math.ceil(this.o_.Ft*b),c),a.restore()}},a.prototype.q_=function(a,b){var c=this,d=this.ad.jt().bt().au();if(d&&0!==d.length){var e=d.reduce(cy,d[0]).Po;e>30&&e<50&&(e=30),a.save(),a.strokeStyle=this.ow();var f=this.uw(),g=f.N+f.C+f.O+f.S-f.V;a.textAlign="center",a.fillStyle=this.ow();var h=Math.floor(this.uw().N*b),i=Math.max(1,Math.floor(b)),j=Math.floor(.5*b);if(this.ad.jt().bt().W().borderVisible){a.beginPath();for(var k=Math.round(f.C*b),l=d.length;l--;){var m=Math.round(d[l].su*b);a.rect(m-j,h,i,k)}a.fill()}a.fillStyle=this.j(),T(a,b,function(){a.font=c.lw();for(var b,f=0,h=d;f<h.length;f++)if((b=h[f]).Po<e){var i=b.Sl?c.fw(a,b.su,b.yu):b.su;a.fillText(b.yu,i,g)}a.font=c.cw();for(var j=0,k=d;j<k.length;j++)(b=k[j]).Po>=e&&(i=b.Sl?c.fw(a,b.su,b.yu):b.su,a.fillText(b.yu,i,g))}),a.restore()}},a.prototype.fw=function(a,b,c){var d=this.f_.Qt(a,c),e=Math.floor(b-d/2)+.5;return e<0?b+=Math.abs(0-e):e+d>this.o_.Ft&&(b-=Math.abs(this.o_.Ft-(e+d))),b},a.prototype.aw=function(a,b,c){for(var d=this.uw(),e=0,f=a;e<f.length;e++)for(var g=0,h=f[e].Ti();g<h.length;g++){var i=h[g];b.save(),i.dt().H(b,d,c),b.restore()}},a.prototype.ow=function(){return this.ad.W().timeScale.borderColor},a.prototype.j=function(){return this.zi.textColor},a.prototype.R=function(){return this.zi.fontSize},a.prototype.lw=function(){return I(this.R(),this.zi.fontFamily)},a.prototype.cw=function(){return I(this.R(),this.zi.fontFamily,"bold")},a.prototype.uw=function(){null===this.k&&(this.k={N:1,V:NaN,O:NaN,B:NaN,mi:NaN,C:3,S:NaN,T:"",bi:new aT});var a=this.k,b=this.lw();if(a.T!==b){var c=this.R();a.S=c,a.T=b,a.O=Math.ceil(c/2.5),a.B=a.O,a.mi=Math.ceil(c/2),a.V=Math.round(this.R()/5),a.bi.ih()}return this.k},a.prototype.K_=function(a){this.p_.style.cursor=1===a?"ew-resize":"default"},a.prototype.iw=function(){var a=this.ad.jt(),b=a.W();b.leftPriceScale.visible||null===this.$d||(this.Gd.removeChild(this.$d.B_()),this.$d.g(),this.$d=null),b.rightPriceScale.visible||null===this.Kd||(this.Qd.removeChild(this.Kd.B_()),this.Kd.g(),this.Kd=null);var c={qf:this.ad.jt().qf()},d=function(){return b.leftPriceScale.borderVisible&&a.bt().W().borderVisible},e=function(){return a.Xf()};b.leftPriceScale.visible&&null===this.$d&&(this.$d=new cx("left",b,c,d,e),this.Gd.appendChild(this.$d.B_())),b.rightPriceScale.visible&&null===this.Kd&&(this.Kd=new cx("right",b,c,d,e),this.Qd.appendChild(this.Kd.B_()))},a}(),cA=function(){function a(a,b){this._w=[],this.dw=0,this.xu=0,this.hh=0,this.ww=0,this.Mw=0,this.bw=null,this.mw=!1,this.Q_=new y,this.af=new y,this.zi=b,this.Jd=document.createElement("div"),this.Jd.classList.add("tv-lightweight-charts"),this.Jd.style.overflow="hidden",this.Jd.style.width="100%",this.Jd.style.height="100%",(c=this.Jd).style.userSelect="none",c.style.webkitUserSelect="none",c.style.msUserSelect="none",c.style.MozUserSelect="none",c.style.webkitTapHighlightColor="transparent",this.pw=document.createElement("table"),this.pw.setAttribute("cellspacing","0"),this.Jd.appendChild(this.pw),this.gw=this.yw.bind(this),this.Jd.addEventListener("wheel",this.gw,{passive:!1}),this.pi=new b6(this.ff.bind(this),this.zi),this.jt().Df().u(this.kw.bind(this),this),this.Nw=new cz(this),this.pw.appendChild(this.Nw.B_());var c,d=this.zi.width,e=this.zi.height;if(0===d||0===e){var f=a.getBoundingClientRect();0===d&&(d=Math.floor(f.width),d-=d%2),0===e&&(e=Math.floor(f.height),e-=e%2)}this.xw(d,e),this.Cw(),a.appendChild(this.Jd),this.Sw(),this.pi.bt().Pl().u(this.pi.Ce.bind(this.pi),this),this.pi.Pa().u(this.pi.Ce.bind(this.pi),this)}return a.prototype.jt=function(){return this.pi},a.prototype.W=function(){return this.zi},a.prototype.Tw=function(){return this._w},a.prototype.Dw=function(){return this.Nw},a.prototype.g=function(){this.Jd.removeEventListener("wheel",this.gw),0!==this.dw&&window.cancelAnimationFrame(this.dw),this.pi.Df().M(this),this.pi.bt().Pl().M(this),this.pi.Pa().M(this),this.pi.g();for(var a=0,b=this._w;a<b.length;a++){var c=b[a];this.pw.removeChild(c.B_()),c.Sd().M(this),c.g()}this._w=[],j(this.Nw).g(),null!==this.Jd.parentElement&&this.Jd.parentElement.removeChild(this.Jd),this.af.g(),this.Q_.g()},a.prototype.xw=function(a,b,c){if(void 0===c&&(c=!1),this.xu!==b||this.hh!==a){this.xu=b,this.hh=a;var d=b+"px",e=a+"px";j(this.Jd).style.height=d,j(this.Jd).style.width=e,this.pw.style.height=d,this.pw.style.width=e,c?this.Aw(new aj(3)):this.pi.Ce()}},a.prototype.R_=function(a){void 0===a&&(a=new aj(3));for(var b=0;b<this._w.length;b++)this._w[b].R_(a.wn(b).vn);this.zi.timeScale.visible&&this.Nw.R_(a.dn())},a.prototype.Pr=function(a){this.pi.Pr(a),this.Sw();var b=a.width||this.hh,c=a.height||this.xu;this.xw(b,c)},a.prototype.Sd=function(){return this.Q_},a.prototype.Df=function(){return this.af},a.prototype.Bw=function(){var a=this;null!==this.bw&&(this.Aw(this.bw),this.bw=null);var b=this._w[0],c=cc(document,new b9(this.hh,this.xu)),d=cb(c),e=ca(c);return T(d,e,function(){var c=0,e=0,f=function(b){for(var f=0;f<a._w.length;f++){var g=a._w[f],h=g.Ld().Ot,i=j("left"===b?g.Wd():g.zd()),k=i.Y_();d.drawImage(k,c,e,i.W_(),h),e+=h}};a.Lw()&&(f("left"),c=j(b.Wd()).W_()),e=0;for(var g=0;g<a._w.length;g++){var h=a._w[g],i=h.Ld(),k=h.Y_();d.drawImage(k,c,e,i.Ft,i.Ot),e+=i.Ot}c+=b.Ld().Ft,a.Ew()&&(e=0,f("right"));var l=function(b){var f=j("left"===b?a.Nw.nw():a.Nw.sw()),g=f.Ld(),h=f.Y_();d.drawImage(h,c,e,g.Ft,g.Ot)};if(a.zi.timeScale.visible){c=0,a.Lw()&&(l("left"),c=j(b.Wd()).W_());var m=a.Nw.Ld();k=a.Nw.Y_(),d.drawImage(k,c,e,m.Ft,m.Ot),a.Ew()&&(c+=b.Ld().Ft,l("right"),d.restore())}}),c},a.prototype.Fw=function(a){return"none"===a?0:("left"!==a||this.Lw())&&("right"!==a||this.Ew())?0===this._w.length?0:j("left"===a?this._w[0].Wd():this._w[0].zd()).W_():0},a.prototype.Ow=function(){for(var a=0,b=0,c=0,d=0,e=this._w;d<e.length;d++){var f=e[d];this.Lw()&&(b=Math.max(b,j(f.Wd()).O_())),this.Ew()&&(c=Math.max(c,j(f.zd()).O_())),a+=f.Wa()}var g=this.hh,h=this.xu,i=Math.max(g-b-c,0),k=this.zi.timeScale.visible,l=k?this.Nw.ew():0;l%2&&(l+=1);for(var m=0+l,n=h<m?0:h-m,o=n/a,p=0,q=0;q<this._w.length;++q){(f=this._w[q]).wd(this.pi.Cf()[q]);var r,s=0;s=q===this._w.length-1?n-p:Math.round(f.Wa()*o),p+=r=Math.max(s,2),f.P_(new b9(i,r)),this.Lw()&&f.Bd(b,"left"),this.Ew()&&f.Bd(c,"right"),f.z_()&&this.pi.Af(f.z_(),r)}this.Nw.rw(new b9(k?i:0,l),k?b:0,k?c:0),this.pi.Ra(i),this.ww!==b&&(this.ww=b),this.Mw!==c&&(this.Mw=c)},a.prototype.yw=function(a){var b=a.deltaX/100,c=-a.deltaY/100;if(0!==b&&this.zi.handleScroll.mouseWheel||0!==c&&this.zi.handleScale.mouseWheel){switch(a.cancelable&&a.preventDefault(),a.deltaMode){case a.DOM_DELTA_PAGE:b*=120,c*=120;break;case a.DOM_DELTA_LINE:b*=32,c*=32}if(0!==c&&this.zi.handleScale.mouseWheel){var d=Math.sign(c)*Math.min(1,Math.abs(c)),e=a.clientX-this.Jd.getBoundingClientRect().left;this.jt().Ef(e,d)}0!==b&&this.zi.handleScroll.mouseWheel&&this.jt().Ff(-80*b)}},a.prototype.Aw=function(a){var b,c=a.dn();3===c&&this.Vw(),3!==c&&2!==c||(this.Pw(a),this.Ww(a),this.Nw.vt(),this._w.forEach(function(a){a.bd()}),3===(null===(b=this.bw)|| void 0===b?void 0:b.dn())&&(this.bw.Nn(a),this.Vw(),this.Pw(this.bw),this.Ww(this.bw),a=this.bw,this.bw=null)),this.R_(a)},a.prototype.Ww=function(a){for(var b=0,c=a.kn();b<c.length;b++){var d=c[b];this.xn(d)}},a.prototype.Pw=function(a){for(var b=this.pi.Cf(),c=0;c<b.length;c++)a.wn(c)._n&&b[c].so()},a.prototype.xn=function(a){var b=this.pi.bt();switch(a.bn){case 0:b.zl();break;case 1:b.Rl(a.St);break;case 2:b.gn(a.St);break;case 3:b.yn(a.St);break;case 4:b.Tl()}},a.prototype.ff=function(a){var b=this;null!==this.bw?this.bw.Nn(a):this.bw=a,this.mw||(this.mw=!0,this.dw=window.requestAnimationFrame(function(){if(b.mw=!1,b.dw=0,null!==b.bw){var a=b.bw;b.bw=null,b.Aw(a)}}))},a.prototype.Vw=function(){this.Cw()},a.prototype.Cw=function(){for(var a=this.pi.Cf(),b=a.length,c=this._w.length,d=b;d<c;d++){var e=i(this._w.pop());this.pw.removeChild(e.B_()),e.Sd().M(this),e.g()}for(d=c;d<b;d++)(e=new cw(this,a[d])).Sd().u(this.zw.bind(this),this),this._w.push(e),this.pw.insertBefore(e.B_(),this.Nw.B_());for(d=0;d<b;d++){var f=a[d];(e=this._w[d]).z_()!==f?e.wd(f):e.dd()}this.Sw(),this.Ow()},a.prototype.Rw=function(a,b){var c,d=new Map;if(null!==a&&this.pi._t().forEach(function(b){var c=b.er(a);null!==c&&d.set(b,c)}),null!==a){var e=this.pi.bt().gi(a);null!==e&&(c=e)}var f=this.jt().gf(),g=null!==f&&f.kf instanceof bp?f.kf:void 0,h=null!==f&& void 0!==f.yd?f.yd.Zh:void 0;return{rt:c,Iw:b||void 0,jw:g,qw:d,Uw:h}},a.prototype.zw=function(a,b){var c=this;this.Q_.m(function(){return c.Rw(a,b)})},a.prototype.kw=function(a,b){var c=this;this.af.m(function(){return c.Rw(a,b)})},a.prototype.Sw=function(){var a=this.zi.timeScale.visible?"":"none";this.Nw.B_().style.display=a},a.prototype.Lw=function(){return this._w[0].z_().Ya().W().visible},a.prototype.Ew=function(){return this._w[0].z_().$a().W().visible},a}();function cB(a,b,c){var d=c.value;return{vs:b,rt:a,St:[d,d,d,d]}}function cC(a,b,c){var d=c.value,e={vs:b,rt:a,St:[d,d,d,d]};return"color"in c&& void 0!==c.color&&(e.A=c.color),e}function cD(a){return void 0!==a.St}function cE(a){return function(b,c,d){var e;return void 0===(e=d).open&& void 0===e.value?{rt:b,vs:c}:a(b,c,d)}}var cF={Candlestick:cE(function(a,b,c){var d={vs:b,rt:a,St:[c.open,c.high,c.low,c.close]};return"color"in c&& void 0!==c.color&&(d.A=c.color),"borderColor"in c&& void 0!==c.borderColor&&(d.Tt=c.borderColor),"wickColor"in c&& void 0!==c.wickColor&&(d.qs=c.wickColor),d}),Bar:cE(function(a,b,c){var d={vs:b,rt:a,St:[c.open,c.high,c.low,c.close]};return"color"in c&& void 0!==c.color&&(d.A=c.color),d}),Area:cE(cB),Baseline:cE(cB),Histogram:cE(cC),Line:cE(cC)};function cG(a){return 60*a*6e4}function cH(a){return 60*a*1e3}var cI,cJ,cK,cL,cM=[{Hw:1e3,Po:10},{Hw:cH(1),Po:20},{Hw:cH(5),Po:21},{Hw:cH(30),Po:22},{Hw:cG(1),Po:30},{Hw:cG(3),Po:31},{Hw:cG(6),Po:32},{Hw:cG(12),Po:33}];function cN(a,b){if(a.getUTCFullYear()!==b.getUTCFullYear())return 70;if(a.getUTCMonth()!==b.getUTCMonth())return 60;if(a.getUTCDate()!==b.getUTCDate())return 50;for(var c=cM.length-1;c>=0;--c)if(Math.floor(b.getTime()/cM[c].Hw)!==Math.floor(a.getTime()/cM[c].Hw))return cM[c].Po;return 0}function cO(a,b){if(void 0===b&&(b=0),0!==a.length){for(var c=0===b?null:a[b-1].rt.So,d=null!==c?new Date(1e3*c):null,e=0,f=b;f<a.length;++f){var g=a[f],h=new Date(1e3*g.rt.So);null!==d&&(g.Vo=cN(h,d)),e+=g.rt.So-(c||g.rt.So),c=g.rt.So,d=h}if(0===b&&a.length>1){var i=Math.ceil(e/(a.length-1)),j=new Date(1e3*(a[0].rt.So-i));a[0].Vo=cN(new Date(1e3*a[0].rt.So),j)}}}function cP(a){if(!b8(a))throw Error("time must be of type BusinessDay");return{So:Math.round(new Date(Date.UTC(a.year,a.month-1,a.day,0,0,0,0)).getTime()/1e3),Co:a}}function cQ(a){var b;if(!A(b=a))throw Error("time must be of type isUTCTimestamp");return{So:a}}function cR(a){return 0===a.length?null:b8(a[0].time)?cP:cQ}function cS(a){var b;return A(b=a)?cQ(a):b8(a)?cP(a):cP(cT(a))}function cT(a){var b=new Date(a);if(isNaN(b.getTime()))throw Error("Invalid date string=".concat(a,", expected format=yyyy-mm-dd"));return{day:b.getUTCDate(),month:b.getUTCMonth()+1,year:b.getUTCFullYear()}}function cU(a){C(a.time)&&(a.time=cT(a.time))}function cV(a){return{vs:0,Yw:new Map,Ve:a}}function cW(a){if(void 0!==a&&0!==a.length)return{$w:a[0].rt.So,Kw:a[a.length-1].rt.So}}var cX=function(){function a(){this.Xw=new Map,this.Zw=new Map,this.Jw=new Map,this.Gw=[]}return a.prototype.g=function(){this.Xw.clear(),this.Zw.clear(),this.Jw.clear(),this.Gw=[]},a.prototype.Qw=function(a,b){var c=this,d=0!==this.Xw.size,e=!1,f=this.Zw.get(a);if(void 0!==f){if(1===this.Zw.size)d=!1,e=!0,this.Xw.clear();else for(var g=0,h=this.Gw;g<h.length;g++)h[g].pointData.Yw.delete(a)&&(e=!0)}var i=[];if(0!==b.length){!function(a){a.forEach(cU)}(b);var k,l=j(cR(b)),m=cF[k=a.Rr()];i=b.map(function(b){var d=l(b.time),f=c.Xw.get(d.So);void 0===f&&(f=cV(d),c.Xw.set(d.So,f),e=!0);var g=m(d,f.vs,b);return f.Yw.set(a,g),g})}d&&this.tM(),this.iM(a,i);var n=-1;if(e){var o=[];this.Xw.forEach(function(a){o.push({Vo:0,rt:a.Ve,pointData:a})}),o.sort(function(a,b){return a.rt.So-b.rt.So}),n=this.nM(o)}return this.sM(a,n,function(a,b){var c=cW(a),d=cW(b);if(void 0!==c&& void 0!==d)return{Ae:c.Kw>=d.Kw&&c.$w>=d.$w}}(this.Zw.get(a),f))},a.prototype.Yf=function(a){return this.Qw(a,[])},a.prototype.hM=function(a,b){cU(b);var c=j(cR([b]))(b.time),d=this.Jw.get(a);if(void 0!==d&&c.So<d.So)throw Error("Cannot update oldest data, last time=".concat(d.So,", new time=").concat(c.So));var e,f=this.Xw.get(c.So),g=void 0===f;void 0===f&&(f=cV(c),this.Xw.set(c.So,f));var h=(0,cF[e=a.Rr()])(c,f.vs,b);f.Yw.set(a,h),this.rM(a,h);var i={Ae:cD(h)};if(!g)return this.sM(a,-1,i);var k={Vo:0,rt:f.Ve,pointData:f},l=at(this.Gw,k.rt.So,function(a,b){return a.rt.So<b});this.Gw.splice(l,0,k);for(var m=l;m<this.Gw.length;++m)cY(this.Gw[m].pointData,m);return cO(this.Gw,l),this.sM(a,l,i)},a.prototype.rM=function(a,b){var c=this.Zw.get(a);void 0===c&&(c=[],this.Zw.set(a,c));var d=0!==c.length?c[c.length-1]:null;null===d||b.rt.So>d.rt.So?cD(b)&&c.push(b):cD(b)?c[c.length-1]=b:c.splice(-1,1),this.Jw.set(a,b.rt)},a.prototype.iM=function(a,b){0!==b.length?(this.Zw.set(a,b.filter(cD)),this.Jw.set(a,b[b.length-1].rt)):(this.Zw.delete(a),this.Jw.delete(a))},a.prototype.tM=function(){for(var a=0,b=this.Gw;a<b.length;a++){var c=b[a];0===c.pointData.Yw.size&&this.Xw.delete(c.rt.So)}},a.prototype.nM=function(a){for(var b=-1,c=0;c<this.Gw.length&&c<a.length;++c){var d=this.Gw[c],e=a[c];if(d.rt.So!==e.rt.So){b=c;break}e.Vo=d.Vo,cY(e.pointData,c)}if(-1===b&&this.Gw.length!==a.length&&(b=Math.min(this.Gw.length,a.length)),-1===b)return -1;for(c=b;c<a.length;++c)cY(a[c].pointData,c);return cO(a,b),this.Gw=a,b},a.prototype.eM=function(){if(0===this.Zw.size)return null;var a=0;return this.Zw.forEach(function(b){0!==b.length&&(a=Math.max(a,b[b.length-1].vs))}),a},a.prototype.sM=function(a,b,c){var d={uM:new Map,bt:{ml:this.eM()}};if(-1!==b)this.Zw.forEach(function(b,e){d.uM.set(e,{ph:b,aM:e===a?c:void 0})}),this.Zw.has(a)||d.uM.set(a,{ph:[],aM:c}),d.bt.oM=this.Gw,d.bt.lM=b;else{var e=this.Zw.get(a);d.uM.set(a,{ph:e||[],aM:c})}return d},a}();function cY(a,b){a.vs=b,a.Yw.forEach(function(a){a.vs=b})}var cZ={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},c$=function(){function a(a){this.Lr=a}return a.prototype.applyOptions=function(a){this.Lr.Pr(a)},a.prototype.options=function(){return this.Lr.W()},a.prototype.fM=function(){return this.Lr},a}();function c_(a){var b=a.overlay,c=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]])}return c}(a,["overlay"]);return b&&(c.priceScaleId=""),c}var c0=function(){function a(a,b,c){this.Kn=a,this.cM=b,this.vM=c}return a.prototype.priceFormatter=function(){return this.Kn.qe()},a.prototype.priceToCoordinate=function(a){var b=this.Kn.kt();return null===b?null:this.Kn.Ct().xt(a,b.St)},a.prototype.coordinateToPrice=function(a){var b=this.Kn.kt();return null===b?null:this.Kn.Ct().qi(a,b.St)},a.prototype.barsInLogicalRange=function(a){if(null===a)return null;var b=new bY(new bS(a.from,a.to)).jo(),c=this.Kn.an();if(c.wi())return null;var d=c.ne(b.In(),1),e=c.ne(b.jn(),-1),f=j(c.Qr()),g=j(c.un());if(null!==d&&null!==e&&d.vs>e.vs)return{barsBefore:a.from-f,barsAfter:g-a.to};var h={barsBefore:null===d||d.vs===f?a.from-f:d.vs-f,barsAfter:null===e||e.vs===g?g-a.to:g-e.vs};return null!==d&&null!==e&&(h.from=d.rt.Co||d.rt.So,h.to=e.rt.Co||e.rt.So),h},a.prototype.setData=function(a){this.Kn.Rr(),this.cM._M(this.Kn,a)},a.prototype.update=function(a){this.Kn.Rr(),this.cM.dM(this.Kn,a)},a.prototype.setMarkers=function(a){var b=a.map(function(a){return w(w({},a),{time:cS(a.time)})});this.Kn.Le(b)},a.prototype.applyOptions=function(a){var b=c_(a);this.Kn.Pr(b)},a.prototype.options=function(){return E(this.Kn.W())},a.prototype.priceScale=function(){return this.vM.priceScale(this.Kn.Ct().Ke())},a.prototype.createPriceLine=function(a){var b=z(E(cZ),a),c=this.Kn.Ee(b);return new c$(c)},a.prototype.removePriceLine=function(a){this.Kn.Fe(a.fM())},a.prototype.seriesType=function(){return this.Kn.Rr()},a}(),c1=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return v(b,a),b.prototype.applyOptions=function(b){b7(b),a.prototype.applyOptions.call(this,b)},b}(c0),c2={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},c3={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:H},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:w({},c2),leftPriceScale:w(w({},c2),{visible:!1}),rightPriceScale:w(w({},c2),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:{color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:H,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},localization:{locale:ch?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},c4={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},c5={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},c6={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},c7={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},c8={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},c9={color:"#26a69a",base:0},da={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},db=function(){function a(a,b){this.wM=a,this.MM=b}return a.prototype.applyOptions=function(a){this.wM.jt().Nf(this.MM,a)},a.prototype.options=function(){return this._i().W()},a.prototype.width=function(){return ai(this.MM)?this.wM.Fw("left"===this.MM?"left":"right"):0},a.prototype._i=function(){return j(this.wM.jt().xf(this.MM)).Ct},a}(),dc=function(){function a(a,b){this.bM=new y,this.Go=new y,this.Zd=new y,this.pi=a,this.Da=a.bt(),this.Nw=b,this.Da.Ol().u(this.mM.bind(this)),this.Da.Vl().u(this.pM.bind(this)),this.Nw.hw().u(this.gM.bind(this))}return a.prototype.g=function(){this.Da.Ol().M(this),this.Da.Vl().M(this),this.Nw.hw().M(this),this.bM.g(),this.Go.g(),this.Zd.g()},a.prototype.scrollPosition=function(){return this.Da.Nl()},a.prototype.scrollToPosition=function(a,b){b?this.Da.Fl(a,1e3):this.pi.yn(a)},a.prototype.scrollToRealTime=function(){this.Da.El()},a.prototype.getVisibleRange=function(){var a,b,c=this.Da.cl();return null===c?null:{from:null!==(a=c.from.Co)&& void 0!==a?a:c.from.So,to:null!==(b=c.to.Co)&& void 0!==b?b:c.to.So}},a.prototype.setVisibleRange=function(a){var b={from:cS(a.from),to:cS(a.to)},c=this.Da.wl(b);this.pi.$f(c)},a.prototype.getVisibleLogicalRange=function(){var a=this.Da.fl();return null===a?null:{from:a.In(),to:a.jn()}},a.prototype.setVisibleLogicalRange=function(a){h(a.from<=a.to,"The from index cannot be after the to index."),this.pi.$f(a)},a.prototype.resetTimeScale=function(){this.pi.pn()},a.prototype.fitContent=function(){this.pi.zl()},a.prototype.logicalToCoordinate=function(a){var b=this.pi.bt();return b.wi()?null:b.At(a)},a.prototype.coordinateToLogical=function(a){return this.Da.wi()?null:this.Da.pl(a)},a.prototype.timeToCoordinate=function(a){var b=cS(a),c=this.Da.Ze(b,!1);return null===c?null:this.Da.At(c)},a.prototype.coordinateToTime=function(a){var b,c=this.pi.bt(),d=c.pl(a),e=c.gi(d);return null===e?null:null!==(b=e.Co)&& void 0!==b?b:e.So},a.prototype.width=function(){return this.Nw.Ld().Ft},a.prototype.height=function(){return this.Nw.Ld().Ot},a.prototype.subscribeVisibleTimeRangeChange=function(a){this.bM.u(a)},a.prototype.unsubscribeVisibleTimeRangeChange=function(a){this.bM._(a)},a.prototype.subscribeVisibleLogicalRangeChange=function(a){this.Go.u(a)},a.prototype.unsubscribeVisibleLogicalRangeChange=function(a){this.Go._(a)},a.prototype.subscribeSizeChange=function(a){this.Zd.u(a)},a.prototype.unsubscribeSizeChange=function(a){this.Zd._(a)},a.prototype.applyOptions=function(a){this.Da.Pr(a)},a.prototype.options=function(){return E(this.Da.W())},a.prototype.mM=function(){this.bM.p()&&this.bM.m(this.getVisibleRange())},a.prototype.pM=function(){this.Go.p()&&this.Go.m(this.getVisibleLogicalRange())},a.prototype.gM=function(a){this.Zd.m(a.Ft,a.Ot)},a}();function dd(a){if(void 0!==a&&"custom"!==a.type){var b=a;void 0!==b.minMove&& void 0===b.precision&&(b.precision=function(a){if(a>=1)return 0;for(var b=0;b<8;b++){var c=Math.round(a);if(1e-8>Math.abs(c-a))break;a*=10}return b}(b.minMove))}}function de(a){var b;return function(a){if(D(a.handleScale)){var b=a.handleScale;a.handleScale={axisDoubleClickReset:b,axisPressedMouseMove:{time:b,price:b},mouseWheel:b,pinch:b}}else if(void 0!==a.handleScale&&D(a.handleScale.axisPressedMouseMove)){var c=a.handleScale.axisPressedMouseMove;a.handleScale.axisPressedMouseMove={time:c,price:c}}var d=a.handleScroll;D(d)&&(a.handleScroll={horzTouchDrag:d,vertTouchDrag:d,mouseWheel:d,pressedMouseMove:d})}(a),function(a){if(a.priceScale){a.leftPriceScale=a.leftPriceScale||{},a.rightPriceScale=a.rightPriceScale||{};var b=a.priceScale.position;delete a.priceScale.position,a.leftPriceScale=z(a.leftPriceScale,a.priceScale),a.rightPriceScale=z(a.rightPriceScale,a.priceScale),"left"===b&&(a.leftPriceScale.visible=!0,a.rightPriceScale.visible=!1),"right"===b&&(a.leftPriceScale.visible=!1,a.rightPriceScale.visible=!0),"none"===b&&(a.leftPriceScale.visible=!1,a.rightPriceScale.visible=!1),a.overlayPriceScales=a.overlayPriceScales||{},void 0!==a.priceScale.invertScale&&(a.overlayPriceScales.invertScale=a.priceScale.invertScale),void 0!==a.priceScale.scaleMargins&&(a.overlayPriceScales.scaleMargins=a.priceScale.scaleMargins)}}(a),(b=a).layout&&b.layout.backgroundColor&&!b.layout.background&&(b.layout.background={type:"solid",color:b.layout.backgroundColor}),a}var df=function(){function a(a,b){var c=this;this.yM=new cX,this.kM=new Map,this.NM=new Map,this.xM=new y,this.CM=new y;var d=void 0===b?E(c3):z(E(c3),de(b));this.wM=new cA(a,d),this.wM.Sd().u(function(a){c.xM.p()&&c.xM.m(c.SM(a()))},this),this.wM.Df().u(function(a){c.CM.p()&&c.CM.m(c.SM(a()))},this);var e=this.wM.jt();this.TM=new dc(e,this.wM.Dw())}return a.prototype.remove=function(){this.wM.Sd().M(this),this.wM.Df().M(this),this.TM.g(),this.wM.g(),this.kM.clear(),this.NM.clear(),this.xM.g(),this.CM.g(),this.yM.g()},a.prototype.resize=function(a,b,c){this.wM.xw(a,b,c)},a.prototype.addAreaSeries=function(a){void 0===a&&(a={}),dd((a=c_(a)).priceFormat);var b=z(E(da),c7,a),c=this.wM.jt().Uf("Area",b),d=new c0(c,this,this);return this.kM.set(d,c),this.NM.set(c,d),d},a.prototype.addBaselineSeries=function(a){void 0===a&&(a={}),dd((a=c_(a)).priceFormat);var b=z(E(da),E(c8),a),c=this.wM.jt().Uf("Baseline",b),d=new c0(c,this,this);return this.kM.set(d,c),this.NM.set(c,d),d},a.prototype.addBarSeries=function(a){void 0===a&&(a={}),dd((a=c_(a)).priceFormat);var b=z(E(da),c5,a),c=this.wM.jt().Uf("Bar",b),d=new c0(c,this,this);return this.kM.set(d,c),this.NM.set(c,d),d},a.prototype.addCandlestickSeries=function(a){void 0===a&&(a={}),b7(a=c_(a)),dd(a.priceFormat);var b=z(E(da),c4,a),c=this.wM.jt().Uf("Candlestick",b),d=new c1(c,this,this);return this.kM.set(d,c),this.NM.set(c,d),d},a.prototype.addHistogramSeries=function(a){void 0===a&&(a={}),dd((a=c_(a)).priceFormat);var b=z(E(da),c9,a),c=this.wM.jt().Uf("Histogram",b),d=new c0(c,this,this);return this.kM.set(d,c),this.NM.set(c,d),d},a.prototype.addLineSeries=function(a){void 0===a&&(a={}),dd((a=c_(a)).priceFormat);var b=z(E(da),c6,a),c=this.wM.jt().Uf("Line",b),d=new c0(c,this,this);return this.kM.set(d,c),this.NM.set(c,d),d},a.prototype.removeSeries=function(a){var b=i(this.kM.get(a)),c=this.yM.Yf(b);this.wM.jt().Yf(b),this.DM(c),this.kM.delete(a),this.NM.delete(b)},a.prototype._M=function(a,b){this.DM(this.yM.Qw(a,b))},a.prototype.dM=function(a,b){this.DM(this.yM.hM(a,b))},a.prototype.subscribeClick=function(a){this.xM.u(a)},a.prototype.unsubscribeClick=function(a){this.xM._(a)},a.prototype.subscribeCrosshairMove=function(a){this.CM.u(a)},a.prototype.unsubscribeCrosshairMove=function(a){this.CM._(a)},a.prototype.priceScale=function(a){return void 0===a&&(a=this.wM.jt().Kf()),new db(this.wM,a)},a.prototype.timeScale=function(){return this.TM},a.prototype.applyOptions=function(a){this.wM.Pr(de(a))},a.prototype.options=function(){return this.wM.W()},a.prototype.takeScreenshot=function(){return this.wM.Bw()},a.prototype.DM=function(a){var b=this.wM.jt();b.jf(a.bt.ml,a.bt.oM,a.bt.lM),a.uM.forEach(function(a,b){return b.Z(a.ph,a.aM)}),b.yl()},a.prototype.AM=function(a){return i(this.NM.get(a))},a.prototype.SM=function(a){var b=this,c=new Map;a.qw.forEach(function(a,d){c.set(b.AM(d),a)});var d=void 0===a.jw?void 0:this.AM(a.jw);return{time:a.rt&&(a.rt.Co||a.rt.So),point:a.Iw,hoveredSeries:d,hoveredMarkerId:a.Uw,seriesPrices:c}},a}();function dg(a,b){var c;if(C(a)){var d=document.getElementById(a);h(null!==d,"Cannot find element in DOM with id=".concat(a)),c=d}else c=a;return new df(c,b)}}}])